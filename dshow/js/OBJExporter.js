THREE.OBJExporter=function(){};THREE.OBJExporter.prototype={constructor:THREE.OBJExporter,parse:function(e){var t="";var r=0;var n=0;var o=0;var a=new THREE.Vector3;var i=new THREE.Vector3;var f=new THREE.Vector2;var E,u,v,c,m,s=[];var p=function(e){var v=0;var p=0;var y=0;var g=e.geometry;var x=new THREE.Matrix3;if(g instanceof THREE2.Geometry){g=(new THREE2.BufferGeometry).setFromObject(e)}if(g instanceof THREE2.BufferGeometry){var l=g.getAttribute("position");var H=g.getAttribute("normal");var R=g.getAttribute("uv");var T=g.getIndex();t+="o "+e.name+"\n";if(e.material&&e.material.name){t+="usemtl "+e.material.name+"\n"}if(l!==undefined){for(E=0,c=l.count;E<c;E++,v++){a.x=l.getX(E);a.y=l.getY(E);a.z=l.getZ(E);a.applyMatrix4(e.matrixWorld);t+="v "+a.x+" "+a.y+" "+a.z+"\n"}}if(R!==undefined){for(E=0,c=R.count;E<c;E++,y++){f.x=R.getX(E);f.y=R.getY(E);t+="vt "+f.x+" "+f.y+"\n"}}if(H!==undefined){x.getNormalMatrix(e.matrixWorld);for(E=0,c=H.count;E<c;E++,p++){i.x=H.getX(E);i.y=H.getY(E);i.z=H.getZ(E);i.applyMatrix3(x);t+="vn "+i.x+" "+i.y+" "+i.z+"\n"}}if(T!==null){for(E=0,c=T.count;E<c;E+=3){for(m=0;m<3;m++){u=T.getX(E+m)+1;s[m]=r+u+(H||R?"/"+(R?n+u:"")+(H?"/"+(o+u):""):"")}t+="f "+s.join(" ")+"\n"}}else{for(E=0,c=l.count;E<c;E+=3){for(m=0;m<3;m++){u=E+m+1;s[m]=r+u+(H||R?"/"+(R?n+u:"")+(H?"/"+(o+u):""):"")}t+="f "+s.join(" ")+"\n"}}}else{console.warn("THREE.OBJExporter.parseMesh(): geometry type unsupported",g)}r+=v;n+=y;o+=p};var y=function(e){var n=0;var o=e.geometry;var i=e.type;if(o instanceof THREE2.Geometry){o=(new THREE.BufferGeometry).setFromObject(e)}if(o instanceof THREE2.BufferGeometry){var f=o.getAttribute("position");t+="o "+e.name+"\n";if(f!==undefined){for(E=0,c=f.count;E<c;E++,n++){a.x=f.getX(E);a.y=f.getY(E);a.z=f.getZ(E);a.applyMatrix4(e.matrixWorld);t+="v "+a.x+" "+a.y+" "+a.z+"\n"}}if(i==="Line"){t+="l ";for(u=1,c=f.count;u<=c;u++){t+=r+u+" "}t+="\n"}if(i==="LineSegments"){for(u=1,v=u+1,c=f.count;u<c;u+=2,v=u+1){t+="l "+(r+u)+" "+(r+v)+"\n"}}}else{console.warn("THREE.OBJExporter.parseLine(): geometry type unsupported",o)}r+=n};e.traverse(function(e){if(e instanceof THREE2.Mesh){p(e)}if(e instanceof THREE.Line){y(e)}});return t}};