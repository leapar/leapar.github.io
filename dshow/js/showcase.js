var functions=[function(t,e,n){"use strict";n.d(e,"K",function(){return a}),n.d(e,"d",function(){return u}),n.d(e,"a",function(){return h}),n.d(e,"z",function(){return l}),n.d(e,"n",function(){return c}),n.d(e,"o",function(){return i}),n.d(e,"H",function(){return p}),n.d(e,"c",function(){return d}),n.d(e,"A",function(){return y}),n.d(e,"T",function(){return m}),n.d(e,"b",function(){return g}),n.d(e,"Ja",function(){return f}),n.d(e,"Sa",function(){return v}),n.d(e,"Z",function(){return b}),n.d(e,"Oa",function(){return w}),n.d(e,"Aa",function(){return E}),n.d(e,"Ca",function(){return _}),n.d(e,"Ba",function(){return x}),n.d(e,"X",function(){return O}),n.d(e,"G",function(){return S}),n.d(e,"R",function(){return T}),n.d(e,"I",function(){return P}),n.d(e,"u",function(){return I}),n.d(e,"w",function(){return R}),n.d(e,"v",function(){return L}),n.d(e,"Na",function(){return A}),n.d(e,"l",function(){return M}),n.d(e,"Ka",function(){return k}),n.d(e,"q",function(){return N}),n.d(e,"t",function(){return C}),n.d(e,"r",function(){return D}),n.d(e,"e",function(){return z}),n.d(e,"M",function(){return U}),n.d(e,"Ta",function(){return j}),n.d(e,"x",function(){return B}),n.d(e,"Fa",function(){return V}),n.d(e,"m",function(){return F}),n.d(e,"p",function(){return H}),n.d(e,"Ra",function(){return q}),n.d(e,"i",function(){return G}),n.d(e,"j",function(){return Y}),n.d(e,"h",function(){return W}),n.d(e,"y",function(){return K}),n.d(e,"D",function(){return Z}),n.d(e,"Ha",function(){return X}),n.d(e,"E",function(){return $}),n.d(e,"C",function(){return Q}),n.d(e,"W",function(){return J}),n.d(e,"V",function(){return tt}),n.d(e,"L",function(){return et}),n.d(e,"Da",function(){return nt}),n.d(e,"Ia",function(){return rt}),n.d(e,"P",function(){return it}),n.d(e,"Qa",function(){return ot}),n.d(e,"Q",function(){return st}),n.d(e,"O",function(){return at}),n.d(e,"N",function(){return ut}),n.d(e,"Ea",function(){return ht}),n.d(e,"S",function(){return lt}),n.d(e,"Pa",function(){return ct}),n.d(e,"Ga",function(){return ft}),n.d(e,"B",function(){return pt}),n.d(e,"k",function(){return dt}),n.d(e,"La",function(){return yt}),n.d(e,"f",function(){return mt}),n.d(e,"F",function(){return gt}),n.d(e,"U",function(){return vt}),n.d(e,"J",function(){return bt}),n.d(e,"Ma",function(){return wt}),n.d(e,"g",function(){return Et}),n.d(e,"Y",function(){return _t}),n.d(e,"s",function(){return xt});var r,i,o=n(2),s=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a);!function(t){t[t.UNSUPPORTED=1]="UNSUPPORTED",t[t.WEBGL=2]="WEBGL",t[t.GENERIC=3]="GENERIC"}(i=i||(i={}));var f,p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a);!function(t){t[t.Instant=0]="Instant",t[t.FadeToBlack=1]="FadeToBlack",t[t.Interpolate=2]="Interpolate"}(f=f||(f={}));var v="Transition time",b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(E),x=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(E),O=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),I=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),R=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),L=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),M=1e3,k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),N=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),D=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),z=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),U=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),j="Rotation speed",B=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),V=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),F=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),H=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),q=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),G=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),Y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),W=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),K=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),Z=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),X=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),$=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),Q=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),J=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),tt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),et=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),nt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),rt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),it=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),ot=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),st=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),at=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),ut=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),ht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),lt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),ct=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),ft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),pt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),dt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),yt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),mt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),gt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),vt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),bt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),wt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),Et=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),_t=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a),xt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r,i,o,s,a,u=n(5),h=n(7),l=n(3);function c(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}c.prototype={constructor:c,isVector3:!0,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(t){return!1===(t&&t.isEuler)&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),void 0===a&&(a=new l.a),this.applyQuaternion(a.setFromEuler(t))},applyAxisAngle:function(){var t;return function(e,n){return void 0===t&&(t=new l.a),this.applyQuaternion(t.setFromAxisAngle(e,n))}}(),applyMatrix3:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r+i[12],this.y=i[1]*e+i[5]*n+i[9]*r+i[13],this.z=i[2]*e+i[6]*n+i[10]*r+i[14],this},applyProjection:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements,o=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(t){var e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,s=t.z,a=t.w,u=a*e+o*r-s*n,h=a*n+s*e-i*r,l=a*r+i*n-o*e,c=-i*e-o*n-s*r;return this.x=u*a+c*-i+h*-s-l*-o,this.y=h*a+c*-o+l*-i-u*-s,this.z=l*a+c*-s+u*-o-h*-i,this},project:function(t){return void 0===s&&(s=new h.a),s.multiplyMatrices(t.projectionMatrix,s.getInverse(t.matrixWorld)),this.applyProjection(s)},unproject:function(){var t;return function(e){return void 0===t&&(t=new h.a),t.multiplyMatrices(e.matrixWorld,t.getInverse(e.projectionMatrix)),this.applyProjection(t)}}(),transformDirection:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return void 0===i&&(i=new c,o=new c),i.set(t,t,t),o.set(e,e,e),this.clamp(i,o)},clampLength:function(t,e){var n=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,n))/n)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){if(void 0!==e)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e);var n=this.x,r=this.y,i=this.z;return this.x=r*t.z-i*t.y,this.y=i*t.x-n*t.z,this.z=n*t.y-r*t.x,this},crossVectors:function(t,e){var n=t.x,r=t.y,i=t.z,o=e.x,s=e.y,a=e.z;return this.x=r*a-i*s,this.y=i*o-n*a,this.z=n*s-r*o,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(t){return void 0===r&&(r=new c),r.copy(this).projectOnVector(t),this.sub(r)},reflect:function(){var t;return function(e){return void 0===t&&(t=new c),this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(u.a.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r},distanceToManhattan:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){var e=Math.sin(t.phi)*t.radius;return this.x=e*Math.sin(t.theta),this.y=Math.cos(t.phi)*t.radius,this.z=e*Math.cos(t.theta),this},setFromMatrixPosition:function(t){return this.setFromMatrixColumn(t,3)},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this},setFromMatrixColumn:function(t,e){if("number"==typeof t){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var n=t;t=e,e=n}return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromAttribute:function(t,e,n){return void 0===n&&(n=0),e=e*t.itemSize+n,this.x=t.array[e],this.y=t.array[e+1],this.z=t.array[e+2],this}}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(4),i=function(){function t(){this.log=new r.a("module")}return t.prototype.init=function(t,e){},t.prototype.onUpdate=function(t){},t.prototype.dispose=function(t){},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r,i,o=n(1);function s(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==r?r:1}s.prototype={constructor:s,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get w(){return this._w},set w(t){this._w=t,this.onChangeCallback()},set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(!1===(t&&t.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var n=Math.cos(t._x/2),r=Math.cos(t._y/2),i=Math.cos(t._z/2),o=Math.sin(t._x/2),s=Math.sin(t._y/2),a=Math.sin(t._z/2),u=t.order;return"XYZ"===u?(this._x=o*r*i+n*s*a,this._y=n*s*i-o*r*a,this._z=n*r*a+o*s*i,this._w=n*r*i-o*s*a):"YXZ"===u?(this._x=o*r*i+n*s*a,this._y=n*s*i-o*r*a,this._z=n*r*a-o*s*i,this._w=n*r*i+o*s*a):"ZXY"===u?(this._x=o*r*i-n*s*a,this._y=n*s*i+o*r*a,this._z=n*r*a+o*s*i,this._w=n*r*i-o*s*a):"ZYX"===u?(this._x=o*r*i-n*s*a,this._y=n*s*i+o*r*a,this._z=n*r*a-o*s*i,this._w=n*r*i+o*s*a):"YZX"===u?(this._x=o*r*i+n*s*a,this._y=n*s*i+o*r*a,this._z=n*r*a-o*s*i,this._w=n*r*i-o*s*a):"XZY"===u&&(this._x=o*r*i-n*s*a,this._y=n*s*i-o*r*a,this._z=n*r*a+o*s*i,this._w=n*r*i+o*s*a),!1!==e&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,r=n[0],i=n[4],o=n[8],s=n[1],a=n[5],u=n[9],h=n[2],l=n[6],c=n[10],f=r+a+c;return f>0?(e=.5/Math.sqrt(f+1),this._w=.25/e,this._x=(l-u)*e,this._y=(o-h)*e,this._z=(s-i)*e):r>a&&r>c?(e=2*Math.sqrt(1+r-a-c),this._w=(l-u)/e,this._x=.25*e,this._y=(i+s)/e,this._z=(o+h)/e):a>c?(e=2*Math.sqrt(1+a-r-c),this._w=(o-h)/e,this._x=(i+s)/e,this._y=.25*e,this._z=(u+l)/e):(e=2*Math.sqrt(1+c-r-a),this._w=(s-i)/e,this._x=(o+h)/e,this._y=(u+l)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:function(t,e){return void 0===r&&(r=new o.a),(i=t.dot(e)+1)<1e-6?(i=0,Math.abs(t.x)>Math.abs(t.z)?r.set(-t.y,t.x,0):r.set(0,-t.z,t.y)):r.crossVectors(t,e),this._x=r.x,this._y=r.y,this._z=r.z,this._w=i,this.normalize()},inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,r=t._y,i=t._z,o=t._w,s=e._x,a=e._y,u=e._z,h=e._w;return this._x=n*h+o*s+r*u-i*a,this._y=r*h+o*a+i*s-n*u,this._z=i*h+o*u+n*a-r*s,this._w=o*h-n*s-r*a-i*u,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,r=this._y,i=this._z,o=this._w,s=o*t._w+n*t._x+r*t._y+i*t._z;if(s<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),s>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var a=Math.sqrt(1-s*s);if(Math.abs(a)<.001)return this._w=.5*(o+this._w),this._x=.5*(n+this._x),this._y=.5*(r+this._y),this._z=.5*(i+this._z),this;var u=Math.atan2(a,s),h=Math.sin((1-e)*u)/a,l=Math.sin(e*u)/a;return this._w=o*h+this._w*l,this._x=n*h+this._x*l,this._y=r*h+this._y*l,this._z=i*h+this._z*l,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}},Object.assign(s,{slerp:function(t,e,n,r){return n.copy(t).slerp(e,r)},slerpFlat:function(t,e,n,r,i,o,s){var a=n[r+0],u=n[r+1],h=n[r+2],l=n[r+3],c=i[o+0],f=i[o+1],p=i[o+2],d=i[o+3];if(l!==d||a!==c||u!==f||h!==p){var y=1-s,m=a*c+u*f+h*p+l*d,g=m>=0?1:-1,v=1-m*m;if(v>Number.EPSILON){var b=Math.sqrt(v),w=Math.atan2(b,m*g);y=Math.sin(y*w)/b,s=Math.sin(s*w)/b}var E=s*g;if(a=a*y+c*E,u=u*y+f*E,h=h*y+p*E,l=l*y+d*E,y===1-s){var _=1/Math.sqrt(a*a+u*u+h*h+l*l);a*=_,u*=_,h*=_,l*=_}}t[e]=a,t[e+1]=u,t[e+2]=h,t[e+3]=l}})},function(t,e,n){"use strict";var r,i=window.navigationStart||Date.now();!function(t){t[t.ERROR=0]="ERROR",t[t.WARN=1]="WARN",t[t.INFO=2]="INFO",t[t.DEBUG=3]="DEBUG"}(r||(r={}));var o=function(){function t(t){this.timers={},this.handlers=((e={})[r.DEBUG]=console.log,e[r.INFO]=console.info,e[r.WARN]=console.warn,e[r.ERROR]=console.error,e),this.addPrefix=function(t){var e=(Date.now()-i)/1e3+"s";return[this.prefix,e].concat(Array.prototype.slice.call(t))};var e,n=t.split(new RegExp("/|\\\\"));this.prefix="["+n[n.length-1].replace(".js","")+"]"}return t.prototype.message=function(e,n){t.level>=e&&console&&(this.handlers[e]?this.handlers[e]:console.log).apply(console,this.addPrefix(n))},t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.message(r.DEBUG,t)},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.message(r.INFO,t)},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.message(r.WARN,t)},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.message(r.ERROR,t)},t.prototype.time=function(e){t.level>=r.DEBUG&&(this.timers[e]=Date.now())},t.prototype.timeEnd=function(e){if(t.level>=r.DEBUG){var n=this.timers[e];if(!n)return;var i=(Date.now()-n)/1e3;this.debug(e,i+"s")}},t.level=r.INFO,t}();e.a=o},function(t,e,n){"use strict";var r,i,o,s,a;n.d(e,"a",function(){return r}),r={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:(o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),s=new Array(36),a=0,function(){for(var t=0;t<36;t++)8===t||13===t||18===t||23===t?s[t]="-":14===t?s[t]="4":(a<=2&&(a=33554432+16777216*Math.random()|0),i=15&a,a>>=4,s[t]=o[19===t?3&i|8:i]);return s.join("")}),clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},random16:function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*r.DEG2RAD},radToDeg:function(t){return t*r.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},nearestPowerOfTwo:function(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))},nextPowerOfTwo:function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}}},function(t,e,n){"use strict";var r,i,o=n(47),s=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(t){function e(e,n){var r=t.call(this,e)||this;return r.mode=n,r}return s(e,t),e}(o.a);n.d(e,"a",function(){return i}),n.d(e,"c",function(){return u}),n.d(e,"b",function(){return h}),function(t){t[t.Panorama=1]="Panorama",t[t.Dollhouse=2]="Dollhouse",t[t.Floorplan=3]="Floorplan",t[t.Outdoor=4]="Outdoor",t[t.Transition=-1]="Transition"}(i=i||(i={}));var u=function(t){switch(t){case"0":case 0:return i.Panorama;case"1":case 1:return i.Floorplan;case"2":case 2:return i.Dollhouse;case"3":case 3:return i.Transition}throw new a("No known conversion for Workshop int to viewmode for int: "+t,t)};function h(t){switch(t){case i.Panorama:return 0;case i.Floorplan:return 1;case i.Dollhouse:return 2;case i.Transition:return 3}throw new a("No known conversion for Viewmode to Workshop int",t)}},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r,i,o,s,a,u,h=n(5),l=n(1);function c(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}c.prototype={constructor:c,isMatrix4:!0,set:function(t,e,n,r,i,o,s,a,u,h,l,c,f,p,d,y){var m=this.elements;return m[0]=t,m[4]=e,m[8]=n,m[12]=r,m[1]=i,m[5]=o,m[9]=s,m[13]=a,m[2]=u,m[6]=h,m[10]=l,m[14]=c,m[3]=f,m[7]=p,m[11]=d,m[15]=y,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new c).fromArray(this.elements)},copy:function(t){return this.elements.set(t.elements),this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(t){void 0===u&&(u=new l.a);var e=this.elements,n=t.elements,r=1/u.setFromMatrixColumn(t,0).length(),i=1/u.setFromMatrixColumn(t,1).length(),o=1/u.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,this},makeRotationFromEuler:function(t){!1===(t&&t.isEuler)&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,r=t.y,i=t.z,o=Math.cos(n),s=Math.sin(n),a=Math.cos(r),u=Math.sin(r),h=Math.cos(i),l=Math.sin(i);if("XYZ"===t.order){var c=o*h,f=o*l,p=s*h,d=s*l;e[0]=a*h,e[4]=-a*l,e[8]=u,e[1]=f+p*u,e[5]=c-d*u,e[9]=-s*a,e[2]=d-c*u,e[6]=p+f*u,e[10]=o*a}else if("YXZ"===t.order){var y=a*h,m=a*l,g=u*h,v=u*l;e[0]=y+v*s,e[4]=g*s-m,e[8]=o*u,e[1]=o*l,e[5]=o*h,e[9]=-s,e[2]=m*s-g,e[6]=v+y*s,e[10]=o*a}else if("ZXY"===t.order){y=a*h,m=a*l,g=u*h,v=u*l;e[0]=y-v*s,e[4]=-o*l,e[8]=g+m*s,e[1]=m+g*s,e[5]=o*h,e[9]=v-y*s,e[2]=-o*u,e[6]=s,e[10]=o*a}else if("ZYX"===t.order){c=o*h,f=o*l,p=s*h,d=s*l;e[0]=a*h,e[4]=p*u-f,e[8]=c*u+d,e[1]=a*l,e[5]=d*u+c,e[9]=f*u-p,e[2]=-u,e[6]=s*a,e[10]=o*a}else if("YZX"===t.order){var b=o*a,w=o*u,E=s*a,_=s*u;e[0]=a*h,e[4]=_-b*l,e[8]=E*l+w,e[1]=l,e[5]=o*h,e[9]=-s*h,e[2]=-u*h,e[6]=w*l+E,e[10]=b-_*l}else if("XZY"===t.order){b=o*a,w=o*u,E=s*a,_=s*u;e[0]=a*h,e[4]=-l,e[8]=u*h,e[1]=b*l+_,e[5]=o*h,e[9]=w*l-E,e[2]=E*l-w,e[6]=s*h,e[10]=_*l+b}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){var e=this.elements,n=t.x,r=t.y,i=t.z,o=t.w,s=n+n,a=r+r,u=i+i,h=n*s,l=n*a,c=n*u,f=r*a,p=r*u,d=i*u,y=o*s,m=o*a,g=o*u;return e[0]=1-(f+d),e[4]=l-g,e[8]=c+m,e[1]=l+g,e[5]=1-(h+d),e[9]=p-y,e[2]=c-m,e[6]=p+y,e[10]=1-(h+f),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},lookAt:function(t,e,n){void 0===o&&(o=new l.a,s=new l.a,a=new l.a);var r=this.elements;return a.subVectors(t,e).normalize(),0===a.lengthSq()&&(a.z=1),o.crossVectors(n,a).normalize(),0===o.lengthSq()&&(a.z+=1e-4,o.crossVectors(n,a).normalize()),s.crossVectors(a,o),r[0]=o.x,r[4]=s.x,r[8]=a.x,r[1]=o.y,r[5]=s.y,r[9]=a.y,r[2]=o.z,r[6]=s.z,r[10]=a.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,o=n[0],s=n[4],a=n[8],u=n[12],h=n[1],l=n[5],c=n[9],f=n[13],p=n[2],d=n[6],y=n[10],m=n[14],g=n[3],v=n[7],b=n[11],w=n[15],E=r[0],_=r[4],x=r[8],O=r[12],S=r[1],T=r[5],P=r[9],I=r[13],R=r[2],L=r[6],A=r[10],M=r[14],k=r[3],N=r[7],C=r[11],D=r[15];return i[0]=o*E+s*S+a*R+u*k,i[4]=o*_+s*T+a*L+u*N,i[8]=o*x+s*P+a*A+u*C,i[12]=o*O+s*I+a*M+u*D,i[1]=h*E+l*S+c*R+f*k,i[5]=h*_+l*T+c*L+f*N,i[9]=h*x+l*P+c*A+f*C,i[13]=h*O+l*I+c*M+f*D,i[2]=p*E+d*S+y*R+m*k,i[6]=p*_+d*T+y*L+m*N,i[10]=p*x+d*P+y*A+m*C,i[14]=p*O+d*I+y*M+m*D,i[3]=g*E+v*S+b*R+w*k,i[7]=g*_+v*T+b*L+w*N,i[11]=g*x+v*P+b*A+w*C,i[15]=g*O+v*I+b*M+w*D,this},multiplyToArray:function(t,e,n){var r=this.elements;return this.multiplyMatrices(t,e),n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToVector3Array:function(){var t;return function(e,n,r){void 0===t&&(t=new l.a),void 0===n&&(n=0),void 0===r&&(r=e.length);for(var i=0,o=n;i<r;i+=3,o+=3)t.fromArray(e,o),t.applyMatrix4(this),t.toArray(e,o);return e}}(),applyToBuffer:function(){var t;return function(e,n,r){void 0===t&&(t=new l.a),void 0===n&&(n=0),void 0===r&&(r=e.length/e.itemSize);for(var i=0,o=n;i<r;i++,o++)t.x=e.getX(o),t.y=e.getY(o),t.z=e.getZ(o),t.applyMatrix4(this),e.setXYZ(t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],o=t[1],s=t[5],a=t[9],u=t[13],h=t[2],l=t[6],c=t[10],f=t[14];return t[3]*(+i*a*l-r*u*l-i*s*c+n*u*c+r*s*f-n*a*f)+t[7]*(+e*a*f-e*u*c+i*o*c-r*o*f+r*u*h-i*a*h)+t[11]*(+e*u*l-e*s*f-i*o*l+n*o*f+i*s*h-n*u*h)+t[15]*(-r*s*h-e*a*l+e*s*c+r*o*l-n*o*c+n*a*h)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset is deprecated - just use .toArray instead."),this.toArray(t,e)},getPosition:function(){var t;return function(){return void 0===t&&(t=new l.a),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),t.setFromMatrixColumn(this,3)}}(),setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var n=this.elements,r=t.elements,i=r[0],o=r[1],s=r[2],a=r[3],u=r[4],h=r[5],l=r[6],c=r[7],f=r[8],p=r[9],d=r[10],y=r[11],m=r[12],g=r[13],v=r[14],b=r[15],w=p*v*c-g*d*c+g*l*y-h*v*y-p*l*b+h*d*b,E=m*d*c-f*v*c-m*l*y+u*v*y+f*l*b-u*d*b,_=f*g*c-m*p*c+m*h*y-u*g*y-f*h*b+u*p*b,x=m*p*l-f*g*l-m*h*d+u*g*d+f*h*v-u*p*v,O=i*w+o*E+s*_+a*x;if(0===O){var S="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(!0===e)throw new Error(S);return console.warn(S),this.identity()}var T=1/O;return n[0]=w*T,n[1]=(g*d*a-p*v*a-g*s*y+o*v*y+p*s*b-o*d*b)*T,n[2]=(h*v*a-g*l*a+g*s*c-o*v*c-h*s*b+o*l*b)*T,n[3]=(p*l*a-h*d*a-p*s*c+o*d*c+h*s*y-o*l*y)*T,n[4]=E*T,n[5]=(f*v*a-m*d*a+m*s*y-i*v*y-f*s*b+i*d*b)*T,n[6]=(m*l*a-u*v*a-m*s*c+i*v*c+u*s*b-i*l*b)*T,n[7]=(u*d*a-f*l*a+f*s*c-i*d*c-u*s*y+i*l*y)*T,n[8]=_*T,n[9]=(m*p*a-f*g*a-m*o*y+i*g*y+f*o*b-i*p*b)*T,n[10]=(u*g*a-m*h*a+m*o*c-i*g*c-u*o*b+i*h*b)*T,n[11]=(f*h*a-u*p*a-f*o*c+i*p*c+u*o*y-i*h*y)*T,n[12]=x*T,n[13]=(f*g*s-m*p*s+m*o*d-i*g*d-f*o*v+i*p*v)*T,n[14]=(m*h*s-u*g*s-m*o*l+i*g*l+u*o*v-i*h*v)*T,n[15]=(u*p*s-f*h*s+f*o*l-i*p*l-u*o*d+i*h*d)*T,this},scale:function(t){var e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=1-n,o=t.x,s=t.y,a=t.z,u=i*o,h=i*s;return this.set(u*o+n,u*s-r*a,u*a+r*s,0,u*s+r*a,h*s+n,h*a-r*o,0,u*a-r*s,h*a+r*o,i*a*a+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},compose:function(t,e,n){return this.makeRotationFromQuaternion(e),this.scale(n),this.setPosition(t),this},decompose:function(t,e,n){void 0===r&&(r=new l.a,i=new c);var o=this.elements,s=r.set(o[0],o[1],o[2]).length(),a=r.set(o[4],o[5],o[6]).length(),u=r.set(o[8],o[9],o[10]).length();this.determinant()<0&&(s=-s),t.x=o[12],t.y=o[13],t.z=o[14],i.elements.set(this.elements);var h=1/s,f=1/a,p=1/u;return i.elements[0]*=h,i.elements[1]*=h,i.elements[2]*=h,i.elements[4]*=f,i.elements[5]*=f,i.elements[6]*=f,i.elements[8]*=p,i.elements[9]*=p,i.elements[10]*=p,e.setFromRotationMatrix(i),n.x=s,n.y=a,n.z=u,this},makeFrustum:function(t,e,n,r,i,o){var s=this.elements,a=2*i/(e-t),u=2*i/(r-n),h=(e+t)/(e-t),l=(r+n)/(r-n),c=-(o+i)/(o-i),f=-2*o*i/(o-i);return s[0]=a,s[4]=0,s[8]=h,s[12]=0,s[1]=0,s[5]=u,s[9]=l,s[13]=0,s[2]=0,s[6]=0,s[10]=c,s[14]=f,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this},makePerspective:function(t,e,n,r){var i=n*Math.tan(h.a.DEG2RAD*t*.5),o=-i,s=o*e,a=i*e;return this.makeFrustum(s,a,o,i,n,r)},makeOrthographic:function(t,e,n,r,i,o){var s=this.elements,a=1/(e-t),u=1/(n-r),h=1/(o-i),l=(e+t)*a,c=(n+r)*u,f=(o+i)*h;return s[0]=2*a,s[4]=0,s[8]=0,s[12]=-l,s[1]=0,s[5]=2*u,s[9]=0,s[13]=-c,s[2]=0,s[6]=0,s[10]=-2*h,s[14]=-f,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o}),n.d(e,"c",function(){return u});var r,i,o,s=n(11),a=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});!function(t){t[t.UNINITIALIZED=0]="UNINITIALIZED",t[t.WAITING=1]="WAITING",t[t.LOADING=2]="LOADING",t[t.STARTING=3]="STARTING",t[t.PLAYING=4]="PLAYING",t[t.ERROR=5]="ERROR"}(i=i||(i={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBVR=1]="WEBVR",t[t.SHOWCASE=2]="SHOWCASE",t[t.WORKSHOP=3]="WORKSHOP"}(o=o||(o={}));var u=function(t){function e(e,n){void 0===n&&(n=o.SHOWCASE);var r=t.call(this)||this;return r.phase=e,r.application=n,r}return a(e,t),e.prototype.update=function(t){this.phase=t.phase,this.application=t.application,this.error=t.error},e}(s.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return c}),n.d(e,"b",function(){return f}),n.d(e,"g",function(){return p}),n.d(e,"f",function(){return d}),n.d(e,"j",function(){return y}),n.d(e,"i",function(){return m}),n.d(e,"h",function(){return g}),n.d(e,"e",function(){return v}),n.d(e,"l",function(){return b}),n.d(e,"d",function(){return w}),n.d(e,"c",function(){return E}),n.d(e,"k",function(){return _});var r=n(1),i=n(3),o=n(17),s=n(7),a=n(97),u=n(5),h=(new r.a,new i.a,new a.a),l=new s.a,c=Math.PI/180,f=180/Math.PI,p=function(t){return new r.a(t.x,t.z,-t.y)},d=function(t){return new i.a(t.x,t.z,-t.y,t.w).multiply((new i.a).setFromAxisAngle(new r.a(0,1,0),u.a.degToRad(90)))},y=function(t){return new r.a(-t.x,t.y,t.z)},m=function(t){return new i.a(-t.z,-t.w,-t.x,-t.y)},g=function(t){return new i.a(t.x,-t.y,-t.z,t.w).normalize().multiply((new i.a).setFromAxisAngle(new r.a(0,1,0),u.a.degToRad(270)))},v=function(t,e,n,r){return(r=r||new o.a).x=t/n.width*2-1,r.y=-e/n.height*2+1,r},b=function(t){return Math.cos(u.a.degToRad(t/2))},w=function(t,e,n){return Math.max(e,Math.min(t,n))},E=function(t,e){var n=new r.a(0,0,-1);return n.clone().applyQuaternion(t).angleTo(n.clone().applyQuaternion(e))},_=function(t,e,n,r){return l.identity().makeRotationFromQuaternion(e).setPosition(t),l.getInverse(l),l.premultiply(n),h.setFromMatrix(l),h.intersectsBox(r)}},function(t,e,n){"use strict";var r;n.d(e,"a",function(){return r}),function(t){t[t.Begin=0]="Begin",t[t.Logic=1]="Logic",t[t.Render=2]="Render",t[t.End=3]="End"}(r=r||(r={}))},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){return function(){}}()},function(t,e,n){"use strict";var r=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},i=function(){function t(){var t=this;this.base=new Promise(function(e,n){t.resolver=e,t.rejecter=n}),this._promise=new o(this.base,this),this.progressCallbacks=[]}return t.prototype.then=function(t,e){return this.base.then(t,e)},t.prototype.catch=function(t){return this.base.catch(t)},t.prototype.resolve=function(t){return this.resolver(t),this},t.prototype.reject=function(t){return this.rejecter(t),this},t.prototype.notify=function(t){try{for(var e=r(this.progressCallbacks),n=e.next();!n.done;n=e.next()){(0,n.value)(t)}}catch(t){i={error:t}}finally{try{n&&!n.done&&(o=e.return)&&o.call(e)}finally{if(i)throw i.error}}var i,o},t.prototype.progress=function(t){this.progressCallbacks.push(t)},t.prototype.promise=function(){return this._promise},t.prototype.nativePromise=function(){return this.base},t.resolve=function(){var e=new t;return e.resolve(),e.promise()},t.reject=function(e){var n=new t;return n.reject(e),n.promise()},t.all=function(e){var n=[];try{for(var i=r(e),o=i.next();!o.done;o=i.next()){var s=o.value;s.nativePromise?n.push(s.nativePromise()):n.push(s)}}catch(t){a={error:t}}finally{try{o&&!o.done&&(u=i.return)&&u.call(i)}finally{if(a)throw a.error}}var a,u,h=new t;return Promise.all(n).then(function(t){return h.resolve(t)},function(t){return h.reject(t)}),h.promise()},t}();e.a=i;var o=function(){function t(t,e){this.basePromise=t,this.baseDeferred=e}return t.prototype.then=function(t,e){return this.baseDeferred.then(t,e),this},t.prototype.catch=function(t){return this.baseDeferred.catch(t),this},t.prototype.progress=function(t){return this.baseDeferred.progress(t),this},t.prototype.nativePromise=function(){return this.basePromise},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},i=function(){function t(){this.isObservable=!0,this.diffRoot={},this.changeObservers=[],this.childChangeFunctions={}}return t.prototype.onChanged=function(t){this.changeObservers.push(t)},t.prototype.removeOnChanged=function(e){t.removeOnChangedFromObservable(this,e)},t.removeOnChangedFromObservable=function(t,e){for(var n=0;n<t.changeObservers.length;n++){t.changeObservers[n]===e&&(n<t.changeObservers.length-1&&(t.changeObservers[n]=t.changeObservers[t.changeObservers.length-1]),t.changeObservers.length--)}},t.changedFunc=function(t,e,n){if(t.changeObservers)try{for(var i=r(t.changeObservers),o=i.next();!o.done;o=i.next()){(0,o.value)(e,n,t.diffRoot)}}catch(t){s={error:t}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(s)throw s.error}}var s,a},t.isObservable=function(t){return t&&t.isObservable?t:void 0},t.buildEmptyObjectWithProp=function(t,e,n){var r;if(n)for(var i in r=n,n)i!==t&&delete n[i];else r={};return r[t]=e,r},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r,i,o,s=n(1),a=n(3);!function(t){t.position="position",t.floorPosition="floorPosition",t.rotation="rotation",t.enabled="enabled",t.vrenabled="vrenabled",t.alignmentType="alignmentType",t.placementType="placementType"}(r||(r={})),function(t){t.ALIGNED="aligned",t.UNALIGNED="unaligned"}(i=i||(i={})),function(t){t.UNPLACED="unplaced",t.AUTO="auto",t.MANUAL="manual"}(o=o||(o={}));var u=function(){return function(t,e,n){this.id=t,this.index=e,this.name=n.name||"",this.position=n.position||new s.a,this.floorPosition=n.floorPosition||new s.a;var r=Number.parseInt(n.floor,10);this.floor=isNaN(r)?-1:r;var u=Number.parseInt(n.room,10);this.room=isNaN(u)?-1:u,this.rotation=n.rotation||new a.a,this.enabled=n.enabled||!1,this.vrenabled=n.vrenabled||!1,this.neighbours=n.neighbours||[],this.alignmentType=n.alignmentType||i.ALIGNED,this.placementType=n.placement||o.UNPLACED,this.pavilionMapId=n.pavilionMapId,this.isInside=n.isInside,this.obj=n.obj}}();e.c=u},function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return u});var r,i,o=n(50),s=n(0),a=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});!function(t){t.INSIDE="mode.inside",t.OUTSIDE="mode.outside",t.DOLLHOUSE="mode.dollhouse",t.FLOORPLAN="mode.floorplan",t.TRANSITIONING="mode.transitioning"}(i=i||(i={}));var u=function(t){function e(e,n,r){void 0===n&&(n=s.Ja.Interpolate),void 0===r&&(r={});var i=t.call(this)||this;return i.payload={mode:e,transitionType:n,pose:r},i}return a(e,t),e.id="CHANGE_VIEWMODE",e}(o.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return c}),n.d(e,"c",function(){return f});var r,i,o=n(61),s=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},u=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})},h=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},l=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};!function(t){t.POST="POST",t.PATCH="PATCH",t.PUT="PUT"}(i=i||(i={}));var c=function(t){function e(e,n,r,i){void 0===i&&(i=null);var o=t.call(this)||this;return o.queue=e,o.path=n,o.deserialize=r,o.cachedData=i,o}return s(e,t),e.prototype.read=function(){return u(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return t=null,this.cachedData&&this.cachedData.data?(t=this.cachedData.data,[3,3]):[3,1];case 1:return[4,this.queue.get(this.path,this.options)];case 2:t=e.sent(),this.cachedData&&(this.cachedData.data=t),e.label=3;case 3:return[2,this.deserialize(t)]}})})},e.prototype.clearCache=function(){this.cachedData&&(this.cachedData.data=null)},e}(function(){return function(){this.options={responseType:"json"};var t=Object(o.a)();t&&(this.options=a({},this.options,{auth:t}))}}()),f=function(t){function e(e,n,r,o,s,a,u){void 0===o&&(o=null),void 0===s&&(s=null),void 0===a&&(a=i.POST),void 0===u&&(u=null);var h=t.call(this,e,n,r,s)||this;return h.queue=e,h.path=n,h.deserialize=r,h.serialize=o,h.cachedData=s,h.httpMethod=a,h.requiredDataKey=u,h}return s(e,t),e.prototype.create=function(t){return u(this,void 0,void 0,function(){var e,n;return h(this,function(r){switch(r.label){case 0:return this.clearCache(),e=this.serialize?this.serialize(t):t,n=a({},this.options,{body:e}),[4,this.queue.put(this.path,n)];case 1:return[2,r.sent()]}})})},e.prototype.update=function(t){return u(this,void 0,void 0,function(){var e,n;return h(this,function(r){switch(r.label){case 0:return this.clearCache(),e=this.serialize?this.serialize(t):t,n=a({},this.options,{body:e}),[4,this.queue.request(this.httpMethod,this.path,n)];case 1:return[2,r.sent()]}})})},e.prototype.delete=function(t){return u(this,void 0,void 0,function(){var e,n,r,i,o,s;return h(this,function(a){switch(a.label){case 0:if(this.clearCache(),!(t instanceof Array))return[3,9];a.label=1;case 1:a.trys.push([1,6,7,8]),e=l(t),n=e.next(),a.label=2;case 2:return n.done?[3,5]:(r=n.value,[4,this.queue.delete(this.path+"/"+r.sid,this.options)]);case 3:a.sent(),a.label=4;case 4:return n=e.next(),[3,2];case 5:return[3,8];case 6:return i=a.sent(),o={error:i},[3,8];case 7:try{n&&!n.done&&(s=e.return)&&s.call(e)}finally{if(o)throw o.error}return[7];case 8:return[2];case 9:return[4,this.queue.delete(this.path,this.options)];case 10:return[2,a.sent()];case 11:return[2]}})})},Object.defineProperty(e.prototype,"acceptsPartial",{get:function(){return this.httpMethod===i.PATCH},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"requiredKey",{get:function(){return this.requiredDataKey},enumerable:!0,configurable:!0}),e}(c)},function(t,e,n){"use strict";function r(t,e){this.x=t||0,this.y=e||0}var i,o;n.d(e,"a",function(){return r}),r.prototype={constructor:r,isVector2:!0,get width(){return this.x},set width(t){this.x=t},get height(){return this.y},set height(t){this.y=t},set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(t,e){return void 0===i&&(i=new r,o=new r),i.set(t,t),o.set(e,e),this.clamp(i,o)},clampLength:function(t,e){var n=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,n))/n)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},distanceToManhattan:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromAttribute:function(t,e,n){return void 0===n&&(n=0),e=e*t.itemSize+n,this.x=t.array[e],this.y=t.array[e+1],this},rotateAround:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,o=this.y-t.y;return this.x=i*n-o*r+t.x,this.y=i*r+o*n+t.y,this}}},function(t,e,n){"use strict";n.d(e,"n",function(){return o}),n.d(e,"j",function(){return s}),n.d(e,"h",function(){return u}),n.d(e,"f",function(){return h}),n.d(e,"e",function(){return l}),n.d(e,"a",function(){return c}),n.d(e,"d",function(){return f}),n.d(e,"m",function(){return p}),n.d(e,"k",function(){return d}),n.d(e,"b",function(){return y}),n.d(e,"i",function(){return m}),n.d(e,"g",function(){return g}),n.d(e,"l",function(){return v}),n.d(e,"c",function(){return w});var r,i,o=function(){var t=window.innerWidth/window.innerHeight;return isFinite(t)?t:1},s=function(){var t=navigator.userAgent||navigator.vendor||window.opera,e=new RegExp("(android|bbd+|meego).+mobile|android|avantgo|bada/|blackberry|blazer|compal|elaine|fennec|\n    hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|\n    palm( os)?|phone|p(ixi|re)/|plucker|pocket|psp|series(4|6)0|symbian|treo|up.(browser|link)|vodafone|\n    wap|windows ce|xda|xiino","i"),n=new RegExp("1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|\n    amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|\n    br(e|v)w|bumb|bw-(n|u)|c55/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|\n    devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|\n    g560|gene|gf-5|g-mo|go(.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|\n    a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|\n    jemu|jigs|kddi|keji|kgt( |/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|/(k|l|u)|50|54|-[a-w])|libw|lynx|\n    m1-w|m3ga|m50/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|\n    zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|\n    nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|\n    po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55/|\n    sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|\n    sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|\n    tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|\n    vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|\n    zeto|zte-","i");return e.test(t)||n.test(t.substr(0,4))},a=function(t,e){var n=window.navigator.userAgent.match(t);return n=n?n[1].split(e):[],{major:parseInt(n[0],10)||0,minor:parseInt(n[1],10)||0,patch:parseInt(n[2],10)||0}},u=function(){var t=window.navigator.userAgent;return/iPod|iPhone|iPad/.test(t)},h=function(){return-1!==window.navigator.userAgent.indexOf("Android")},l=function(){if(!u())throw new Error("Not an iOS device");return a(/((?:\d+\_?){1,3}) like Mac OS/,"_")},c=function(){if(!h())throw new Error("Not an Android device");return a(/Android ((?:\d+\.?){1,3})/,".")},f=function(){return window.parent!==window},p=function(t,e){var n=new RegExp("[#&?]"+t+"=([^#&?]*)").exec(window.location.href);if(!n)return e;var r=n[1];return"boolean"==typeof e?"true"===r||"1"===r:"number"==typeof e?parseFloat(r):window.decodeURIComponent(r)},d=function(){for(var t,e=/[#&?]([^=]+)=([^#&?]+)/g,n=window.location.href,r={};null!==(t=e.exec(n));)r[t[1]]=t[2];return r},y=function(){return window.location.search.substr(1).split("&")},m=(r=window.URL||window.webkitURL,i=document.createElement("a"),document.body.appendChild(i),i.style.display="none",function(){return o()>1}),g=function(){var t=document;return t.fullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement||t.msFullscreenElement},v=function(t,e){t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen(),e&&(t.addEventListener("fullscreenchange",b),t.addEventListener("webkitfullscreenchange",b),t.addEventListener("mozfullscreenchange",b),t.addEventListener("MSFullscreenChange",b))},b=function(){var t,e=document;if(document.fullscreenElement)t=document.fullscreenElement;else if(e.mozFullscreenElement)t=e.mozFullscreenElement();else if(e.mozFullScreenElement)t=e.mozFullScreenElement();else{if(!e.webkitFullscreenElement)return;t=e.webkitFullscreenElement()}t.requestPointerLock=t.requestPointerLock||t.mozRequestPointerLock||t.webkitRequestPointerLock,t.requestPointerLock(),t.removeEventListener("fullscreenchange",this),t.removeEventListener("webkitfullscreenchange",this),t.removeEventListener("mozfullscreenchange",this),t.removeEventListener("MSFullscreenChange",this)},w=function(){var t=document;document.exitFullscreen?document.exitFullscreen():t.msExitFullscreen?t.msExitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function t(){this.msgId=-1}return t.prototype.setID=function(t){if(-1!==this.msgId)throw Error("Message.msgId can only be set once.");this.msgId=t},t}()},function(t,e,n){"use strict";n.r(e);var r,i=n(2),o=n(8),s=n(28),a=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="app-phase",e.appState=new o.c(o.a.UNINITIALIZED),e}return a(e,t),e.prototype.init=function(t,e){this.market=e.market,this.broadcast=e.broadcast.bind(e),this.market.register(this,o.c),this.market.update(this,this.appState)},e.prototype.updateAppPhase=function(t,e){this.appState.phase=t,this.appState.error=e,this.market.update(this,this.appState),this.broadcast(new s.a(t))},e.prototype.updateActiveApp=function(t){this.appState.application=t,this.market.update(this,this.appState),this.broadcast(new s.b(t))},e.prototype.getData=function(){return this.appState},e}(i.a);e.default=u},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){if("string"==typeof t){var e=Date.parse(t);if(!isNaN(e))return new Date(e)}return new Date(0)}},function(t,e,n){"use strict";n.d(e,"c",function(){return m}),n.d(e,"b",function(){return g}),n.d(e,"a",function(){return v});var r,i,o=n(19),s=n(35),a=n(34),u=n(4),h=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})},c=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},f=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},p=new u.a("datasync"),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e}(o.a);!function(t){t[t.IDLE=0]="IDLE",t[t.LOADING=1]="LOADING",t[t.CLEAN=2]="CLEAN",t[t.DIRTY=3]="DIRTY"}(i||(i={}));var y=function(){function t(t,e,n,r){void 0===r&&(r=!1),this.state=i.IDLE,this.config=t,this.collectionData=e,r||n.subscribe(d,this.publish.bind(this))}return t.prototype.load=function(){return l(this,void 0,void 0,function(){var t,e,n,r,o,s,a,u,h;return c(this,function(l){switch(l.label){case 0:if(this.state!==i.IDLE)throw Error("Data already loaded");return this.state=i.LOADING,t=[this.config.publishStore.read()],this.config.editStore&&t.push(this.config.editStore.read()),this.config.legacyEditStore&&t.push(this.config.legacyEditStore.read()),[4,Promise.all(t)];case 1:if(e=l.sent(),this.data={},n=function(t,e){return t&&t.modified&&e.modified&&t.modified>e.modified?t:e},r=function(t,e,n,r){if(!t)return e;if(n&&r&&r<n)return t;for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},this.data=e[0],this.collectionData){for(a=1;a<e.length;a++)if((o=e[a])&&0!==Object.keys(o).length){for(s in o)o.hasOwnProperty(s)&&this.data[s]&&(this.config.partialData?o[s]=r(this.data[s],o[s]):o[s]=n(this.data[s],o[s]));this.state=i.DIRTY,this.data=o}}else for(a=1;a<e.length;a++)(u=e[a])&&(h=u,this.config.partialData?this.data=r(this.data,h,this.data.modified,h.modified):this.data=n(this.data,h),this.state=i.DIRTY);return this.state!==i.DIRTY&&(this.state=i.CLEAN),[2,this.data]}})})},Object.defineProperty(t.prototype,"monitorNeeded",{get:function(){return void 0!==this.config.editStore||void 0!==this.config.legacyEditStore},enumerable:!0,configurable:!0}),t.prototype.addMonitor=function(t){var e=this;if(!this.monitorNeeded)throw Error("Adding a monitor unnecessarily!");this._monitor=t,this.diff={};this._monitor.onChanged(function(){return l(e,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return this.state=i.DIRTY,this.onDataChanged(),[4,this.saveSession()];case 1:return t.sent(),[2]}})})})},Object.defineProperty(t.prototype,"monitor",{get:function(){return this._monitor},enumerable:!0,configurable:!0}),t.prototype.saveSession=function(){return l(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return p.info("Saving session..."),this.config.editStore?[4,this.config.editStore.update(this.generateStorePayload(this.config.editStore))]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.config.legacyEditStore?[4,this.config.legacyEditStore.update(this.generateStorePayload(this.config.legacyEditStore))]:[3,4];case 3:t.sent(),t.label=4;case 4:return[2]}})})},t.prototype.publish=function(){return l(this,void 0,void 0,function(){var t,e;return c(this,function(n){switch(n.label){case 0:if(this.state!==i.DIRTY)return[2];if("function"!=typeof(t=this.config.publishStore).update)return[3,9];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,t.update(this.generateStorePayload(t))];case 2:return n.sent(),[3,4];case 3:throw e=n.sent(),Error("Failed to publish data: "+e);case 4:return this.config.editStore?[4,this.config.editStore.delete()]:[3,6];case 5:n.sent(),n.label=6;case 6:return this.config.legacyEditStore?[4,this.config.legacyEditStore.delete()]:[3,8];case 7:n.sent(),n.label=8;case 8:return this.state=i.CLEAN,[3,10];case 9:throw Error("Trying to publish with readonly store");case 10:return[2]}})})},t.prototype.generateStorePayload=function(t){if(!t.acceptsPartial)return this.data;if(!t.requiredKey)return this.diff;var e={};for(var n in this.diff){var r=this.diff[n]||{};r[t.requiredKey]=this.data[n][t.requiredKey],e[n]=r}return e},t}(),m=function(t){function e(e,n,r){return void 0===r&&(r=!1),t.call(this,e,!1,n,r)||this}return h(e,t),e.prototype.onDataChanged=function(){throw Error("Not implemented.")},e}(y),g=function(t){function e(e,n,r){return void 0===r&&(r=!1),t.call(this,e,!0,n,r)||this}return h(e,t),e.prototype.onDataChanged=function(){var t,e,n=this.monitor.getDiffRecord();try{for(var r=f(n),i=r.next();!i.done;i=r.next()){var o=i.value;switch(o.action){case a.a.added:this.diff[o.index]=o.diff;break;case a.a.updated:this.diff[o.index]||(this.diff[o.index]={}),Object(s.b)(this.diff[o.index],o.diff);break;case a.a.removed:delete this.diff[o.index]}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}this.monitor.clearDiffRecord()},e}(y),v=function(t){function e(e,n,r){return void 0===r&&(r=!1),t.call(this,e,!0,n,r)||this}return h(e,t),e.prototype.load=function(){return l(this,void 0,void 0,function(){var e;return c(this,function(n){switch(n.label){case 0:return[4,t.prototype.load.call(this)];case 1:return e=n.sent(),0===Object.keys(e).length?[2,[]]:[2,e]}})})},e.prototype.addMonitor=function(t){throw Error("ArraySync is deprecated. Convert to CollectionSync to add save support")},e.prototype.onDataChanged=function(){},e}(y)},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r,i=n(5);function o(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}o.prototype={constructor:o,isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){this.r=t,this.g=t,this.b=t},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(){function t(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}return function(e,n,r){if(e=i.a.euclideanModulo(e,1),n=i.a.clamp(n,0,1),r=i.a.clamp(r,0,1),0===n)this.r=this.g=this.b=r;else{var o=r<=.5?r*(1+n):r+n-r*n,s=2*r-o;this.r=t(s,o,e+1/3),this.g=t(s,o,e),this.b=t(s,o,e-1/3)}return this}}(),setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var i,o=n[1],s=n[2];switch(o){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,e(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,e(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s)){var a=parseFloat(i[1])/360,u=parseInt(i[2],10)/100,h=parseInt(i[3],10)/100;return e(i[5]),this.setHSL(a,u,h)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(t)){var l,c=(l=n[1]).length;if(3===c)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}t&&t.length>0&&(void 0!==(l=r[t])?this.setHex(l):console.warn("THREE.Color: Unknown color "+t));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this},convertGammaToLinear:function(){var t=this.r,e=this.g,n=this.b;return this.r=t*t,this.g=e*e,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){var e,n,r=t||{h:0,s:0,l:0},i=this.r,o=this.g,s=this.b,a=Math.max(i,o,s),u=Math.min(i,o,s),h=(u+a)/2;if(u===a)e=0,n=0;else{var l=a-u;switch(n=h<=.5?l/(a+u):l/(2-a-u),a){case i:e=(o-s)/l+(o<s?6:0);break;case o:e=(s-i)/l+2;break;case s:e=(i-o)/l+4}e/=6}return r.h=e,r.s=n,r.l=h,r},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,n){var r=this.getHSL();return r.h+=t,r.s+=e,r.l+=n,this.setHSL(r.h,r.s,r.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}},r={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074}},function(t,e,n){"use strict";var r,i;n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i}),function(t){t[t.Desktop=0]="Desktop",t[t.Mobile=1]="Mobile",t[t.VrOrientOnly=2]="VrOrientOnly",t[t.VrWithController=3]="VrWithController",t[t.VrWithTrackedController=4]="VrWithTrackedController"}(r=r||(r={})),function(t){t.None="interaction.none",t.Direct="interaction.direct",t.Key="interaction.key",t.Gui="interaction.gui"}(i=i||(i={}))},,,function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r,i,o=n(45),s=n(1);function a(t,e){this.normal=void 0!==t?t:new s.a(1,0,0),this.constant=void 0!==e?e:0}a.prototype={constructor:a,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:(r=new s.a,i=new s.a,function(t,e,n){var o=r.subVectors(n,e).cross(i.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(o,t),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return this.orthoPoint(t,e).sub(t).negate()},orthoPoint:function(t,e){var n=this.distanceToPoint(t);return(e||new s.a).copy(this.normal).multiplyScalar(n)},intersectLine:function(){var t=new s.a;return function(e,n){var r=n||new s.a,i=e.delta(t),o=this.normal.dot(i);if(0===o)return 0===this.distanceToPoint(e.start)?r.copy(e.start):void 0;var a=-(e.start.dot(this.normal)+this.constant)/o;return a<0||a>1?void 0:r.copy(i).multiplyScalar(a).add(e.start)}}(),intersectsLine:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return(t||new s.a).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new s.a,e=new o.a;return function(n,r){var i=this.coplanarPoint(t).applyMatrix4(n),o=r||e.getNormalMatrix(n),s=this.normal.applyMatrix3(o).normalize();return this.constant=-i.dot(s),this}}(),translate:function(t){return this.constant=this.constant-t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}},function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a});var r,i=n(19),o=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(t){function e(e){var n=t.call(this)||this;return n.phase=e,n}return o(e,t),e}(i.a),a=function(t){function e(e){var n=t.call(this)||this;return n.application=e,n}return o(e,t),e}(i.a)},function(t,e,n){"use strict";function r(t){return{x:t.x,y:t.y,z:t.z}}function i(t){return{x:t.x,y:t.y,z:t.z,w:t.w}}function o(t){return"#"+t.getHexString()}n.d(e,"c",function(){return r}),n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o})},function(t,e,n){"use strict";n.r(e);var r,i=n(4),o=n(23),s=n(1),a=n(3),u=n(46),h=n(12),l=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})},c=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},f=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},p=function(){function t(t){var e=this;this.onChange=t,this.settings={},this.helperObject={colors:{},vectors:{},quaternions:{}},this.initPromise=new h.a,this.uninitError="ControlKit not yet initialized",this.lastKeys=[],this.lastKeysBufferLength=0,this.controlKit=void 0,this.updateRequired=!1,this.panels=[],this.onToggleCallbacks={},this.onKeyDown=function(t){e.lastKeys.unshift(t.keyCode),e.lastKeys.length>e.lastKeysBufferLength&&e.lastKeys.pop();for(var n=0;n<e.panels.length;n++){var r=e.panels[n].activationSequence;Object(u.d)(e.lastKeys,r)&&e.toggle(n)}},this.getSubGroup=function(t,e){var n=this.panels[t];if(!n.allowSubGroups)return n.guiPanel;var r=n.subGroups[e];return r||(r=n.guiPanel.addSubGroup({label:e,enable:!1}),n.subGroups[e]=r),r},this.addColor=function(t,n,r,i){e.updateHelperObject(r,i),t.addColor(e.helperObject.colors,n+r,{label:r,colorMode:"hex",onChange:function(t){e.settings[n+r].setHex(parseInt(t.substring(1),16));var i={};i[r]=e.settings[n+r],e.onChange(i)}})},this.addVector3=function(t,n,r,i){e.updateHelperObject(r,i);var o=t.addSubGroup({label:r}),a=["x","y","z"];for(var u in a)o.addNumberInput(e.helperObject.vectors[n+r],a[u],{label:a[u],onChange:function(){e.settings[n+r]=new s.a(e.helperObject.vectors[r].x,e.helperObject.vectors[r].y,e.helperObject.vectors[r].z);var t={};t[r]=e.settings[n+r],e.onChange(t)}})},this.addQuaternion=function(t,n,r,i){e.updateHelperObject(r,i);var o=t.addSubGroup({label:r}),s=["x","y","z","w"];for(var u in s){var h=r+s[u];o.addNumberInput(e.helperObject.quaternions[n+r],h,{label:s[u],onChange:function(){e.settings[n+r]=new a.a(e.helperObject.quaternions[n+r].x,e.helperObject.quaternions[n+r].y,e.helperObject.quaternions[n+r].z,e.helperObject.quaternions[n+r].w);var t={};t[r]=e.settings[n+r],e.onChange(t)}})}},this.boundOnKey=this.onKeyDown.bind(this)}return t.prototype.init=function(){},t.prototype.loadGuiPackage=function(){return l(this,void 0,void 0,function(){var t=this;return c(this,function(e){return this.controlKit||n.e(8).then(function(){var t=n(737);return"object"==typeof t&&t&&t.__esModule?t:Object.assign({},"object"==typeof t&&t,{default:t})}).then(function(e){t.controlKit=new e.default({opacity:.9,enable:!1}),t.controlKit.setShortcutEnable(""),t.controlKit.enable(),t.initPromise.resolve()}),[2,this.loadPromise]})})},Object.defineProperty(t.prototype,"loadPromise",{get:function(){return this.initPromise.nativePromise()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLoaded",{get:function(){return void 0!==this.controlKit},enumerable:!0,configurable:!0}),t.prototype.addPanel=function(t,e,n){if(void 0===n&&(n={}),!this.controlKit)throw new Error(this.uninitError);for(void 0===n.width&&(n.width=250),void 0===n.allowSubGroups&&(n.allowSubGroups=!0),void 0===n.ratio&&(n.ratio=60),this.lastKeysBufferLength=Math.max(this.lastKeysBufferLength,e.length);this.lastKeysBufferLength>this.lastKeys.length;)this.lastKeys.unshift(-1);var r=this.controlKit.addPanel({label:t,align:"right",ratio:n.ratio,width:n.width});return this.panels.push({guiPanel:r,subGroups:[],allowSubGroups:n.allowSubGroups,activationSequence:e.reverse()}),this.panels.length-1},t.prototype.isVisible=function(t){if(!this.controlKit)throw new Error(this.uninitError);return this.panels[t].guiPanel._enabled},t.prototype.toggle=function(t){var e=this;this.controlKit?this.toggleVisibility(t):this.loadGuiPackage().then(function(){e.toggleVisibility(t)})},t.prototype.onToggle=function(t,e){this.onToggleCallbacks[t]||(this.onToggleCallbacks[t]=[]),this.onToggleCallbacks[t].push(e)},t.prototype.toggleVisibility=function(t){var e,n,r=this.panels[t].guiPanel._enabled;if(r?this.panels[t].guiPanel.disable():this.panels[t].guiPanel.enable(),this.onToggleCallbacks[t])try{for(var i=f(this.onToggleCallbacks[t]),o=i.next();!o.done;o=i.next()){(0,o.value)(!r)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.dispose=function(){this.deactivate();var t=document.getElementById("controlKit");t&&t.remove(),this.controlKit=void 0},t.prototype.activate=function(){window.addEventListener("keydown",this.boundOnKey)},t.prototype.deactivate=function(){this.controlKit&&this.controlKit.disable(),window.removeEventListener("keydown",this.boundOnKey)},t.prototype.render=function(){this.controlKit&&this.updateRequired&&this.controlKit.update()},t.prototype.updateSetting=function(t,e,n){if(!this.controlKit)throw new Error(this.uninitError);"function"==typeof n.equals?n.equals(this.settings[t+e])||(this.settings[t+e].copy(n),this.updateHelperObject(name,n),this.updateRequired=!0):n!==this.settings[t+e]&&(this.settings[t+e]=n,this.updateRequired=!0)},t.prototype.isRegistered=function(t,e){return void 0!==this.settings[t+e]},t.prototype.addControl=function(t,e,n,r){var i=this;if(!this.controlKit)throw new Error(this.uninitError);var u=this.getSubGroup(t,e);if(this.settings[t+n]=r,r instanceof o.a)this.addColor(u,t,n,r);else if(r instanceof s.a)this.addVector3(u,t,n,r);else if(r instanceof a.a)this.addQuaternion(u,t,n,r);else switch(typeof r){case"string":u.addStringInput(this.settings,t+n,{label:n,onChange:function(){var e={};e[n]=i.settings[t+n],i.onChange(e)}});break;case"number":u.addNumberInput(this.settings,t+n,{label:n,onChange:function(){var e={};e[n]=i.settings[t+n],i.onChange(e)}});break;case"boolean":u.addCheckbox(this.settings,t+n,{label:n,ratio:10,onChange:function(){var e={};e[n]=i.settings[t+n],i.onChange(e)}});break;default:u.addStringOutput(this.settings,t+n,{label:n})}},t.prototype.addButton=function(t,e,n,r){if(!this.controlKit)throw new Error(this.uninitError);this.getSubGroup(t,e).addButton(n,r,{label:"none",ratio:100})},t.prototype.addSlider=function(t,e,n,r,i,o,s){var a=this;if(!this.controlKit)throw new Error(this.uninitError);var u=this.getSubGroup(t,e);this.settings[t+n]=r,this.settings[t+n+"_range"]=[i,o],u.addSlider(this.settings,t+n,t+n+"_range",{label:n,dp:s,onChange:function(){var e={};e[n]=a.settings[t+n],a.onChange(e)}})},t.prototype.updateHelperObject=function(t,e){e instanceof o.a?this.helperObject.colors[t]="#"+e.getHexString():e instanceof s.a?(this.helperObject.vectors[t]={},this.helperObject.vectors[t].x=e.x,this.helperObject.vectors[t].y=e.y,this.helperObject.vectors[t].z=e.z):e instanceof a.a&&(this.helperObject.quaternions[t]={},this.helperObject.quaternions[t].x=e.x,this.helperObject.quaternions[t].y=e.y,this.helperObject.quaternions[t].z=e.z,this.helperObject.quaternions[t].w=e.w)},t}(),d=n(2),y=n(70),m=n(28),g=n(8),v=n(18),b=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),w=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})},E=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},_=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},x=new i.a("settings"),O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="settings",e.queuedControls=[],e.queuedButtons=[],e.secretWord=[38,38,40,40,37,39,37,39,66,65,72],e.panelID=-1,e}return b(e,t),e.prototype.init=function(t,e){return w(this,void 0,void 0,function(){var n,r,i,o,s=this;return E(this,function(a){for(r in this.settings=new y.a,this.engine=e,t.useGUI&&(this.settingsGUI=new p(function(t){s.updateSettings(t)}),e.addComponent(this,this.settingsGUI)),n=Object(v.k)())"string"==typeof(i=n[r])&&(o=Number.parseFloat(i),isNaN(o)||(i=o)),this.settings.setProperty(r,i),t.useGUI&&this.queuedControls.push({group:"Engine Config",settingName:r,value:i});return this.engine.market.register(this,y.a,this.settings),t.useGUI&&(this.onPhaseChange=this.onPhaseChange.bind(this),e.subscribe(m.a,this.onPhaseChange),this.settingsGUI.loadPromise.then(function(){s.panelID=s.settingsGUI.addPanel("3.0.3.82-0-ge8c0dfde1",s.secretWord);try{for(var t=_(s.queuedControls),e=t.next();!e.done;e=t.next()){var n=e.value;s.settingsGUI.addControl(s.panelID,n.group,n.settingName,n.value)}}catch(t){a={error:t}}finally{try{e&&!e.done&&(u=t.return)&&u.call(t)}finally{if(a)throw a.error}}try{for(var r=_(s.queuedButtons),i=r.next();!i.done;i=r.next()){var o=i.value;s.settingsGUI.addButton(s.panelID,o.group,o.buttonName,o.callback)}}catch(t){h={error:t}}finally{try{i&&!i.done&&(l=r.return)&&l.call(r)}finally{if(h)throw h.error}}var a,u,h,l;s.settingsGUI.toggle(s.panelID)})),[2]})})},e.prototype.onPhaseChange=function(t){t.phase!==g.a.STARTING&&t.phase!==g.a.PLAYING||(this.settingsGUI.loadGuiPackage(),this.engine.unsubscribe(m.a,this.onPhaseChange))},e.prototype.getSettingsGui=function(){return this.settingsGUI},e.prototype.updateSetting=function(t,e){e&&e.clone&&"function"==typeof e.clone?this.settings.setProperty(t,e.clone()):this.settings.setProperty(t,e),this.engine.market.update(this,this.settings),this.settingsGUI&&this.settingsGUI.isLoaded&&this.settingsGUI.updateSetting(this.panelID,t,e)},e.prototype.updateSettings=function(t){for(var e in t)this.updateSetting(e,t[e])},e.prototype.registerSetting=function(t,e,n,r){var i;(void 0===r&&(r=!0),this.settingsGUI&&this.settingsGUI.isRegistered(this.panelID,e))?x.warn("Duplicate setting "+e+" registered. Is a module being used twice?"):(i="function"==typeof n.clone?n.clone():n,this.settingsGUI&&r&&(this.settingsGUI.isLoaded?this.settingsGUI.addControl(this.panelID,t,e,i):this.queuedControls.push({group:t,settingName:e,value:n})),this.updateSetting(e,n))},e.prototype.registerButton=function(t,e,n){this.settingsGUI&&(this.settingsGUI.isLoaded?this.settingsGUI.addButton(this.panelID,t,e,n):this.queuedButtons.push({group:t,buttonName:e,callback:n}))},e.prototype.hasProperty=function(t){return this.settings.hasProperty(t)},e.prototype.getProperty=function(t){return this.settings.getProperty(t)},e.prototype.tryGetProperty=function(t,e){return this.settings.tryGetProperty(t,e)},e.prototype.toggleMenu=function(){this.settingsGUI&&this.settingsGUI.toggle(0)},e.prototype.disposeGui=function(){this.settingsGUI.dispose()},e}(d.a);e.default=O},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r,i=n(42),o=n(1);function s(t,e){this.center=void 0!==t?t:new o.a,this.radius=void 0!==e?e:0}s.prototype={constructor:s,set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:(r=new i.a,function(t,e){var n=this.center;void 0!==e?n.copy(e):r.setFromPoints(t).getCenter(n);for(var i=0,o=0,s=t.length;o<s;o++)i=Math.max(i,n.distanceToSquared(t[o]));return this.radius=Math.sqrt(i),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(this.center.dot(t.normal)-t.constant)<=this.radius},clampPoint:function(t,e){var n=this.center.distanceToSquared(t),r=e||new o.a;return r.copy(t),n>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r},getBoundingBox:function(t){var e=t||new i.a;return e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function t(t){void 0===t&&(t=!1),this.typeLookup=[],this.funcProto=Function.__proto__,this.allowInheritence=t}return t.prototype.addIndexByType=function(t){if(!t)throw Error("Cannot index undefined type");if(-1!==this.typeLookup.indexOf(t))throw Error("Type already registered");return this.typeLookup.push(t)-1},t.prototype.getIndexByType=function(t,e){if(!t)throw Error("Cannot index undefined type");var n=-1;if(this.allowInheritence)for(var r=0;r<this.typeLookup.length;r++){for(var i=this.typeLookup[r];i!==t&&i!==this.funcProto;)i=i.__proto__;if(i===t)return r}else n=this.typeLookup.indexOf(t);return-1===n&&e&&(n=this.typeLookup.push(t)-1),n},t.prototype.getIndicesByType=function(t){if(!t)throw Error("Cannot index undefined type");if(!this.allowInheritence)return[this.getIndexByType(t)];for(var e=[],n=0;n<this.typeLookup.length;n++){for(var r=this.typeLookup[n];r!==t&&r!==this.funcProto;)r=r.__proto__;r===t&&e.push(n)}return e},t.prototype.getIndexByInstance=function(t){if(!t)throw Error("Cannot index undefined data");return this.typeLookup.indexOf(t.constructor)},t.prototype.getTypeByIndex=function(t){if(!(t in this.typeLookup))throw Error("Index not found");return this.typeLookup[t]},t.prototype.getKnownTypes=function(){return this.typeLookup.concat()},t}()},function(t,e,n){"use strict";var r;n.d(e,"a",function(){return r}),function(t){t[t.Immediate=0]="Immediate",t[t.NextFrame=1]="NextFrame",t[t.Duration=2]="Duration"}(r=r||(r={}))},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return h});var r,i=n(39),o=n(33),s=n(10),a=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};!function(t){t.added="added",t.removed="removed",t.updated="updated"}(r=r||(r={}));var u=function(){return function(t,e,n){this.index=t,this.action=e,this.diff=n}}(),h=function(){function t(t,e){if(this.changedHandlers=[],this.awaitingInvoke=!1,this.diffRecord=[],this.targetMonitors={},this.triggerChangeHandlers=this.invokeChangeHandlers.bind(this),this.config=t,this.updatePhaseSync=e,this.config.aggregationType===o.a.NextFrame){if(!e)throw Error("UpdatePhaseSync required for NextFrame aggregation")}else if(this.config.aggregationType===o.a.Duration)throw Error("Aggregation Type not implemented")}return t.prototype.hasDiffRecord=function(){return this.diffRecord.length>0},t.prototype.clearDiffRecord=function(){for(var t in this.diffRecord=[],this.targetMonitors){var e=this.targetMonitors[t];e.hasDiffRecord()&&e.clearDiffRecord()}},t.prototype.onChanged=function(t){this.changedHandlers.push(t)},t.prototype.removeOnChanged=function(t){Object(i.a)(this.changedHandlers,t)},t.prototype.invokeChangeHandlers=function(t){var e=this;function n(e){if(e.length>0)try{for(var n=a(e),r=n.next();!r.done;r=n.next()){(0,r.value)(t)}}catch(t){i={error:t}}finally{try{r&&!r.done&&(o=n.return)&&o.call(n)}finally{if(i)throw i.error}}var i,o}switch(this.config.aggregationType){case o.a.Immediate:n(this.changedHandlers);break;case o.a.NextFrame:this.awaitingInvoke||(this.awaitingInvoke=!0,this.updatePhaseSync.after(s.a.End).then(function(){e.awaitingInvoke=!1,n(e.changedHandlers)}))}},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n(48),i=function(t){if("object"==typeof t){var e=Array.isArray(t)?[]:{};for(var n in t)if(!Object(r.a)(n)){var o=t[n];"function"!=typeof o&&(e[n]="object"==typeof o?i(o):o)}return e}return t},o=function(t,e){for(var n in e)if("function"!=typeof e[n]&&(!Object(r.a)(n)||t.hasOwnProperty(n))){var s=e[n];if(t.hasOwnProperty(n)){var a=t[n];typeof a!=typeof s?t[n]=i(s):"object"==typeof a?o(a,s):t[n]=s}else t[n]=i(s)}}},function(t,e,n){"use strict";var r;n.d(e,"a",function(){return r}),function(t){t.hotspot="hotspot",t.flying="flying",t.text="text",t.link="link",t.photo="photo",t.video="video",t.rich="rich",t.none="none"}(r=r||(r={})),function(t){t.parse=function(e){return null!==e&&e in t?t[e]:t.none}}(r=r||(r={}))},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(35),i=n(48),o=n(13),s=n(39),a=function(t){if(t&&t.hasOwnProperty("isObservableProxy"))return t;var e=new Proxy(t,{get:function(t,n){return u(e,t,n)},set:function(t,n,r){return h(e,t,n,r)},defineProperty:function(t,n,r){return h(e,t,n,r)}});for(var n in e.propertyObservers={},e.isObservableProxy=!0,e.isObservable=!0,e.changeObservers=[],e.childChangeFunctions={},t)f(t,e,n);return e.onPropertyChanged=function(t,n){l(e,t,n)},e.removeOnPropertyChanged=function(t,n){c(e,t,n)},e.onChanged=function(t){e.changeObservers.push(t)},e.removeOnChanged=function(t){o.a.removeOnChangedFromObservable(e,t)},e.getValueForKey=function(e){return t[e]},e.target=function(){return Object(r.a)(e)},e.diffRoot={},e},u=function(t,e,n){return e[n]},h=function(t,e,n,r){if(Object(i.a)(n))return e[n]=r,!0;var s=e[n];p(e,t,n),e[n]=r,f(e,t,n);var a=t.propertyObservers[n];if(a)for(var u in a){(0,a[u])(s,r)}return o.a.changedFunc(t,n,r),!0},l=function(t,e,n){t.propertyObservers[e]||(t.propertyObservers[e]=[]),t.propertyObservers[e].push(n)},c=function(t,e,n){var r=t.propertyObservers[e];r&&Object(s.a)(r,n)},f=function(t,e,n){var r=t[n],i=o.a.isObservable(r);if(i){var s=function(t,r){var s=o.a.buildEmptyObjectWithProp(t,r,i.diffRoot);o.a.changedFunc(e,n,s)};i.onChanged(s),e.childChangeFunctions[n]=s}},p=function(t,e,n){var r=t[n],i=o.a.isObservable(r),s=e.childChangeFunctions[n];i&&s&&i.removeOnChanged(s)}},function(t,e,n){"use strict";n.r(e);var r,i,o=n(2),s=n(44),a=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};!function(t){t.CONNECT="postmessage.connect",t.HANDSHAKE="postmessage.handshake",t.ACCEPT="postmessage.accept",t.REJECT="postmessage.reject",t.ACTION="postmessage.action",t.RESPONSE="postmessage.response",t.EVENT="postmessage.event",t.SUBSCRIBE="postmessage.subscribe",t.UNSUBSCRIBE="postmessage.unsubscribe"}(i=i||(i={}));var h,l=function(t){function e(e){var n=t.call(this)||this;return n.clientWindow=null,n.clientOrigin=null,n.id=0,n.hostWindow=e,n.id=Math.floor(1e5*Math.random()),n.bindEvents(),n}return a(e,t),e.prototype.send=function(t){this.clientWindow&&this.clientOrigin&&this.clientWindow.postMessage(u({},t,{fromId:this.id}),this.clientOrigin)},e.prototype.setTarget=function(t,e){this.clientWindow=t,this.clientOrigin=e},e.prototype.clearTarget=function(){this.clientWindow=null,this.clientOrigin=null},e.prototype.bindEvents=function(){var t=this;this.hostWindow.addEventListener("message",function(e){t.onPostmessageReceived(e)})},e.prototype.onPostmessageReceived=function(t){var e=t.origin,n=t.source;switch(t.data.type){case i.CONNECT:break;case i.ACTION:case i.SUBSCRIBE:case i.UNSUBSCRIBE:if(!this.validateMessageOrigin(e,n))return;break;default:return}var r=u({},t.data,{source:n,origin:e,timestamp:Date.now()});this.emit(t.data.type,r)},e.prototype.validateMessageOrigin=function(t,e){return"*"===this.clientOrigin||this.clientWindow===e&&this.clientOrigin===t},e}(s.EventEmitter);!function(t){t.CONNECTION="sdk.connection",t.MESSAGED="sdk.messaged",t.SUBSCRIBED="sdk.subscribed",t.UNSUBSCRIBED="sdk.unsubscribed"}(h=h||(h={}));var c=n(59),f=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),p=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},d=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},y=function(t){function e(e){var n=t.call(this)||this;return n.requestQueue=new c.RequestQueue({retries:0}),n.clients={},n.connectionHandler=new l(e),n.bindEvents(e),n}return f(e,t),e.prototype.broadcastEventToClient=function(t,e,n){var r=this.clients[t];r&&r.messenger.send({type:i.EVENT,eventType:e,eventData:n,toId:parseInt(t,10)})},e.prototype.broadcastEvent=function(t,e,n){void 0===n&&(n=!0);try{for(var r=d(Object.keys(this.clients)),i=r.next();!i.done;i=r.next()){var o=i.value;(n||this.clients[o].subscriptions[t])&&this.broadcastEventToClient(o,t,e)}}catch(t){s={error:t}}finally{try{i&&!i.done&&(a=r.return)&&a.call(r)}finally{if(s)throw s.error}}var s,a},e.prototype.bindEvents=function(t){var e=this;this.connectionHandler.on(i.CONNECT,function(n){var r=new l(t);e.onConnectionReceived(r,n)})},e.prototype.onConnectionReceived=function(t,e){var n=this,r=function(e){var n={type:i.REJECT,toId:o.fromId,reason:e};t.send(n),t.clearTarget()},o=p({},e,{handshake:function(){n.clients[o.fromId]={key:e.applicationKey,messenger:t,subscriptions:{}};var r={type:i.HANDSHAKE,toId:o.fromId};t.send(r)},accept:function(e,r){var s={type:i.ACCEPT,toId:o.fromId,warning:r,interface:e};t.send(s);var a=n.clients[o.fromId];t.on(i.ACTION,function(t){return n.onMessageReceived(a,t)}),t.on(i.SUBSCRIBE,function(t){return n.onSubscription(a,t)}),t.on(i.UNSUBSCRIBE,function(t){return n.onUnsubscribe(a,t)})},reject:r,requestedVersion:e.sdkVersion||e.requestedVersion});t.setTarget(o.source,o.origin),this.verifyConnection(o).then(function(){return n.emit(h.CONNECTION,o)}).catch(r)},e.prototype.verifyConnection=function(t){var n=this;return Promise.resolve();return t.source===window?Promise.resolve():new Promise(function(r,i){var o={cache:!1,headers:{"X-Matterport-Application-Key":t.applicationKey,"X-Matterport-Referrer":t.origin}};n.requestQueue.get(e.apiValidationUrl,o).then(r,function(){return i("key/referrer mismatch")})})},e.prototype.onMessageReceived=function(t,e){if(this.validateClientApplicationKey(e.fromId,e.applicationKey)){var n={toId:e.fromId,uid:e.uid,message:null,success:!0,type:i.RESPONSE,timestamp:Date.now()},r=p({},e,{onSuccess:function(t){o(t)},onFail:function(t){n.success=!1,n.error=t,o(t)}});this.emit(h.MESSAGED,r)}function o(e){n.message=e,t.messenger.send(n)}},e.prototype.onSubscription=function(t,e){t.subscriptions[e.subscription]=!0,this.emit(h.SUBSCRIBED,e.subscription)},e.prototype.onUnsubscribe=function(t,e){t.subscriptions[e.subscription]=!1,this.emit(h.UNSUBSCRIBED,e.subscription)},e.prototype.validateClientApplicationKey=function(t,e){var n=this.clients[t];return!!n&&n.key===e},e.apiValidationUrl=window.location.origin+"/api/v1/user/",e}(s.EventEmitter),m=n(86),g=n(12),v=n(40),b=n(4),w=n(0),E=n(65),_=n(74),x=n(81),O=n(62),S=n(98),T=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),P=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},I=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})},R=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},L=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},A=new b.a("sdk"),M=function(t){function e(){var e=t.call(this)||this;return e.name="sdk",e.clientInterface={functions:{},enums:{}},e.commandCreators={},e.registeredEventUsers={},e.sdkHost=new y(window),e}return T(e,t),e.prototype.init=function(t,e){return I(this,void 0,void 0,function(){var n;return R(this,function(r){switch(r.label){case 0:return this.engine=e,n=this,[4,e.getModule(v.default)];case 1:return n.analytics=r.sent(),this.clientFilter=t.clientFilter||function(){return!0},this.issueCommand=e.commandBinder.issueCommand.bind(e.commandBinder),this.interfacePromise=new g.a,this.addDeprecatedInterface(),[2]}})})},e.prototype.addDeprecatedInterface=function(){try{for(var t=L(Object.keys(_)),e=t.next();!e.done;e=t.next()){var n=e.value,r=_[n];this.clientInterface.functions[r.name]=r}}catch(t){a={error:t}}finally{try{e&&!e.done&&(u=t.return)&&u.call(t)}finally{if(a)throw a.error}}try{for(var i=L(Object.keys(x)),o=i.next();!o.done;o=i.next()){var s=o.value;this.addEnumToInterface(x[s])}}catch(t){h={error:t}}finally{try{o&&!o.done&&(l=i.return)&&l.call(i)}finally{if(h)throw h.error}}var a,u,h,l},e.prototype.enableHandshaking=function(){var t=this;this.sdkHost.on(h.CONNECTION,function(e){return t.onConnectionReceived(e)})},e.prototype.acceptConnections=function(){var t=this;this.sdkHost.on(h.MESSAGED,function(e){return t.onMessageReceived(e)}),this.sdkHost.on(h.SUBSCRIBED,function(e){return t.onSubscribeReceived(e)}),this.sdkHost.on(h.UNSUBSCRIBED,function(e){return t.onUnsubscribeReceived(e)}),this.interfacePromise.resolve()},e.prototype.clearInterface=function(){this.clientInterface.functions={},this.clientInterface.enums={},this.commandCreators={}},e.prototype.addCommandToInterface=function(t,e){var n=t.name+"."+t.version;t.namespace&&(n=t.namespace+"."+n),this.clientInterface.functions.hasOwnProperty(n)&&A.debug("Overwriting "+n+" function in sdk interface"),this.clientInterface.functions[n]=t,this.commandCreators[n]=e,t.namespace||(this.clientInterface.functions[t.name]=t,this.commandCreators[t.name]=e)},e.prototype.addEnumToInterface=function(t){var e=t.namespace+"."+t.name+"."+t.version;this.clientInterface.functions.hasOwnProperty(e)&&A.debug("Overwriting "+e+" enum in sdk interface"),this.clientInterface.enums[e]=P({},t,{values:P({},t.values)})},e.prototype.broadcast=function(t,e,n,r){void 0===r&&(r=!0);var i=this.registeredEventUsers[t]>0;if(r||i){var o=n&&void 0!==e?n(e):void 0;n&&!o||this.sdkHost.broadcastEvent(t,o,r)}},e.prototype.isVersionDeprecated=function(t){return-1!==e.deprecatedSdks.indexOf(t)},e.prototype.makeVersionedInterface=function(t){m.valid(t)||(t+=".0");var e=function(e){var n,r,i={};try{for(var o=L(Object.keys(e)),s=o.next();!s.done;s=o.next()){var a=s.value,u=e[a];m.satisfies(t,u.version)&&(i[a]=u)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i};return{enums:e(this.clientInterface.enums),functions:e(this.clientInterface.functions)}},e.prototype.onConnectionReceived=function(t){return I(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u=this;return R(this,function(h){switch(h.label){case 0:return this.clientFilter(t)?(e=t.requestedVersion,n=function(n){var r=u.makeVersionedInterface(e);if(0===Object.keys(r.enums).length&&0===Object.keys(r.functions).length)return t.reject("unsupported version: "+e);t.accept(r,n)},t.handshake(),this.isVersionDeprecated(e)?("This version of the SDK is being deprecated. Please see [PLACEHOLDER] for more info",n("This version of the SDK is being deprecated. Please see [PLACEHOLDER] for more info"),[4,this.engine.getModule(w.H)]):[3,4]):[2,t.reject("Connection refused")];case 1:return r=h.sent(),i=r.getModel(),o=r.getSignedUrls(),[4,this.engine.market.waitForData(E.a)];case 2:return s=h.sent().getSweepList(),[4,Object(S.a)(o,i.sid,i.vrSupported,s)];case 3:return a=h.sent(),this.sdkHost.broadcastEventToClient(String(t.fromId),O.a.MODEL_LOADED,{metadata:a}),[3,5];case 4:this.interfacePromise.then(function(){return n()}),h.label=5;case 5:return this.trackSdkConnect(t),[2]}})})},e.prototype.onMessageReceived=function(t){var e=this.commandCreators[t.targetFunction];if(!e)return t.onFail(t.targetFunction+" is not a valid command");this.trackSdkCall(t);try{return this.issueCommand(e(t.params)).then(t.onSuccess,function(e){return t.onFail(e.message)})}catch(e){return t.onFail(e.message)}},e.prototype.onSubscribeReceived=function(t){this.registeredEventUsers.hasOwnProperty(t)||(this.registeredEventUsers[t]=0),this.registeredEventUsers[t]++},e.prototype.onUnsubscribeReceived=function(t){this.registeredEventUsers.hasOwnProperty(t)&&this.registeredEventUsers[t]--},e.prototype.trackSdkConnect=function(t){this.analytics&&this.analytics.track("sdk_connect",{origin:t.origin,applicationKey:t.applicationKey,version:t.requestedVersion})},e.prototype.trackSdkCall=function(t){if(this.analytics){var e=this.clientInterface.functions[t.targetFunction],n=Object.keys(t.params).map(function(e){return t.params[e]});this.analytics.track("sdk_call",P({origin:t.origin,applicationKey:t.applicationKey},e,{args:n}))}},e.deprecatedSdks=["1.0","1.1"],e}(o.a);e.default=M},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t,e){if(0!==t.length)for(var n=0;n<t.length;n++){t[n]===e&&t.splice(n,1)}}},function(t,e,n){"use strict";n.r(e);var r,i=n(82),o=n(2),s=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="analytics",e.loaded=!1,e.bufferedData=[],e.track=function(t,n){e.loaded?e.activeEndpoint&&e.activeEndpoint.track(t,n):e.bufferedData.push({event:t,data:n})},e.trackAsync=function(t,n){e.loaded?e.activeEndpoint&&e.activeEndpoint.trackAsync(t,n):e.bufferedData.push({event:t,data:n})},e}return s(e,t),e.prototype.load=function(t,e,n,r){return!!i.b.hasOwnProperty(t)&&(this.activeEndpoint=new i.b[t].class(e),this.activeEndpoint.init(n,r),this.loaded=!0,this.flushBufferedData(),!0)},e.prototype.flushBufferedData=function(){try{for(var t=a(this.bufferedData),e=t.next();!e.done;e=t.next()){var n=e.value;this.activeEndpoint.track(n.event,n.data)}}catch(t){r={error:t}}finally{try{e&&!e.done&&(i=t.return)&&i.call(t)}finally{if(r)throw r.error}}var r,i;this.bufferedData.length=0},e}(o.a);e.default=u},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return l}),n.d(e,"c",function(){return f});var r,i,o=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};!function(t){t[t.None=0]="None",t[t.Duration=1]="Duration",t[t.Phase=2]="Phase",t[t.Promise=3]="Promise"}(i=i||(i={}));var a,u=function(){return function(t){this.type=t}}(),h=function(t){function e(){return t.call(this,i.None)||this}return o(e,t),e}(u),l=function(t){function e(e){var n=t.call(this,i.Duration)||this;return n.duration=e,n.startTime=Date.now(),n}return o(e,t),e}(u),c=function(t){function e(e){var n=t.call(this,i.Phase)||this;return n.phase=e,n}return o(e,t),e}(u);!function(t){t[t.Pending=0]="Pending",t[t.Fulfilled=1]="Fulfilled",t[t.Rejected=2]="Rejected"}(a=a||(a={}));var f=function(t){function e(e){var n=t.call(this,i.Promise)||this;return n.promise=e,n.promiseState=a.Pending,e.then(function(){n.promiseState=a.Fulfilled}).catch(function(){n.promiseState=a.Rejected}),n}return o(e,t),e}(u),p=function(){function t(t,e){void 0===e&&(e=!0),this.generator=t,e&&this.start()}return t.prototype.start=function(){this.started||(this.iterator=this.generator()),this.started=!0},t.prototype.iterate=function(){var t=this.iterator.next();this.currentResult=t.value,t.done&&(this.started=!1)},t}(),d=function(){function t(){this.generators=[]}return t.prototype.startGenerator=function(t){for(var e=this.generators.length,n=0;n<this.generators.length;n++){this.generators[n].generator===t&&(e=n)}this.generators[e]=new p(t)},t.prototype.stopGenerator=function(t){try{for(var e=s(this.generators),n=e.next();!n.done;n=e.next()){var r=n.value;r.generator===t&&(r.started=!1)}}catch(t){i={error:t}}finally{try{n&&!n.done&&(o=e.return)&&o.call(e)}finally{if(i)throw i.error}}var i,o},t.prototype.processGenerators=function(t,e){try{for(var n=s(this.generators),r=n.next();!r.done;r=n.next()){var o=r.value;if(o.started)switch(t){case i.None:(!o.currentResult||o.currentResult instanceof h)&&o.iterate();break;case i.Phase:if(o.currentResult instanceof c){var u=o.currentResult;void 0!==e&&u.phase===e&&o.iterate()}break;case i.Promise:if(o.currentResult instanceof f)o.currentResult.promiseState===a.Fulfilled&&o.iterate();break;case i.Duration:if(o.currentResult instanceof l){var p=o.currentResult;Date.now()-p.startTime>=p.duration&&o.iterate()}}}}catch(t){d={error:t}}finally{try{r&&!r.done&&(y=n.return)&&y.call(n)}finally{if(d)throw d.error}}var d,y},t}();e.d=d},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r,i,o,s=n(1),a=n(31);function u(t,e){this.min=void 0!==t?t:new s.a(1/0,1/0,1/0),this.max=void 0!==e?e:new s.a(-1/0,-1/0,-1/0)}u.prototype={constructor:u,isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,s=-1/0,a=0,u=t.length;a<u;a+=3){var h=t[a],l=t[a+1],c=t[a+2];h<e&&(e=h),l<n&&(n=l),c<r&&(r=c),h>i&&(i=h),l>o&&(o=l),c>s&&(s=c)}this.min.set(e,n,r),this.max.set(i,o,s)},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:(o=new s.a,function(t,e){var n=o.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}),setFromObject:function(){var t=new s.a;return function(e){var n=this;return e.updateMatrixWorld(!0),this.makeEmpty(),e.traverse(function(e){var r=e.geometry;if(void 0!==r)if(r&&r.isGeometry)for(var i=r.vertices,o=0,s=i.length;o<s;o++)t.copy(i[o]),t.applyMatrix4(e.matrixWorld),n.expandByPoint(t);else if(r&&r.isBufferGeometry){var a=r.attributes.position;if(void 0!==a){var u,h,l;a&&a.isInterleavedBufferAttribute?(u=a.data.array,h=a.offset,l=a.data.stride):(u=a.array,h=0,l=3);for(o=h,s=u.length;o<s;o+=l)t.fromArray(u,o),t.applyMatrix4(e.matrixWorld),n.expandByPoint(t)}}}),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){var e=t||new s.a;return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){var e=t||new s.a;return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return(e||new s.a).set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(t){return void 0===i&&(i=new s.a),this.clampPoint(t.center,i),i.distanceToSquared(t.center)<=t.radius*t.radius},intersectsPlane:function(t){var e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=t.constant&&n>=t.constant},clampPoint:function(t,e){return(e||new s.a).copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new s.a;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),getBoundingSphere:function(){var t=new s.a;return function(e){var n=e||new a.a;return this.getCenter(n.center),n.radius=.5*this.size(t).length(),n}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:(r=[new s.a,new s.a,new s.a,new s.a,new s.a,new s.a,new s.a,new s.a],function(t){return this.isEmpty()?this:(r[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),r[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),r[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),r[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),r[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),r[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),r[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),r[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(r),this)}),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}},function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r,i,o=n(3),s=n(1),a=n(7),u=n(5);function h(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._order=r||h.DefaultOrder}h.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],h.DefaultOrder="XYZ",h.prototype={constructor:h,isEuler:!0,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get order(){return this._order},set order(t){this._order=t,this.onChangeCallback()},set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var r=u.a.clamp,i=t.elements,o=i[0],s=i[4],a=i[8],h=i[1],l=i[5],c=i[9],f=i[2],p=i[6],d=i[10];return"XYZ"===(e=e||this._order)?(this._y=Math.asin(r(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(p,l),this._z=0)):"YXZ"===e?(this._x=Math.asin(-r(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(a,d),this._z=Math.atan2(h,l)):(this._y=Math.atan2(-f,o),this._z=0)):"ZXY"===e?(this._x=Math.asin(r(p,-1,1)),Math.abs(p)<.99999?(this._y=Math.atan2(-f,d),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(h,o))):"ZYX"===e?(this._y=Math.asin(-r(f,-1,1)),Math.abs(f)<.99999?(this._x=Math.atan2(p,d),this._z=Math.atan2(h,o)):(this._x=0,this._z=Math.atan2(-s,l))):"YZX"===e?(this._z=Math.asin(r(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-f,o)):(this._x=0,this._y=Math.atan2(a,d))):"XZY"===e?(this._z=Math.asin(-r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(p,l),this._y=Math.atan2(a,o)):(this._x=Math.atan2(-c,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(t,e,n){return void 0===i&&(i=new a.a),i.makeRotationFromQuaternion(t),this.setFromRotationMatrix(i,e,n)},setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:(r=new o.a,function(t){return r.setFromEuler(this),this.setFromQuaternion(r,t)}),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new s.a(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function i(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,s,a,u,h;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(o(n=this._events[t]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(i(n))for(a=Array.prototype.slice.call(arguments,1),s=(h=n.slice()).length,u=0;u<s;u++)h[u].apply(this,a);return!0},n.prototype.addListener=function(t,e){var s;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(s=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&s>0&&this._events[t].length>s&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){if(!r(e))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(t,i),n||(n=!0,e.apply(this,arguments))}return i.listener=e,this.on(t,i),this},n.prototype.removeListener=function(t,e){var n,o,s,a;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(s=(n=this._events[t]).length,o=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(n)){for(a=s;a-- >0;)if(n[a]===e||n[a].listener&&n[a].listener===e){o=a;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r,i=n(1);function o(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}o.prototype={constructor:o,isMatrix3:!0,set:function(t,e,n,r,i,o,s,a,u){var h=this.elements;return h[0]=t,h[1]=r,h[2]=s,h[3]=e,h[4]=i,h[5]=a,h[6]=n,h[7]=o,h[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=t.elements;return this.set(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]),this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToVector3Array:function(t,e,n){void 0===r&&(r=new i.a),void 0===e&&(e=0),void 0===n&&(n=t.length);for(var o=0,s=e;o<n;o+=3,s+=3)r.fromArray(t,s),r.applyMatrix3(this),r.toArray(t,s);return t},applyToBuffer:function(){var t;return function(e,n,r){void 0===t&&(t=new i.a),void 0===n&&(n=0),void 0===r&&(r=e.length/e.itemSize);for(var o=0,s=n;o<r;o++,s++)t.x=e.getX(s),t.y=e.getY(s),t.z=e.getZ(s),t.applyMatrix3(this),e.setXYZ(t.x,t.y,t.z);return e}}(),multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],u=t[7],h=t[8];return e*o*h-e*s*u-n*i*h+n*s*a+r*i*u-r*o*a},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var n=t.elements,r=this.elements,i=n[0],o=n[1],s=n[2],a=n[3],u=n[4],h=n[5],l=n[6],c=n[7],f=n[8],p=f*u-h*c,d=h*l-f*a,y=c*a-u*l,m=i*p+o*d+s*y;if(0===m){var g="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(!0===e)throw new Error(g);return console.warn(g),this.identity()}var v=1/m;return r[0]=p*v,r[1]=(s*c-f*o)*v,r[2]=(h*o-s*u)*v,r[3]=d*v,r[4]=(f*i-s*l)*v,r[5]=(s*a-h*i)*v,r[6]=y*v,r[7]=(o*l-c*i)*v,r[8]=(u*i-o*a)*v,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset is deprecated - just use .toArray instead."),this.toArray(t,e)},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<9;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}}},function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"d",function(){return s}),n.d(e,"g",function(){return a}),n.d(e,"f",function(){return u}),n.d(e,"e",function(){return h}),n.d(e,"h",function(){return l}),n.d(e,"b",function(){return c});n(17),n(1),n(72),n(3);var r=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},i=function(t){return new Promise(function(e,n){setTimeout(e,t)})},o=function(t,e){if(e.setLength(0),0===t.length)return e;var n,i,o=0;try{for(var s=r(t),a=s.next();!a.done;a=s.next()){var u=a.value;e.add(u),o++}}catch(t){n={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return e.divideScalar(o),e},s=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0},a=function(t,e,n){if(void 0===n&&(n=!0),0===t.length)return null;n&&t.sort(function(t,e){return t-e});var r=e/100;return t[Math.floor(t.length*r)]},u=function(t,e){try{for(var n=r(e),i=n.next();!i.done;i=n.next()){if(!(0,i.value)(t))return!1}}catch(t){o={error:t}}finally{try{i&&!i.done&&(s=n.return)&&s.call(n)}finally{if(o)throw o.error}}return!0;var o,s},h=function(t,e){return Object.keys(e).forEach(function(n){t[n]=e[n]}),t},l=function(t){for(var e=[],n=0;n<t.length;n+=8192)e.push(String.fromCharCode.apply(null,t.subarray(n,n+8192)));return btoa(e.join(""))},c=function(t){void 0===t&&(t=[]);var e,n,i={};try{for(var o=r(t),s=o.next();!s.done;s=o.next()){i[s.value]=!0}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i}},function(t,e,n){"use strict";var r=function(){return function(t){this.message=t}}();e.a=r},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){return"propertyObservers"===t||"changeObservers"===t||"isObservable"===t||"childChangeFunctions"===t||"isObservableProxy"===t||"diffRoot"===t||"elementChangedHandlers"===t||"knownKeysMap"===t||"knownKeysList"===t}},,function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){return function(){}}()},,,function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(75),i=function(){function t(t,e,n,i){void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=r.e),0===n?this.stop(t):this.modifyAnimation(t,e,n,i)}return Object.defineProperty(t.prototype,"active",{get:function(){return this._active||this.value!==this.endValue},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this._duration},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endValue",{get:function(){return this._endValue},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"easing",{get:function(){return this._easing},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"elapsed",{get:function(){return this._elapsed},enumerable:!0,configurable:!0}),t.prototype.update=function(t,e){if(void 0===e&&(e=!1),this.active||e){if(this._elapsed=e?t:this._elapsed+t,this._elapsed/Math.max(this._duration,1e-5)>=1)return this.value=this._endValue,void(this._active=!1);this.value=this._easing(this._elapsed,this.startValue,this._endValue-this.startValue,this._duration)}},t.prototype.modifyAnimation=function(t,e,n,i,o){void 0===i&&(i=r.e),void 0===o&&(o=0),this._easing=i,this._endValue=e,this._duration=n,this._active=this._duration>0,this._elapsed=o,this.startValue=t,this.value=t},t.prototype.copy=function(t){this._endValue=t.endValue,this._duration=t.duration,this._active=t.active,this._easing=t.easing,this._elapsed=t.elapsed,this.startValue=t.startValue,this.value=t.value},t.prototype.clone=function(){var e=new t(0);return e.copy(this),e},t.prototype.stop=function(t){this._endValue=t,this._active=!1,this._duration=0,this._elapsed=0,this.value=t,this.startValue=0},t.prototype.equals=function(t){return this._active===t._active&&this.duration===t.duration&&this.easing===t.easing&&this.elapsed===t.elapsed&&this.endValue===t.endValue&&this.startValue===t.startValue&&this.value===t.value},t}()},function(t,e,n){"use strict";var r=function(){return function(){this.data=new i}}(),i=function(){return function(){}}(),o=n(9),s=n(6),a=n(21),u=n(4),h=n(29);n.d(e,"a",function(){return c}),n.d(e,"b",function(){return f});var l=new u.a("camera-start"),c=function(t){var e=new r;if(e.modified=Object(a.a)(t&&t.modified||null),!t)return e;e.icon=t.icon||void 0;var n=t.camera_start||null;try{if(n&&Object.keys(n).length>0){if(!n.camera||!n.camera.position||!n.camera.quaternion)return l.warn("Corrupt camera_start - camera data invalid"),e;if(!n.hasOwnProperty("mode"))return l.warn("Corrupt camera_start - mode missing"),e;var i=void 0;if(0===n.mode){if(!(n.pano&&n.pano.uuid&&n.pano.position&&n.pano.quaternion))return l.warn("Corrupt camera_start - pano data invalid"),e;i={uuid:n.pano.uuid,position:Object(o.j)(n.pano.position),rotation:Object(o.h)(n.pano.quaternion)}}else i={};var u={mode:Object(s.c)(n.mode),camera:{position:Object(o.j)(n.camera.position),rotation:Object(o.i)(n.camera.quaternion),zoom:n.camera.zoom},pano:i};e.data=u}}catch(t){l.warn("invalid scanmodel.camera_start",t)}return e},f=function(t){var e=t.data;return{icon:t.icon,camera_start:{camera:{position:Object(h.c)(Object(o.j)(e.camera.position)),quaternion:Object(h.b)(Object(o.i)(e.camera.rotation)),zoom:e.camera.zoom},mode:Object(s.b)(e.mode),pano:{position:e.pano.position?Object(o.j)(e.pano.position):void 0,quaternion:e.pano.rotation?Object(h.b)(Object(o.h)(e.pano.rotation)):void 0,uuid:e.pano.uuid}}}}},function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a});var r=n(79),i=n(21),o=n(18),s=function(t){var e=new r.b(null);e.modified=Object(i.a)(t&&t.modified||null);t.player_options={highlight_reel:true,tour_buttons:true,labels:false,contact_email:false,address:false,contact_name:false,presented_by:false,floor_plan:true,dollhouse:true,fast_transitions:true,external_url:false,model_summary:true,contact_phone:false,model_name:true,autoplay:false};if(o.j()){t.player_options.dollhouse=false}t&&t.player_options&&(e.options=new r.a(t.player_options));return e},a=function(t){return{player_options:t.options}}},function(t,e,n){"use strict";n.d(e,"a",function(){return u}),n.d(e,"b",function(){return h});var r=n(9),i=n(4),o=n(21),s=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},a=new i.a("label-serialization"),u=function(t){var e,n,i=[];try{if(t)try{for(var u=s(Object.keys(t)),h=u.next();!h.done;h=u.next()){var l=t[h.value];!l.version||Number.parseFloat(l.version)<3||i.push({floor:l.floorId,position:Object(r.j)(l.position),sid:l.sid,text:l.text,visible:l.visible,roomId:l.roomId,created:Object(o.a)(l.created),created_by:l.created_by,modified:Object(o.a)(l.modified),version:l.version})}}catch(t){e={error:t}}finally{try{h&&!h.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}}catch(t){a.debug("Error parsing label data; not adding labels: ",t),i=[]}return i},h=function(t){var e={};return t.forEach(function(t){e[t.sid]={floorId:t.floor,position:t.position,sid:t.sid,text:t.text,visible:t.visible,roomId:t.roomId,created:t.created,created_by:t.created_by,modified:t.modified,version:t.version},e[t.sid].modified=new Date,e[t.sid].position=Object(r.j)(t.position)}),e}},function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a});var r=n(4),i=n(21),o=new r.a("active-reel"),s=function(t){var e={reel:[],modified:new Date(0)};return e.modified=Object(i.a)(t&&t.active_reel&&t.active_reel.modified||null),t&&t.active_reel&&t.active_reel.reel&&t.active_reel.reel instanceof Array?(o.info("Reel has "+t.active_reel.reel.length+" items"),e.reel=t.active_reel.reel):o.info("No reel found"),e},a=function(t){return{active_reel:{reel:t.reel,modified:new Date}}}},function(t,e,n){"use strict";var r;!function(t){t.LOADING="LOADING",t.PRESENTED_BY_CAPS="PRESENTED_BY_CAPS",t.EXPLORE_3D_SPACE="EXPLORE_3D_SPACE",t.VIEW_DOLLHOUSE="VIEW_DOLLHOUSE",t.VIEW_FLOORPLAN="VIEW_FLOORPLAN",t.VIEW_FULLSCREEN="VIEW_FULLSCREEN",t.EXIT_FULLSCREEN="EXIT_FULLSCREEN",t.OPEN_HIGHLIGHTS="OPEN_HIGHLIGHTS",t.CLOSE_HIGHLIGHTS="CLOSE_HIGHLIGHTS",t.PAUSE="PAUSE",t.SOCIAL_SHARING="SOCIAL_SHARING",t.VIEW_IN_VR="VIEW_IN_VR",t.FLOOR_NAME="FLOOR_NAME",t.FLOOR_ALL="FLOOR_ALL",t.PRESENTED_BY="PRESENTED_BY",t.MORE="MORE",t.LESS="LESS",t.TERMS="TERMS",t.HELP="HELP",t.TERMS_FAIL="TERMS_FAIL",t.HELP_NAVIGATION_TAB="HELP_NAVIGATION_TAB",t.HELP_MORE_HELP_TAB="HELP_MORE_HELP_TAB",t.HELP_DESKTOP_360_2A="HELP_DESKTOP_360_2A",t.HELP_DESKTOP_360_2B="HELP_DESKTOP_360_2B",t.HELP_DESKTOP_DOLLHOUSE_1A="HELP_DESKTOP_DOLLHOUSE_1A",t.HELP_DESKTOP_DOLLHOUSE_1B="HELP_DESKTOP_DOLLHOUSE_1B",t.HELP_DESKTOP_DOLLHOUSE_2A="HELP_DESKTOP_DOLLHOUSE_2A",t.HELP_DESKTOP_DOLLHOUSE_3A="HELP_DESKTOP_DOLLHOUSE_3A",t.HELP_DESKTOP_FLOORPLAN_1A="HELP_DESKTOP_FLOORPLAN_1A",t.HELP_DESKTOP_FLOORPLAN_2A="HELP_DESKTOP_FLOORPLAN_2A",t.HELP_DESKTOP_FLOORPLAN_2B="HELP_DESKTOP_FLOORPLAN_2B",t.HELP_DESKTOP_FLOORPLAN_3A="HELP_DESKTOP_FLOORPLAN_3A",t.HELP_DESKTOP_FLOORPLAN_3B="HELP_DESKTOP_FLOORPLAN_3B",t.HELP_DESKTOP_MORE_360_B="HELP_DESKTOP_MORE_360_B",t.HELP_DESKTOP_MORE_DOLLHOUSE_B="HELP_DESKTOP_MORE_DOLLHOUSE_B",t.HELP_DESKTOP_MORE_FLOORS_B="HELP_DESKTOP_MORE_FLOORS_B",t.HELP_DESKTOP_MORE_FULLSCREEN_B="HELP_DESKTOP_MORE_FULLSCREEN_B",t.HELP_DESKTOP_MORE_HLR_B="HELP_DESKTOP_MORE_HLR_B",t.HELP_DESKTOP_MORE_INSIDE_B="HELP_DESKTOP_MORE_INSIDE_B",t.HELP_DESKTOP_MORE_MATTERTAG_B="HELP_DESKTOP_MORE_MATTERTAG_B",t.HELP_DESKTOP_MORE_TOUR_B="HELP_DESKTOP_MORE_TOUR_B",t.HELP_DESKTOP_MORE_VR_B="HELP_DESKTOP_MORE_VR_B",t.HELP_DESKTOP_MORE_ZOOM_B="HELP_DESKTOP_MORE_ZOOM_B",t.HELP_DESKTOP_PANORAMA_1A="HELP_DESKTOP_PANORAMA_1A",t.HELP_DESKTOP_PANORAMA_1B="HELP_DESKTOP_PANORAMA_1B",t.HELP_DESKTOP_PANORAMA_2A="HELP_DESKTOP_PANORAMA_2A",t.HELP_DESKTOP_PANORAMA_2B="HELP_DESKTOP_PANORAMA_2B",t.HELP_DESKTOP_PANORAMA_3A="HELP_DESKTOP_PANORAMA_3A",t.HELP_DESKTOP_PANORAMA_3B="HELP_DESKTOP_PANORAMA_3B",t.HELP_MOBILE_3="HELP_MOBILE_3",t.HELP_MOBILE_360_2="HELP_MOBILE_360_2",t.HELP_MOBILE_DOLLHOUSE_1="HELP_MOBILE_DOLLHOUSE_1",t.HELP_MOBILE_DOLLHOUSE_2="HELP_MOBILE_DOLLHOUSE_2",t.HELP_MOBILE_FLOORPLAN_1="HELP_MOBILE_FLOORPLAN_1",t.HELP_MOBILE_FLOORPLAN_2="HELP_MOBILE_FLOORPLAN_2",t.HELP_MOBILE_MORE_360_B="HELP_MOBILE_MORE_360_B",t.HELP_MOBILE_MORE_DOLLHOUSE_B="HELP_MOBILE_MORE_DOLLHOUSE_B",t.HELP_MOBILE_MORE_FLOORPLAN_B="HELP_MOBILE_MORE_FLOORPLAN_B",t.HELP_MOBILE_MORE_INSIDE_B="HELP_MOBILE_MORE_INSIDE_B",t.HELP_MOBILE_MORE_MATTERTAG_B="HELP_MOBILE_MORE_MATTERTAG_B",t.HELP_MOBILE_MORE_VR_B="HELP_MOBILE_MORE_VR_B",t.HELP_MOBILE_PANORAMA_1="HELP_MOBILE_PANORAMA_1",t.HELP_MOBILE_PANORAMA_2="HELP_MOBILE_PANORAMA_2",t.HELP_MORE_360_A="HELP_MORE_360_A",t.HELP_MORE_DOLLHOUSE_A="HELP_MORE_DOLLHOUSE_A",t.HELP_MORE_FLOORS_A="HELP_MORE_FLOORS_A",t.HELP_MORE_FLOORPLAN_A="HELP_MORE_FLOORPLAN_A",t.HELP_MORE_FULLSCREEN_A="HELP_MORE_FULLSCREEN_A",t.HELP_MORE_HLR_A="HELP_MORE_HLR_A",t.HELP_MORE_INSIDE_A="HELP_MORE_INSIDE_A",t.HELP_MORE_MATTERTAG_A="HELP_MORE_MATTERTAG_A",t.HELP_MORE_TOUR_A="HELP_MORE_TOUR_A",t.HELP_MORE_VR_A="HELP_MORE_VR_A",t.HELP_MORE_ZOOM_A="HELP_MORE_ZOOM_A",t.VR_VIEW_SPACE="VR_VIEW_SPACE",t.VR_LEARN_MORE_CAPS="VR_LEARN_MORE_CAPS",t.VR_PREVIOUS_CAPS="VR_PREVIOUS_CAPS",t.VR_NEXT_CAPS="VR_NEXT_CAPS",t.VR_GOT_IT_CAPS="VR_GOT_IT_CAPS",t.VR_GOOGLE_CARDBOARD="VR_GOOGLE_CARDBOARD",t.VR_SAMSUNG_GEAR_VR="VR_SAMSUNG_GEAR_VR",t.VR_OPEN_ANDROID_LINK="VR_OPEN_ANDROID_LINK",t.VR_ANDROID_OPTIONS="VR_ANDROID_OPTIONS",t.VR_SHOW_IOS_1="VR_SHOW_IOS_1",t.VR_SHOW_IOS_2="VR_SHOW_IOS_2",t.VR_WHAT_YOU_NEED="VR_WHAT_YOU_NEED",t.VR_NEED_CARDBOARD="VR_NEED_CARDBOARD",t.VR_NEED_SAMSUNG="VR_NEED_SAMSUNG",t.VR_COMPATIBLE_IPHONES_1="VR_COMPATIBLE_IPHONES_1",t.VR_COMPATIBLE_IPHONES_2="VR_COMPATIBLE_IPHONES_2",t.VR_COMPATIBLE_IPHONES_3="VR_COMPATIBLE_IPHONES_3",t.VR_APP_FOR_CARDBOARD="VR_APP_FOR_CARDBOARD",t.VR_APP_FOR_SAMSUNG="VR_APP_FOR_SAMSUNG",t.VR_DOWNLOAD_HERE="VR_DOWNLOAD_HERE",t.VR_COMPATIBLE_ANDROID="VR_COMPATIBLE_ANDROID",t.VR_ANDROID_DETAIL="VR_ANDROID_DETAIL",t.VR_COMPATIBLE_SAMSUNG="VR_COMPATIBLE_SAMSUNG",t.VR_SAMSUNG_DETAIL="VR_SAMSUNG_DETAIL",t.VR_SHOW_SUPPORTED="VR_SHOW_SUPPORTED",t.VR_REQUIRE_HEADSET="VR_REQUIRE_HEADSET",t.VR_REDIRECT_TO_STORE="VR_REDIRECT_TO_STORE",t.WEBVR_ENTER_WEBVR="WEBVR_ENTER_WEBVR",t.WEBVR_LEARN_MORE="WEBVR_LEARN_MORE",t.VR_APP_OPEN="VR_APP_OPEN",t.ERROR_WEBGL_UNSUPPORTED_PROBLEM="ERROR_WEBGL_UNSUPPORTED_PROBLEM",t.ERROR_BROWSER_SOLUTION="ERROR_BROWSER_SOLUTION",t.ERROR_BROWSER_EXPLANATION="ERROR_BROWSER_EXPLANATION",t.ERROR_LOADING_FAILED_PROBLEM="ERROR_LOADING_FAILED_PROBLEM",t.ERROR_LOADING_FAILED_ACTIONS_1="ERROR_LOADING_FAILED_ACTIONS_1",t.ERROR_LOADING_FAILED_ACTIONS_2="ERROR_LOADING_FAILED_ACTIONS_2",t.ERROR_GENERIC_PROBLEM="ERROR_GENERIC_PROBLEM",t.ERROR_GENERIC_SOLUTION="ERROR_GENERIC_SOLUTION",t.ERROR_GENERIC_ACTIONS_1="ERROR_GENERIC_ACTIONS_1",t.ERROR_GENERIC_ACTIONS_2="ERROR_GENERIC_ACTIONS_2",t.ERROR_GENERIC_ACTIONS_3="ERROR_GENERIC_ACTIONS_3",t.ERROR_GENERIC_ACTIONS_4="ERROR_GENERIC_ACTIONS_4",t.DESKTOP_SHORT_CTA="DESKTOP_SHORT_CTA",t.MOBILE_SHORT_CTA="MOBILE_SHORT_CTA",t.ROTATE="ROTATE",t.MOVE="MOVE",t.PLAY="PLAY",t.INSIDE="INSIDE",t.ZOOM="ZOOM",t.MENU_COPY="MENU_COPY",t.SHARE_COPIED="SHARE_COPIED",t.SHARE_EXPLORE="SHARE_EXPLORE",t.SHARE_AT="SHARE_AT",t.SHARE_WITH="SHARE_WITH",t.SHARE_3D="SHARE_3D"}(r||(r={})),e.a=r},function(t,e,n){"use strict";var r,i;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.LOW=0]="LOW",t[t.MEDIUM=1]="MEDIUM",t[t.HIGH=2]="HIGH",t[t.HIGHEST=3]="HIGHEST"}(r=e.RequestPriority||(e.RequestPriority={})),function(t){t[t.PENDING=0]="PENDING",t[t.SENDING=1]="SENDING",t[t.FAILED=2]="FAILED",t[t.DONE=3]="DONE"}(i=e.RequestStatus||(e.RequestStatus={}));var o=function(){function t(t){var e=void 0===t?{}:t,n=e.retries,r=void 0===n?3:n,i=e.concurrency,o=void 0===i?6:i;this.queue=[],this.retries=r,this.concurrency=o}return t.prototype.get=function(t,e){return this.request("GET",t,e)},t.prototype.head=function(t,e){return this.request("HEAD",t,e)},t.prototype.options=function(t,e){return this.request("OPTIONS",t,e)},t.prototype.post=function(t,e){return this.request("POST",t,e)},t.prototype.put=function(t,e){return this.request("PUT",t,e)},t.prototype.patch=function(t,e){return this.request("PATCH",t,e)},t.prototype.delete=function(t,e){return this.request("DELETE",t,e)},t.prototype.request=function(t,e,n){var r=new s(t,e,n);return this.enqueue(r),r.promise},t.prototype.update=function(){for(var t;t=this.getNextPendingRequest();)this.sendRequest(t);for(;t=this.getNextOverflowingRequest();)t.abort(),t.status=i.PENDING;this.updateTimeout=null},t.prototype.enqueue=function(t){for(var e=this,n=0;n<this.queue.length;n++){if(this.queue[n].priority<t.priority)break}this.queue.splice(n,0,t),this.updateTimeout||(this.updateTimeout=window.setTimeout(function(){e.update()},1))},t.prototype.dequeue=function(t){var e=this.queue.indexOf(t);if(-1===e)throw new Error("Can't dequeue request not in queue");this.queue.splice(e,1),this.update()},t.prototype.getNextPendingRequest=function(){for(var t=0;t<this.queue.length&&t<this.concurrency;t++){var e=this.queue[t];if(e.status===i.PENDING)return e}return null},t.prototype.getNextOverflowingRequest=function(){for(var t=this.concurrency;t<this.queue.length;t++){var e=this.queue[t];if(e.status===i.SENDING&&e.priority!==r.HIGHEST)return e}return null},t.prototype.sendRequest=function(t){var e=this;t.status=i.SENDING,t.send().then(function(n){t.status=i.DONE,e.dequeue(t),t.onDone(n)}).catch(function(n){var r=null!==t.maxRetries?t.maxRetries:e.retries;t.sendAttempts<r?(t.status=i.PENDING,e.update(),console.warn("Retried "+t.url),console.warn(n)):(t.status=i.FAILED,e.dequeue(t),console.warn("Failed "+t.url),t.onFail(n))})},t}();e.RequestQueue=o;var s=function(){function t(t,e,n){void 0===n&&(n={});var o=this;this.sendAttempts=0,this.status=i.PENDING,this.url=e,this.method=t,this.auth=n.auth||null,this.priority=n.priority||r.MEDIUM,this.responseType=n.responseType||null,this.body=n.body||null,this.headers=n.headers||{},this.maxRetries=n.maxRetries||null,this.onProgress=n.onProgress,this.promise=new Promise(function(t,e){o.onDone=t,o.onFail=e})}return t.prototype.send=function(){var t=this,e=this.xhr=function(t,e,n){var r;if("undefined"!=typeof XMLHttpRequest)(r=new XMLHttpRequest).withCredentials=n;else{if("undefined"==typeof XDomainRequest)throw new Error("No XMLHTTPRequest or XDomainRequest... are you trying to run me in node? :(");r=new XDomainRequest}return r.open(t,e,!0),r}(this.method,this.url,!1);if(this.responseType)if("arraybuffer"===this.responseType||"text"===this.responseType||"json"===this.responseType||"blob"===this.responseType)e.responseType=this.responseType;else{if("image"!==this.responseType)throw new Error('reponseType can only be one of "arraybuffer", "text", "json", "blob", "image"');e.responseType="blob"}for(var n in"json"===this.responseType&&e.setRequestHeader("Accept","application/json"),this.auth&&"string"==typeof this.auth&&e.setRequestHeader("Authorization",this.auth),this.headers)e.setRequestHeader(n,this.headers[n]);return this.body&&"object"==typeof this.body&&(this.body=JSON.stringify(this.body),e.setRequestHeader("Content-Type","application/json")),this.onProgress&&(e.onprogress=this.onProgress),new Promise(function(n,r){e.onreadystatechange=function(i){if(4===e.readyState){if(200===e.status||201===e.status||204===e.status)return t.parseResponse(t.xhr).then(function(t){n(t)});0!==e.status&&r({status_code:e.status})}},e.onerror=function(t){r(t)},e.send(t.body),t.sendAttempts++})},t.prototype.parseResponse=function(t){var e=this;return new Promise(function(n,r){try{var i=t.response;if("json"===e.responseType&&"object"!=typeof i)n(JSON.parse(t.responseText));else if("image"===e.responseType){var o=URL.createObjectURL(i);(i=new Image).src=o,i.crossOrigin="Anonymous",i.onload=function(){URL.revokeObjectURL(o),n(i)}}else n(i)}catch(t){r({error:"Payload was not valid JSON"})}})},t.prototype.abort=function(){if(null===this.xhr)throw new Error("Cannot abort unsent Request");this.xhr.abort()},t}();e.Request=s},,function(t,e,n){"use strict";n.d(e,"c",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"a",function(){return a});var r=n(104),i=n(18),o=function(t){var e,n,i;if(void 0===t&&(t=""),t.match(/^https?/)){var o=Object(r.parse)(t);e=o.protocol+"//"+o.host,n=t,i=t.match(/[^/]*$/)[0]}else{e=window.location.protocol+"//"+window.location.host;if(SCENE_CONFIG.type==2){e="https://my.matterportvr.cn"}n=e+"/api/player/models/"+t;i=t}return{sid:i,urlBase:e,urlModel:n,urlFiles:n+(n.match(/\/$/)?"files":"/files"),urlThumb:n+(n.match(/\/$/)?"thumb":"/thumb")}},s=function(){return Object(i.m)("model")||Object(i.m)("m")},a=function(){var t=Object(i.m)("auth");return t?t.replace(","," "):null}},function(t,e,n){"use strict";var r;n.d(e,"a",function(){return r}),function(t){t.MODEL_LOADED="sdk.modelloaded",t.ENTER_PANO="sdk.enterpano",t.MOVE="sdk.move"}(r=r||(r={}))},function(t,e,n){"use strict";var r=function(){return function(){}}(),i=n(4),o=n(21),s=n(1),a=n(23),u=n(64),h=n(100),l=n(36),c=function(){function t(t){this.modelSID=t.model,this.capabilites={links:{enable:t.supportLinks,keepLabels:t.keepLinkLabels}}}return t.prototype.parse=function(t){var e=[];return t.split("[").map(function(t,e){return 0===e?t:"["+t}).forEach(function(t){var n=this.findLink(t);n?-1===n.url.indexOf("javascript:")&&(this.addLinkChunk(e,n),this.addTextChunk(e,t.slice(n.markdown.length))):this.addTextChunk(e,t)}.bind(this)),e},t.prototype.findLink=function(t){var e=t.match(/\[([^\]]*)\]\((.*)\)/);if(!e)return null;for(var n=e[2],r=1,i=0;i<n.length&&("("===n[i]?r++:")"===n[i]&&r--,0!==r);)i++;var o=n.length-i;return{markdown:e[0].substring(0,e[0].length-o),label:e[1],url:encodeURI(e[2].substring(0,i))}},t.prototype.addTextChunk=function(t,e){0!==e.length&&t.push({type:l.a.text,text:e})},t.prototype.addLinkChunk=function(t,e){if(this.capabilites.links.enable){var n={label:e.label,url:e.url,type:u.a.EXT_LINK};-1===n.url.indexOf("://")&&(n.url="http://"+n.url);var r=-1!==n.url.indexOf("matterport.com/show"),i=-1!==n.url.indexOf(window.location.host+"/show");if(r||i){var o=-1!==n.url.indexOf("start=");o&&(n.url=decodeURI(n.url)),-1!==n.url.indexOf(this.modelSID)&&o?(n.type=u.a.NAVIGATION,n.navigationData=h.a.deserialize(n.url),n.url=""):(n.type=u.a.MODEL,n.url+="&play=1")}t.push({type:l.a.link,link:n})}else this.capabilites.links.keepLabels&&this.addTextChunk(t,e.label)},t}(),f=n(29);n.d(e,"a",function(){return y}),n.d(e,"b",function(){return m});var p=new i.a("mattertags");var d=n(494);function y(t,e){var n=new c(t);return function(t){if(SCENE_CONFIG.type==1){var i={};t=t.nesttags.info;for(var u in t){var h=t[u];try{if(e&&(!h.enable||0===h.details.title.length&&0===h.tagtitle.length&&0===h.details.description.length))continue;var c=new r;c.sid=h.tagid,c.created=Object(o.a)(h.details.time||null),c.modified=Object(o.a)(h.details.time||null),c.enabled=h.enable,c.label=h.details.title.length==0?h.tagtitle:h.details.title,c.description=h.details.description,c.parsedDescription=n.parse(h.details.description),c.anchorPosition=new s.a(h.base.x,h.base.y,h.base.z),c.anchorNormal=new s.a(h.normal.x,h.normal.y,h.normal.z),c.stemVector=new s.a(h.stem.direction.x,h.stem.direction.y,h.stem.direction.z),c.stemVisible=h.stem.enabled,c.floorIndex=h.flooridx,c.color=h.color?new a.a(h.color):new a.a("#03687D");h.media={type:""};switch(h.details.templatetype){case 1:h.media.type="text";break;case 2:h.media.type="photo";h.media.src=h.details.imageurl.length>0?h.details.imageurl[0]:"";break;case 11:h.media.type="video";h.media.src=h.details.videourl;break}h.media?(c.mediaType=l.a.parse(h.media.type),c.mediaSrc=h.media.src):(c.mediaType=l.a.none,c.mediaSrc=""),c.isActive=!1;c.detail=h.detail;i[u]=c}catch(t){p.warn("Failed to parse tag: "+h.sid)}}return i}if(this.path.indexOf(".dam")>0){if(SCENE_CONFIG.type==1){t=[]}else{var f='// Protocol Buffer for puck visibility and related data\n//\n// To dump out a binray manifest in text format, you can use protoc directly:\n//   protoc --proto_path ~/dev/mp_vision/  --decode=eos.storage.VisionModeldata ~/dev/mp_vision/eos/storage/vision_modeldata.proto < vision.modeldata\n\n// package eos.storage;\n\n// import "eos/infra/common.proto";\n// The following were manually extracted here, JS does not like protobuf imports\n\n//cd D:gocodescodesspyderZhonqumyproto\n//protoc --go_out=. tags.proto\n\nsyntax = "proto2";\n\nmessage Vector3f {\n\toptional float x = 1;\n\toptional float y = 2;\n\toptional float z = 3;\n}\n\nmessage StemInfo {\n    optional Vector3f direction = 1;\n    optional bool enabled = 2;\n}\n\nmessage MediaInfo {\n    optional string src = 1;\n    optional string type = 2;\n}\n\nmessage DetailInfo {\n    optional float tagHeight = 1;\n    optional float tagWidth = 2;\n    optional int32 tagPicType = 3;\n    optional string tagPicUrl = 4;\n}\n\nmessage TagInfo {\n    optional string color = 1;\n    optional string description = 2;\n    optional DetailInfo detail = 3;\n    optional bool enabled = 4;\n    optional int32 floor = 5;\n\n    optional string label = 6;\n    optional string labelBgColor = 7;\n    optional MediaInfo media = 8;\n    optional Vector3f normal = 9;\n    optional string panoId = 10;\n\n    optional Vector3f position = 11;\n    optional bool showLabel = 12;\n    optional string sid = 13;\n    optional StemInfo stem = 14;\n    optional bool enable = 15;\n}\n\n/* All pucks in a model. Pucks are stored in scanning order. */\nmessage TagsData {\n\trepeated TagInfo tags = 1;\n}\n';var y=d.loadProto(f);var m=y.build("TagsData");t=m.decode(t);t=t.tags}}var i={};for(var u in t){var h=t[u];try{if(e&&(!h.enabled||0===h.label.length&&0===h.description.length))continue;var c=new r;c.sid=h.sid,c.created=Object(o.a)(h.created||null),c.modified=Object(o.a)(h.modified||null),c.enabled=h.enabled,c.label=h.label,c.description=h.description,c.parsedDescription=n.parse(h.description),c.anchorPosition=new s.a(h.position.x,h.position.y,h.position.z),c.anchorNormal=new s.a(h.normal.x,h.normal.y,h.normal.z),c.stemVector=new s.a(h.stem.direction.x,h.stem.direction.y,h.stem.direction.z),c.stemVisible=h.stem.enabled,c.floorIndex=h.floor,c.color=h.color?new a.a(h.color):new a.a("#03687D"),h.media?(c.mediaType=l.a.parse(h.media.type),c.mediaSrc=h.media.src):(c.mediaType=l.a.none,c.mediaSrc=""),c.isActive=!1;c.detail=h.detail;if(h.detail&&h.detail.tagPicUrl&&h.detail.tagPicUrl.indexOf("model.png")>0){h.detail.tagPicUrl=undefined;c.color=new a.a("#81dbf5")}else if(h.detail&&h.detail.tagPicUrl&&h.detail.tagPicUrl.indexOf("yes_25.png")>0){h.detail.tagPicUrl=undefined;c.color=new a.a("#4497df")}else if(h.detail&&h.detail.tagPicUrl&&h.detail.tagPicUrl.indexOf("gif10_128x3200.png")>0){h.detail.tagPicUrl=undefined;c.color=new a.a("#05a155")}else if(h.detail&&h.detail.tagPicUrl&&h.detail.tagPicUrl.indexOf("guide-arrow.png")>0){}else{if(h.detail)h.detail.tagPicUrl=undefined}i[u]=c}catch(t){p.warn("Failed to parse tag: "+h.sid)}}return i}}var m=function(t){var e={};for(var n in t){var r=t[n],i={sid:r.sid,created:r.created,modified:new Date,enabled:r.enabled,label:r.label,description:r.description,color:Object(f.a)(r.color),position:Object(f.c)(r.anchorPosition),normal:Object(f.c)(r.anchorNormal),floor:r.floorIndex,stem:{direction:Object(f.c)(r.stemVector),enabled:r.stemVisible}};r.mediaType!==l.a.none&&(i.media={type:r.mediaType,src:r.mediaSrc}),e[r.sid]=i}return e}},function(t,e,n){"use strict";var r;n.d(e,"a",function(){return r}),function(t){t[t.NAVIGATION=0]="NAVIGATION",t[t.MODEL=1]="MODEL",t[t.EXT_LINK=2]="EXT_LINK"}(r=r||(r={}));var i;(i={})[r.NAVIGATION]="navigation",i[r.MODEL]="model",i[r.EXT_LINK]="ext-link"},function(t,e,n){"use strict";var r,i=n(11),o=n(53),s=n(14),a=n(102),u=n(37),h=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},c=function(){return function(){this.visible=!1}}(),f=function(t){function e(e){var n,r,i=t.call(this)||this;if(i.sweepList=new a.a,i.sweepMap={},e)try{for(var o=l(e),s=o.next();!s.done;s=o.next()){var u=s.value;i.sweepMap[u.id]=u,i.sweepList.push(u)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i.state={},i.transition={pending:!1,active:!1,from:void 0,to:void 0},i}return h(e,t),Object.defineProperty(e.prototype,"currentSweep",{get:function(){return this._currentSweep},set:function(t){var e=this;if(t){var n=this.getSweep(t);this.iterate(function(r){r.id!==t&&e.setVisible(r.id,-1!==n.neighbours.indexOf(r.id))}),this.setVisible(t,!1)}else this.iterate(function(t){e.setVisible(t.id,!1)});this._currentSweep=t},enumerable:!0,configurable:!0}),e.prototype.getState=function(t){var e=this.state[t];return e||((e=Object(u.a)(new c)).selected=Object(u.a)(new o.a(0)),e.visible=!1,this.state[t]=e),e},e.prototype.update=function(t){this.copy(t)},e.prototype.copy=function(t){var e=this,n=!1;if(this.sweepList.length===t.sweepList.length){n=!0;for(var r=0;r<this.sweepList.length;r++){var i=this.sweepList.get(r),o=t.sweepList.get(r);if(i.id!==o.id){n=!1;break}}}n||(this.sweepMap={},this.sweepList.length=0,this.state={},t.sweepList.forEach(function(t){e.addSweep(t)})),this.currentSweep=t.currentSweep,t.sweepList.forEach(function(n){var r=e.getState(n.id),i=t.getState(n.id);e.setVisible(n.id,i.visible),r.selected.copy(i.selected),r.visible=i.visible}),this.transition.pending=t.transition.pending,this.transition.active=t.transition.active,this.transition.to=t.transition.to,this.transition.from=t.transition.from},e.prototype.clone=function(){var t=new e;return t.copy(this),t},e.prototype.addSweep=function(t){this.containsSweep(t.id)||(this.sweepList.push(t),this.sweepMap[t.id]=t)},e.prototype.getSweep=function(t){return this.sweepMap[t]},e.prototype.containsSweep=function(t){return t in this.sweepMap},e.prototype.getFirstSweep=function(){for(var t=-1;++t<this.sweepList.length;){var e=this.sweepList.get(t);if(e.enabled)return e}throw new Error("First enabled sweep not found")},e.prototype.getClosestSweep=function(t,e){var n=Number.MAX_VALUE,r=null;return this.iterate(function(i){if(e&&i.alignmentType===s.a.ALIGNED){var o=t.distanceTo(i.position);o<n&&(n=o,r=i)}}),r},e.prototype.getFirstAlignedSweep=function(){for(var t=-1;++t<this.sweepList.length;){var e=this.sweepList.get(t);if(e.enabled&&e.alignmentType===s.a.ALIGNED)return e}return null},e.prototype.setTransitionPending=function(t){this.transition.pending=t},e.prototype.activateTransition=function(t,e){this.transition.active=!0,this.transition.from=e,this.transition.to=t},e.prototype.deactivateTransition=function(){this.transition.active=!1,this.transition.from=void 0,this.transition.to=void 0},e.prototype.setVisible=function(t,e){this.containsSweep(t)&&(this.getState(t).visible=e)},e.prototype.isSweepUnaliged=function(t){var e=this.getSweep(t);return!(!e||e.alignmentType===s.a.ALIGNED)},e.prototype.isVisible=function(t){return!!this.containsSweep(t)&&this.getState(t).visible},e.prototype.getSelected=function(t){return this.containsSweep(t)?this.getState(t).selected:null},e.prototype.iterate=function(t){this.sweepList.forEach(function(e){t(e)})},e.prototype.filter=function(t){return this.sweepList.filter(t)},e.prototype.sortByScore=function(t,e){for(var n=[],r=this.sweepList.length;r--;)n[r]=this.sweepList.get(r);return 0===(n=n.filter(function(e){return t.every(function(t){return t(e)})})).length?[]:n.map(function(t){return{sweep:t,score:e.reduce(function(e,n){return e+n(t)},0)}}).sort(function(t,e){return e.score-t.score})},e.prototype.getSweepList=function(){return this.sweepList.values()},e}(i.a);e.a=f},,function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.d(e,"a",function(){return d}),n.d(e,"b",function(){return y});var r=n(9),i=n(14),o=n(1),s=n(3),a=n(93),u=n(4),h=n(5),l=n(43),c=n(494),f=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},p=new u.a("sweeps"),d=function(t){if(this.path.indexOf(".dam")>0){var e='// Protocol Buffer for puck visibility and related data\n//\n// To dump out a binray manifest in text format, you can use protoc directly:\n//   protoc --proto_path ~/dev/mp_vision/  --decode=eos.storage.VisionModeldata ~/dev/mp_vision/eos/storage/vision_modeldata.proto < vision.modeldata\n\n// package eos.storage;\n\n// import "eos/infra/common.proto";\n// The following were manually extracted here, JS does not like protobuf imports\n\n//cd D:gocodescodesspyderZhonqumyproto\n//protoc --go_out=. vision.proto\n\nsyntax = "proto2";\n\nmessage Affine3f {\n\toptional Quaternionf rotation = 1;\n\toptional Vector3f translation = 2;\n}\n\nmessage Quaternionf {\n\toptional float w = 1;\n\toptional float x = 2;\n\toptional float y = 3;\n\toptional float z = 4;\n}\n\nmessage Vector3f {\n\toptional float x = 1;\n\toptional float y = 2;\n\toptional float z = 3;\n}\n\n//\n// One sweep / pano\n//\nmessage SweepLocation {\n\toptional string uuid = 1;  /* uuid */\n\toptional Affine3f pose = 2;  /* camera pose (x, y,z) in meter and a quaternion*/\n\toptional Vector3f puck = 3;  /* puck location - x any is generally the same as pose, z is the height of the closest floor under the camera */\n\toptional int32 group = 4;  /* floor index */\n\toptional int32 subgroup = 5;  /* room index */\n\trepeated int32 visibles = 6;  /* list of indices to all pucks visible from this puck */\n\trepeated float scores = 7; /* used as part of scoring function for determining which puck to go to next */\n  optional string sweep_name = 8;\n\n  // With outdoor panos, we have a couple of different situations for alignment. The common\n  // case is that the pano aligned normally. It could also have been placed manually in\n  // CaptureApp or Workshop, or left unaligned for highlight-reel viewing.\n  enum AlignmentType\n  {\n      UNKNOWN = 0;\n      ALIGNED = 1;\n      UNALIGNED = 2;\n      MANUALLY_PLACED = 3;\n  }\n  optional AlignmentType alignment_type = 9 [default = ALIGNED];\n  optional string pavilionMapId = 10;\n\n  optional bool isInside = 11;\n}\n\nmessage SubgroupInfo {\n\toptional int32 subgroup = 1;\n\toptional float area = 2; /* floor area in m^2 (square meterage) */\n}\n\n/* All pucks in a model. Pucks are stored in scanning order. */\nmessage VisionModeldata {\n\trepeated SweepLocation sweepLocations = 1;\n\trepeated SubgroupInfo subgroupInfos = 2;\n}\n';var n=c.loadProto(e);var u=n.build("VisionModeldata");t=u.decode(t);t=t.sweepLocations}if(SCENE_CONFIG.type==1){t=t.locations.points}if(!t||Object.keys(t).length<1)return{};var d,y,m,g,v={};try{try{if(this.path.indexOf(".dam")>0){t.map(function(t){t.id=t.uuid})}else{for(var b=f(t),w=b.next();!w.done;w=b.next()){if(SCENE_CONFIG.type==1){(x=w.value).id=x.locationid;(x=w.value).neighbors=x.vps;(x=w.value).floor_index=x.flooridx;(x=w.value).room_index=x.roomidx}else{(x=w.value).id=x.sweep_uuid.replace(/-/g,"")}}}}catch(t){d={error:t}}finally{try{w&&!w.done&&(y=b.return)&&y.call(b)}finally{if(d)throw d.error}}try{if(this.path.indexOf(".dam")>0){t.map(function(e,n){if(undefined==e.pose.rotation.w){var u=h.a.degToRad(e.pose.rotation.x);var c=h.a.degToRad(e.pose.rotation.y);var f=h.a.degToRad(e.pose.rotation.z);var p=new l.a(u,c,f,"XYZ");var d=new s.a;d.setFromEuler(p);e.pose.rotation.w=d.w;e.pose.rotation.x=d.x;e.pose.rotation.y=d.y;e.pose.rotation.z=d.z}var y={sweep_name:"sweep"+e.uuid,id:e.uuid,neighbors:e.visibles,index:n,floor_index:Number.parseInt(e.group,10),room_index:0,alignment_type:"aligned",rotation:new s.a(e.pose.rotation.x,e.pose.rotation.y,e.pose.rotation.z,e.pose.rotation.w),floor_position:new o.a(e.puck.x,e.puck.y,e.puck.z),position:new o.a(e.pose.translation.x,e.pose.translation.y,e.pose.translation.z),pavilionMapId:e.pavilionMapId,isInside:e.isInside,obj:e.obj};var m=y.neighbors.map(function(e){return t[e].uuid;var n=t.find(function(t){return t.index===e});return n?n.id:void 0}).filter(function(t){return void 0!==t});var g=Number.parseInt(y.floor_index,10);var b=Number.parseInt(y.room_index,10);var w="aligned";var E=i.b.AUTO;var _=y.rotation?Object(r.f)(y.rotation):new s.a;var x=y.position?Object(r.g)(y.position):new o.a;var O=y.floor_position?Object(r.g)(y.floor_position):new o.a;var S=y.sweep_name;var T=new i.c(y.id,y.index,{name:S,position:x,rotation:_,floorPosition:O,floor:isNaN(g)?-1:g,room:isNaN(b)?-1:b,enabled:true,vrenabled:true,alignmentType:w,placement:E,neighbours:m,pavilionMapId:y.pavilionMapId,isInside:y.isInside,obj:y.obj});var P=T.alignmentType===i.a.UNALIGNED;var I=T.placementType===i.b.MANUAL;var R=T.position.length()>a.a.epsilon;v[T.id]=T})}else{if(SCENE_CONFIG.type==1){t.map(function(e,n){var u={sweep_name:"sweep"+e.id,id:e.id,neighbors:e.vps,index:n,floor_index:Number.parseInt(e.flooridx==null?0:e.flooridx,10),room_index:0,alignment_type:"aligned",rotation:e.rotation,floor_position:e.spot,position:e.viewpoint};var h=u.neighbors.map(function(e){return t[e].id;var n=t.find(function(t){return t.index===e});return n?n.id:void 0}).filter(function(t){return void 0!==t});var l=Number.parseInt(u.floor_index,10);var c=Number.parseInt(u.room_index,10);var f="aligned";var p=i.b.AUTO;var d=u.rotation?Object(r.f)(u.rotation):new s.a;var y=u.position?Object(r.g)(u.position):new o.a;var m=u.floor_position?Object(r.g)(u.floor_position):new o.a;var g=u.sweep_name;var b=new i.c(u.id,u.index,{name:g,position:y,rotation:d,floorPosition:m,floor:isNaN(l)?-1:l,room:isNaN(c)?-1:c,enabled:true,vrenabled:true,alignmentType:f,placement:p,neighbours:h,pavilionMapId:u.pavilionMapId,isInside:u.isInside,obj:u.obj});var w=b.alignmentType===i.a.UNALIGNED;var E=b.placementType===i.b.MANUAL;var _=b.position.length()>a.a.epsilon;v[b.id]=b})}else{for(var E=f(t),_=E.next();!_.done;_=E.next()){var x,O=(x=_.value).neighbors.map(function(e){var n=t.find(function(t){return t.index===e});return n?n.id:void 0}).filter(function(t){return void 0!==t});var S=Number.parseInt(x.floor_index,10);var T=Number.parseInt(x.room_index,10);var P="string"==typeof x.alignment_type&&i.a.hasOwnProperty(x.alignment_type.toUpperCase())?x.alignment_type:i.a.UNALIGNED;var I="string"==typeof x.placement&&i.b.hasOwnProperty(x.placement.toUpperCase())?x.placement:i.b.UNPLACED;var R=x.rotation?Object(r.f)(x.rotation):new s.a,L=x.position?Object(r.g)(x.position):new o.a,A=x.floor_position?Object(r.g)(x.floor_position):new o.a,M=x.sweep_name;var k=true;var N=true;if(SCENE_CONFIG.type==1){k=x.enable;N=x.enable}else{k=-1!==x.tags.findIndex(function(t){return"showcase"===t});N=-1!==x.tags.findIndex(function(t){return"vr"===t})}var C=new i.c(x.id,x.index,{name:M,position:L,rotation:R,floorPosition:A,floor:isNaN(S)?-1:S,room:isNaN(T)?-1:T,enabled:k,vrenabled:N,alignmentType:P,placement:I,neighbours:O});var D=C.alignmentType===i.a.UNALIGNED;var z=C.placementType===i.b.MANUAL;var U=C.position.length()>a.a.epsilon;(D||z)&&U&&C.position.clampLength(0,100);v[C.id]=C}}}}catch(t){m={error:t}}finally{try{_&&!_.done&&(g=E.return)&&g.call(E)}finally{if(m)throw m.error}}}catch(t){p.error("Error reading sweeps list",t)}return v},y=function(t){var e=[];for(var n in t){var r=t[n],i=[];r.enabled&&(i.push("showcase"),r.vrenabled&&i.push("vr")),e.push({index:r.index,tags:i})}return e}},function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r,i=n(11),o=n(1),s=n(3),a=n(6),u=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),h=function(t){function e(){var e=t.call(this)||this;return e.lastInsidePosition=new o.a,e.lastInsideRotation=new s.a,e.currentMode=null,e.transition={active:!1,progress:0,from:null,to:null,startTime:0,transitionTime:0},e}return u(e,t),e.prototype.copyTransition=function(t){this.transition.active=t.active,this.transition.progress=t.progress,this.transition.from=t.from,this.transition.to=t.to,this.transition.startTime=t.startTime,this.transition.transitionTime=t.transitionTime},e.prototype.activateTransition=function(t,e,n){this.transition.active=!0,this.transition.progress=0,this.transition.startTime=Date.now(),this.transition.transitionTime=n,this.transition.to=e,this.transition.from=t},e.prototype.deactivateTransition=function(){this.transition.active=!1},e.prototype.update=function(t){this.copy(t)},e.prototype.clone=function(){var t=new e;return t.copy(this),t},e.prototype.copy=function(t){this.currentMode=t.currentMode,this.lastInsidePosition.copy(t.lastInsidePosition),this.lastInsideRotation.copy(t.lastInsideRotation),this.copyTransition(t.transition)},e.prototype.isPano=function(){return this.currentMode===a.a.Panorama},e}(i.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r,i=n(37),o=n(11),s=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(t){function e(){var e=t.call(this)||this;return e.properties=Object(i.a)({}),e}return s(e,t),e.prototype.update=function(t){this.copy(t)},e.prototype.clone=function(){var t=new e;return t.copy(this),t},e.prototype.copy=function(t){var e=t.properties.target();for(var n in e)"function"==typeof e[n].clone?this.setProperty(n,e[n].clone()):this.setProperty(n,e[n])},e.prototype.setProperty=function(t,e){null==e?this.properties[t]=e:this.properties[t]!==e&&(this.properties[t]=e)},e.prototype.hasProperty=function(t){return t in this.properties&&void 0!==this.properties[t]},e.prototype.tryGetProperty=function(t,e){return this.hasProperty(t)?this.getProperty(t):e},e.prototype.getProperty=function(t){if(this.hasProperty(t))return this.properties[t];throw new Error("SettingsData: "+t+" not found")},e.prototype.onPropertyChanged=function(t,e){this.properties.onPropertyChanged(t,e)},e.prototype.removeOnPropertyChanged=function(t,e){this.properties.removeOnPropertyChanged(t,e)},e.prototype.checkUrlParam=function(t,e,n){void 0===n&&(n=0);var r=this.tryGetProperty(t,n);return"number"==typeof r?r===e:parseInt(r,10)===e},e.prototype.iterate=function(t){for(var e in this.properties)t(e,this.properties[e])},e}(o.a)},,function(t,e,n){"use strict";function r(t,e,n,r){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==r?r:1}var i,o;n.d(e,"a",function(){return r}),r.prototype={constructor:r,isVector4:!0,set:function(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t,this.w*=t):(this.x=0,this.y=0,this.z=0,this.w=0),this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,r,i,o=t.elements,s=o[0],a=o[4],u=o[8],h=o[1],l=o[5],c=o[9],f=o[2],p=o[6],d=o[10];if(Math.abs(a-h)<.01&&Math.abs(u-f)<.01&&Math.abs(c-p)<.01){if(Math.abs(a+h)<.1&&Math.abs(u+f)<.1&&Math.abs(c+p)<.1&&Math.abs(s+l+d-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var y=(s+1)/2,m=(l+1)/2,g=(d+1)/2,v=(a+h)/4,b=(u+f)/4,w=(c+p)/4;return y>m&&y>g?y<.01?(n=0,r=.707106781,i=.707106781):(r=v/(n=Math.sqrt(y)),i=b/n):m>g?m<.01?(n=.707106781,r=0,i=.707106781):(n=v/(r=Math.sqrt(m)),i=w/r):g<.01?(n=.707106781,r=.707106781,i=0):(n=b/(i=Math.sqrt(g)),r=w/i),this.set(n,r,i,e),this}var E=Math.sqrt((p-c)*(p-c)+(u-f)*(u-f)+(h-a)*(h-a));return Math.abs(E)<.001&&(E=1),this.x=(p-c)/E,this.y=(u-f)/E,this.z=(h-a)/E,this.w=Math.acos((s+l+d-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(t,e){return void 0===i&&(i=new r,o=new r),i.set(t,t,t,t),o.set(e,e,e,e),this.clamp(i,o)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromAttribute:function(t,e,n){return void 0===n&&(n=0),e=e*t.itemSize+n,this.x=t.array[e],this.y=t.array[e+1],this.z=t.array[e+2],this.w=t.array[e+3],this}}},function(t,e,n){"use strict";var r=function(){function t(t){this._mask=t}return Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask},enumerable:!0,configurable:!0}),t.prototype.addLayers=function(t){this._mask|=t.mask},t.prototype.removeLayers=function(t){return this._mask&=~t.mask},t}(),i=function(){function t(){this.layerRegistry=[],this.unusedLayers=[];for(var t=1;t<32;t++)this.unusedLayers.push(t)}return Object.defineProperty(t,"ALL",{get:function(){return new r(-1)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"NONE",{get:function(){return new r(0)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DEFAULT",{get:function(){return new r(1)},enumerable:!0,configurable:!0}),t.prototype.claimLayer=function(t){try{return this.getLayer(t)}catch(n){if(0===this.unusedLayers.length)throw Error("All render layers have already been claimed");var e=this.unusedLayers[0];return this.layerRegistry[e]=t,this.unusedLayers.shift(),new r(1<<e)}},t.prototype.getLayer=function(t){var e=this.layerRegistry.indexOf(t);if(-1!==e)return new r(1<<e);throw Error("A render layer for "+t+" doesn't exist")},t.prototype.disposeLayer=function(t){var e=this.layerRegistry.indexOf(t);-1!==e&&this.unusedLayers.push(e)},t}();e.a=i},function(t,e,n){"use strict";n.r(e),n.d(e,"moveInDirectionInterface",function(){return r}),n.d(e,"panInterface",function(){return i}),n.d(e,"rotateInterface",function(){return o}),n.d(e,"rotateInDirectionInterface",function(){return s}),n.d(e,"moveToModeInterface",function(){return a}),n.d(e,"moveToPanoInterface",function(){return u}),n.d(e,"getPoseInterface",function(){return h}),n.d(e,"screenShotInterface",function(){return l});var r={version:"1.x",name:"moveInDirection",args:["direction"]},i={version:"1.x",name:"panCamera",args:["position"]},o={version:"1.x",name:"rotate",args:["xAngle","yAngle"]},s={version:"1.x",name:"rotateDirection",args:["direction","angle"]},a={version:"1.x",name:"moveToMode",args:["mode"]},u={version:"1.x",name:"moveToPano",args:["sweep","options"]},h={version:"1.1",name:"getPose",args:[]},l={version:"1.1",name:"takeScreenShot",args:["resolution","visibleObjects"]}},function(t,e,n){"use strict";n.d(e,"e",function(){return r}),n.d(e,"d",function(){return i}),n.d(e,"b",function(){return o}),n.d(e,"a",function(){return s}),n.d(e,"c",function(){return a});var r=function(t,e,n,r){return n*t/r+e},i=function(t,e,n,r){return-n*(t/=r)*(t-2)+e},o=function(t,e,n,r){return(t/=r/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},s=function(t,e,n,r){return n*(t/=r)*t*t+e},a=function(t,e,n,r){return t/=r,n*(--t*t*t+1)+e}},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,h=[],l=!1,c=-1;function f(){l&&u&&(l=!1,u.length?h=u.concat(h):c=-1,h.length&&p())}function p(){if(!l){var t=a(f);l=!0;for(var e=h.length;e;){for(u=h,h=[];++c<e;)u&&u[c].run();c=-1,e=h.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];h.push(new d(t,e)),1!==h.length||l||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";n.d(e,"c",function(){return s}),n.d(e,"a",function(){return a}),n.d(e,"d",function(){return u}),n.d(e,"b",function(){return h});var r,i=n(19),o=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(t){function e(e){var n=t.call(this)||this;return n.modelMesh=e,n}return o(e,t),e}(i.a),a=function(t){function e(e){var n=t.call(this)||this;return n.hitPoint=e,n}return o(e,t),e}(i.a),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(a),h=function(t){function e(e,n){var r=t.call(this)||this;return r.loaded=e,r.total=n,r}return o(e,t),e}(i.a)},function(t,e,n){"use strict";var r=n(131)();t.exports=function(t){return t!==r&&null!==t}},function(t,e,n){"use strict";n.d(e,"b",function(){return s}),n.d(e,"a",function(){return a});var r,i=n(11),o=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(t){function e(e){var n=t.call(this)||this;return n.options=new a(e),n.modified=new Date(0),n}return o(e,t),e.prototype.update=function(t){for(var e in t.options)this.options[e]=t.options[e];this.modified=new Date},e}(i.a),a=function(){return function(t){t&&(this.presented_by=!!t.presented_by,this.highlight_reel=!!t.highlight_reel,this.floor_plan=!!t.floor_plan,this.tour_buttons=!!t.tour_buttons,this.labels=!!t.labels,this.dollhouse=!!t.dollhouse,this.fast_transitions=!!t.fast_transitions,this.contact_email=!!t.contact_email,this.address=!!t.address,this.contact_name=!!t.contact_name,this.model_summary=!!t.model_summary,this.contact_phone=!!t.contact_phone,this.model_name=!!t.model_name,this.external_url=!!t.external_url,this.autoplay=!!t.autoplay)}}()},function(t,e,n){"use strict";n.d(e,"b",function(){return s}),n.d(e,"a",function(){return a});var r=n(5),i=n(43),o=n(3),s=function(t){var e=(new i.a).setFromQuaternion(t,"YXZ");return{x:r.a.radToDeg(e.x),y:r.a.radToDeg(e.y),z:r.a.radToDeg(e.z)}},a=function(t){var e=new i.a;return e.x=r.a.degToRad(t.x),e.y=r.a.degToRad(t.y),e.z=r.a.degToRad(t.z),e.order="YXZ",(new o.a).setFromEuler(e)}},function(t,e,n){"use strict";n.r(e),n.d(e,"eventsInterface",function(){return s}),n.d(e,"directionsInterface",function(){return a}),n.d(e,"modesInterface",function(){return u}),n.d(e,"transitionTypesInterface",function(){return h});var r=n(99),i=n(94),o=n(90),s={version:"1.x",namespace:"",name:"Events",values:n(62).a},a={version:"1.x",namespace:"",name:"Direction",values:r.a},u={version:"1.x",namespace:"",name:"Mode",values:i.a},h={version:"1.x",namespace:"",name:"Transition",values:o.b}},function(t,e,n){"use strict";var r,i=n(4),o=n(105),s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},a=new i.a("segment"),u=function(){function t(t){this.token=t}return t.prototype.init=function(t,e){this.options=t,this.context=e,this.token&&(window.analytics&&window.analytics.initialize&&(window.analytics=null),window.analytics||o(),window.analytics.load(this.token))},t.prototype.track=function(t,e){return;e=Object.assign(e||{},this.options);try{window.analytics.track(t,e,this.context),a.debug(t,e,this.context)}catch(e){a.error("Failed to send data to segment for "+t)}},t.prototype.trackAsync=function(t,e){if(e=e||{},navigator.sendBeacon)try{navigator.sendBeacon("https://api.segment.io/v1/t",JSON.stringify({event:t,anonymousId:window.analytics.user().anonymousId(),properties:s({data:e},this.options),writeKey:this.token,sentAt:Date.now(),type:"track",context:this.context}))}catch(t){a.error("Failed to send async segment request")}},t}();n.d(e,"a",function(){return r}),n.d(e,"b",function(){return l}),function(t){t[t.Segment=0]="Segment"}(r=r||(r={}));var h,l=((h={})[r.Segment]={class:u,keyName:"segment_key",windowProperty:"analytics"},h)},function(t,e,n){"use strict";n.d(e,"b",function(){return s}),n.d(e,"a",function(){return a});var r,i=n(47),o=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e}(i.a),a=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e}(i.a)},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return s});var r,i=n(32),o=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};!function(t){t[t.PERMANENT=0]="PERMANENT",t[t.ONCE=1]="ONCE"}(r=r||(r={}));var s=function(){function t(){this.typeLookup=new i.a,this.callbacks=[],this.messageQueue=[],this.messageCount=0}return t.prototype.subscribe=function(t,e,n){void 0===n&&(n=r.PERMANENT);var i=this.typeLookup.getIndexByType(t,!0);this.callbacks[i]||(this.callbacks[i]=[]),this.callbacks[i].push({type:n,callback:e})},t.prototype.unsubscribe=function(t,e){var n=this.typeLookup.getIndexByType(t);if(-1===n)throw Error("Message callback not bound for Type");this.unsubscribeByIndex(n,e)},t.prototype.unsubscribeByIndex=function(t,e){var n=this.callbacks[t].findIndex(function(t){return t.callback===e});if(-1===n)throw Error("Message callback not bound for Type");this.callbacks[t].splice(n,1)},t.prototype.broadcast=function(t){if(t.setID(this.messageCount++),this.messageQueue.push(t),1===this.messageQueue.length){try{for(var e=o(this.messageQueue),n=e.next();!n.done;n=e.next()){var i=n.value,s=this.typeLookup.getIndexByInstance(i);if(-1!==s){var a=this.callbacks[s].slice();try{for(var u=o(a),h=u.next();!h.done;h=u.next()){var l=h.value;l.callback(i),l.type===r.ONCE&&this.unsubscribeByIndex(s,l.callback)}}catch(t){p={error:t}}finally{try{h&&!h.done&&(d=u.return)&&d.call(u)}finally{if(p)throw p.error}}}}}catch(t){c={error:t}}finally{try{n&&!n.done&&(f=e.return)&&f.call(e)}finally{if(c)throw c.error}}this.messageQueue=[]}var c,f,p,d},t}()},function(t,e,n){"use strict";n(111);var r,i=n(4),o=n(8),s=n(20),a=n(0),u=n(18),h=n(54),l=n(38),c=n(16),f=n(59),p=n(68),d=n(57),y=n(1),m=n(3),g=n(9),v=n(6),b=n(43),w=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},E=new i.a("snapshot-serializer");!function(t){t.user="user",t.panorama="panorama",t.unaligned="unaligned",t.auto="auto"}(r||(r={}));var _=function(){return function(t,e,n,r,i,o,s,a,u,h,l,c){this.sid=t,this.metadata=e,this.thumbnailUrl=n,this.imageUrl=r,this.name=i,this.is360=o,this.category=s,this.height=a,this.width=u,this.modified=h,this.visionLabel=l,this.visionName=c}}(),x=function(t){var e={};if(!t||!t.images||t.images.length<1)return e;var n,r,i=t.images,o=t.icon;try{for(var s=w(Object.keys(i)),a=s.next();!a.done;a=s.next()){var u=a.value,h=O(i[u]);h&&(h.icon=h.sid===o,e[h.sid]=h)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return e},O=function(t){var e=null;if(!t)return e;if(!t.metadata||0===Object.keys(t.metadata).length)return E.warn("Image has no metadata: "+t.sid),e;var n=t.metadata;if("string"==typeof t.metadata)try{n=JSON.parse(t.metadata)}catch(e){return E.warn("Image metadata parse failed: "+t.sid),null}var r,i=-1;if("object"==typeof n.floor_visibility)for(var o=0;o<n.floor_visibility.length;o++)!0===n.floor_visibility[o]&&(i=o);try{if(n.camera_quaternion.x>Math.PI||n.camera_quaternion.y>Math.PI||n.camera_quaternion.w>Math.PI||n.camera_quaternion.z>Math.PI||undefined==n.camera_quaternion.w){var s=new b.a(n.camera_quaternion.x*Math.PI/180,n.camera_quaternion.y*Math.PI/180,n.camera_quaternion.z*Math.PI/180,"XYZ");var a=new m.a;n.camera_quaternion=a}r={camera_mode:Object(v.c)(n.camera_mode),camera_position:Object(g.j)(n.camera_position?n.camera_position:new y.a),camera_quaternion:Object(g.i)(n.camera_quaternion?n.camera_quaternion:new m.a),scan_id:n.scan_id,ortho_zoom:n.ortho_zoom,floor:i}}catch(e){return E.warn("Image metadata parse failed: ",t.sid,e),null}var u=t.name&&(!t.name.match(/^[0-9.]+_[0-9.]+$/)||"")&&t.name||"";return e=new _(t.sid,r,t.thumbnail_signed_src,t.signed_src,u,"unaligned"===t.category,t.category,t.height,t.width,new Date(Date.parse(t.modified)),t.vision_generated_label,t.vision_generated_name)},S=n(63),T=n(56),P=n(61),I=n(30),R=n(88),L=n(24),A=n(69),M=n(92),k=n(55),N=n(22),C=n(96),D=n(83),z=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})},U=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},j=new i.a("showcase"),B=window.MP_PREFETCHED_MODELDATA,V=B&&B.model?B.model:null,F=function(){function t(){var t=this;this.urlValues=u.k();this.modelUrls=Object(P.c)(this.urlValues.m||this.urlValues.model);this.storeQueue=new f.RequestQueue({retries:0});this.scanmodelStoreCache={data:V};this.modelUrl=this.modelUrls.urlBase+"/api/v1/player/models/"+this.modelUrls.sid,this.modelUrl=API_SERVER_HOST+"/scene-portal/api/player/models/"+this.modelUrls.sid+"/model.json",this.modelUrl=SCENE_CONFIG.modelUrl,this.mattertagParserOptions={model:this.modelUrls.sid,supportLinks:!this.urlValues.mls||"0"===this.urlValues.mls,keepLinkLabels:!0},this.quickstart="1"===this.urlValues.qs,this.tick=function(){t.vrDisplay?t.vrDisplay.requestAnimationFrame(t.tick):window.requestAnimationFrame(t.tick),t.engine.tick()}.bind(this)}return t.prototype.getManifest=function(){return[{type:a.K,promise:function(){return Promise.all([n.e(0),n.e(4),n.e(9),n.e(3),n.e(24)]).then(n.bind(null,736))}},{type:a.d,promise:function(){return Promise.all([n.e(0),n.e(4),n.e(9),n.e(3),n.e(24)]).then(n.bind(null,735))}},{type:a.a,promise:function(){return Promise.all([n.e(0),n.e(4),n.e(9),n.e(3),n.e(24)]).then(n.bind(null,688))}},{type:a.z,promise:function(){return Promise.resolve().then(n.bind(null,112))}},{type:a.n,promise:function(){return Promise.all([n.e(0),n.e(4),n.e(9),n.e(3),n.e(24)]).then(n.bind(null,697))}},{type:a.H,promise:function(){return Promise.all([n.e(0),n.e(4),n.e(9),n.e(3),n.e(24)]).then(n.bind(null,689))}},{type:a.c,promise:function(){return Promise.all([n.e(0),n.e(4),n.e(9),n.e(3),n.e(24)]).then(n.bind(null,734))}},{type:a.A,promise:function(){return Promise.all([n.e(0),n.e(4),n.e(9),n.e(3),n.e(24)]).then(n.bind(null,733))}},{type:a.T,promise:function(){return Promise.all([n.e(0),n.e(4),n.e(9),n.e(3),n.e(24)]).then(n.bind(null,701))}},{type:a.b,promise:function(){return Promise.all([n.e(0),n.e(4),n.e(9),n.e(3),n.e(24)]).then(n.bind(null,696))}},{type:a.Z,promise:function(){return Promise.all([n.e(0),n.e(4),n.e(9),n.e(3),n.e(24)]).then(n.bind(null,671))}},{type:a.Oa,promise:function(){return Promise.all([n.e(0),n.e(4),n.e(9),n.e(3),n.e(24)]).then(n.bind(null,700))}},{type:a.Ca,promise:function(){return Promise.all([n.e(0),n.e(4),n.e(9),n.e(3),n.e(24)]).then(n.bind(null,703))}},{type:a.Ba,promise:function(){return Promise.all([n.e(0),n.e(4),n.e(9),n.e(3),n.e(24)]).then(n.bind(null,672))}},{type:a.X,promise:function(){return Promise.all([n.e(0),n.e(4),n.e(9),n.e(3),n.e(24)]).then(n.bind(null,673))}},{type:a.G,promise:function(){return Promise.all([n.e(0),n.e(4),n.e(9),n.e(3),n.e(24)]).then(n.bind(null,732))}},{type:a.R,promise:function(){return Promise.all([n.e(0),n.e(4),n.e(9),n.e(3),n.e(24)]).then(n.bind(null,687))}},{type:a.I,promise:function(){return Promise.all([n.e(0),n.e(7),n.e(3),n.e(23)]).then(n.bind(null,702))}},{type:a.u,promise:function(){return Promise.all([n.e(0),n.e(7),n.e(3),n.e(23)]).then(n.bind(null,731))}},{type:a.w,promise:function(){return Promise.all([n.e(0),n.e(7),n.e(3),n.e(23)]).then(n.bind(null,730))}},{type:a.v,promise:function(){return Promise.all([n.e(0),n.e(7),n.e(3),n.e(23)]).then(n.bind(null,729))}},{type:a.Na,promise:function(){return Promise.all([n.e(0),n.e(7),n.e(3),n.e(23)]).then(n.bind(null,675))}},{type:a.Ka,promise:function(){return Promise.all([n.e(0),n.e(7),n.e(3),n.e(23)]).then(n.bind(null,728))}},{type:a.q,promise:function(){return Promise.all([n.e(0),n.e(7),n.e(3),n.e(23)]).then(n.bind(null,691))}},{type:a.t,promise:function(){return Promise.all([n.e(2),n.e(22)]).then(n.bind(null,682))}},{type:a.r,promise:function(){return n.e(21).then(n.bind(null,698))}},{type:a.e,promise:function(){return n.e(21).then(n.bind(null,727))}},{type:a.M,promise:function(){return n.e(21).then(n.bind(null,674))}},{type:a.x,promise:function(){return Promise.all([n.e(0),n.e(1),n.e(20)]).then(n.bind(null,726))}},{type:a.Fa,promise:function(){return Promise.all([n.e(0),n.e(1),n.e(20)]).then(n.bind(null,725))}},{type:a.m,promise:function(){return Promise.all([n.e(0),n.e(1),n.e(20)]).then(n.bind(null,690))}},{type:a.p,promise:function(){return Promise.all([n.e(0),n.e(1),n.e(20)]).then(n.bind(null,680))}},{type:a.Ra,promise:function(){return n.e(19).then(n.bind(null,679))}},{type:a.i,promise:function(){return Promise.all([n.e(0),n.e(1),n.e(20)]).then(n.bind(null,724))}},{type:a.j,promise:function(){return Promise.all([n.e(0),n.e(1),n.e(20)]).then(n.bind(null,678))}},{type:a.h,promise:function(){return Promise.all([n.e(0),n.e(1),n.e(20)]).then(n.bind(null,723))}},{type:a.y,promise:function(){return Promise.all([n.e(0),n.e(1),n.e(18)]).then(n.bind(null,722))}},{type:a.D,promise:function(){return Promise.all([n.e(0),n.e(17)]).then(n.bind(null,721))}},{type:a.Ha,promise:function(){return Promise.all([n.e(0),n.e(17)]).then(n.bind(null,676))}},{type:a.E,promise:function(){return Promise.all([n.e(0),n.e(17)]).then(n.bind(null,699))}},{type:a.C,promise:function(){return Promise.all([n.e(0),n.e(17)]).then(n.bind(null,720))}},{type:a.W,promise:function(){return n.e(16).then(n.bind(null,719))}},{type:a.V,promise:function(){return n.e(16).then(n.bind(null,718))}},{type:a.L,promise:function(){return n.e(16).then(n.bind(null,717))}},{type:a.Da,promise:function(){return n.e(16).then(n.bind(null,693))}},{type:a.Ia,promise:function(){return n.e(16).then(n.bind(null,677))}},{type:a.P,promise:function(){return Promise.all([n.e(0),n.e(4),n.e(9),n.e(3),n.e(24)]).then(n.bind(null,683))}},{type:a.Qa,promise:function(){return n.e(15).then(n.bind(null,716))}},{type:a.Q,promise:function(){return Promise.all([n.e(0),n.e(1),n.e(18)]).then(n.bind(null,715))}},{type:a.O,promise:function(){return Promise.all([n.e(0),n.e(14)]).then(n.bind(null,681))}},{type:a.N,promise:function(){return Promise.all([n.e(0),n.e(14)]).then(n.bind(null,692))}},{type:a.Ea,promise:function(){return Promise.all([n.e(0),n.e(14)]).then(n.bind(null,714))}},{type:a.S,promise:function(){return Promise.all([n.e(0),n.e(14)]).then(n.bind(null,713))}},{type:a.Pa,promise:function(){return Promise.all([n.e(0),n.e(4),n.e(1),n.e(13)]).then(n.bind(null,694))}},{type:a.Ga,promise:function(){return Promise.all([n.e(0),n.e(4),n.e(1),n.e(13)]).then(n.bind(null,712))}},{type:a.B,promise:function(){return Promise.all([n.e(0),n.e(4),n.e(1),n.e(13)]).then(n.bind(null,711))}},{type:a.k,promise:function(){return Promise.all([n.e(0),n.e(4),n.e(1),n.e(13)]).then(n.bind(null,695))}},{type:a.La,promise:function(){return Promise.all([n.e(0),n.e(4),n.e(1),n.e(13)]).then(n.bind(null,684))}},{type:a.f,promise:function(){return Promise.all([n.e(0),n.e(4),n.e(1),n.e(13)]).then(n.bind(null,685))}},{type:a.F,promise:function(){return Promise.all([n.e(0),n.e(4),n.e(1),n.e(13)]).then(n.bind(null,686))}},{type:a.U,promise:function(){return Promise.all([n.e(0),n.e(1),n.e(18)]).then(n.bind(null,710))}},{type:a.J,promise:function(){return Promise.all([n.e(0),n.e(1),n.e(18)]).then(n.bind(null,709))}},{type:a.Ma,promise:function(){return Promise.all([n.e(0),n.e(1),n.e(18)]).then(n.bind(null,708))}},{type:a.g,promise:function(){return Promise.all([n.e(0),n.e(12)]).then(n.bind(null,670))}}]},t.prototype.load=function(t,e){return z(this,void 0,void 0,function(){var r,f,y,m,g,b,w,E,_,O,P,B,V,F,H,q,G,Y,W,K,Z,X,$,Q,J,tt,et,nt,rt=this;return U(this,function(it){switch(it.label){case 0:return t.waitForModule(s.default).then(function(t){t.updateActiveApp(o.b.SHOWCASE)}),t.market.onDataUpdate(o.c,function(e){return z(rt,void 0,void 0,function(){var n,r;return U(this,function(i){switch(i.label){case 0:return e.phase!==o.a.ERROR?[3,2]:(n=e.error,[4,t.waitForModule(a.n)]);case 1:throw r=i.sent(),n instanceof D.b?r.showError(a.o.UNSUPPORTED):n instanceof D.a?r.showError(a.o.WEBGL):r.showError(a.o.GENERIC),n;case 2:return[2]}})})}),Promise.all([t.waitForModule(a.t),Promise.all([n.e(2),n.e(6),n.e(5),n.e(11)]).then(n.bind(null,706))]).then(function(t){t[0].loadUi(t[1].initShowcaseUi)}),e?(this.engine=t,j.info("Showcase app version: 3.0.3.82-0-ge8c0dfde1"),this.canvas=document.createElement("canvas"),this.canvas.getContext("webgl"),this.canvas.className="webgl-canvas",this.canvas.style.height="0",document.body.appendChild(this.canvas),r=parseInt(this.urlValues.log,10),this.urlValues.hasOwnProperty("log")&&!isNaN(r)&&(i.a.level=r),this.quickstart&&j.info("Quickstart engaged. Hold on to your knickers. "+performance.now()),[4,t.getModule(I.default)]):[2];case 1:for(g in f=it.sent(),y={sid:this.modelUrls.sid,quickstart:this.quickstart,lang:this.urlValues.lang,perf:this.urlValues.perf,perfInterval:this.urlValues.perfInterval},m="/api/v1/jsonstore/model/",y)y[g]&&f.registerSetting("Showcase Config",g,y[g]);t.waitForModule(l.default).then(function(e){e.enableHandshaking(),n.e(10).then(n.bind(null,705)).then(function(n){n.bindSdkInterface(t,t.commandBinder,e),e.acceptConnections()})}),b={data:null},w=this.modelUrls.urlBase+"/api/v2/models/"+this.modelUrls.sid+"/sweeps?tag=showcase",w=SCENE_CONFIG.visions;E=new c.b(this.storeQueue,w,p.a,b);if(w.indexOf(".dam")>0)E.options.responseType="arraybuffer";_=new N.b({publishStore:E},t),O=new c.b(this.storeQueue,this.modelUrl,x,this.scanmodelStoreCache),P=new N.b({publishStore:O},t),B=new c.b(this.storeQueue,this.modelUrl,h.a,this.scanmodelStoreCache),V=new N.c({publishStore:B},t),F=new c.b(this.storeQueue,this.modelUrl,function(t){return t},this.scanmodelStoreCache),this.loadInitialModules(O,V,F),t.waitForModule(a.z),this.loadModules([{type:a.b},{type:a.Z,config:{sweepSync:_}},{type:a.Oa}]),H=t.getModuleSync(s.default);return[4,t.waitForLoadingModules()];case 2:return it.sent(),H.updateAppPhase(o.a.LOADING),[4,F.read()];case 3:q=it.sent();if(SCENE_CONFIG.type!=1){document.title=q.name}return[4,t.getModule(a.c)];case 4:G=it.sent().getStartPose();!this.quickstart||G&&G.mode===v.a.Panorama||(j.warn("Disabling quickstart. No panorama start position."),this.quickstart=!1,f.updateSetting("quickstart",!1));var ot="0"!==this.urlValues.tiles;if(SCENE_CONFIG.type==1&&!q.basic.model.multiple){ot=false}return ot?[3,6]:[4,this.loadModules([{type:a.Ba}])];case 5:return it.sent(),[3,8];case 6:return[4,this.loadModules([{type:a.Ca}])];case 7:it.sent(),it.label=8;case 8:return[4,this.loadModules([{type:a.X},{type:a.G},{type:a.R}])];case 9:return it.sent(),this.quickstart&&(this.loadPanoControls(),window.requestAnimationFrame(this.tick)),this.loadModules([{type:a.w}]),[4,t.waitForModule(a.z)];case 10:it.sent(),this.loadModules([{type:a.I,config:{renderMeshGeometry:!0,combineFloors:"0"!==this.urlValues.f,minimalMemoryMode:u.j()||"1"===this.urlValues.m3}},{type:a.u},{type:a.v},{type:a.Na,config:{startingMode:this.quickstart?v.a.Panorama:null}},{type:a.Ka},{type:a.q}]),this.loadModules([{type:a.t,config:{sid:this.modelUrls.sid}}]),this.quickstart||this.tick(),navigator.getVRDisplays&&M.c().then(function(t){t&&(rt.vrDisplay=t)}),this.quickstart||this.loadPanoControls(),this.loadModules([{type:a.x},{type:a.Fa,config:{checkRenderModes:function(){try{var e=t.market.tryGetData(C.a);if(!e||e.isTourActive())return!1;var n=t.market.tryGetData(R.a),r=t.market.tryGetData(A.a),i=[v.a.Panorama],o=[L.b.Desktop,L.b.Mobile];return r&&n&&-1!==o.indexOf(n.mode)&&r.currentMode&&-1!==i.indexOf(r.currentMode)}catch(t){return j.debug(t),!1}}}},{type:a.m},{type:a.p},{type:a.Ra,config:{enabled:"1"!==this.urlValues.nozoom}}]),u.j()||this.loadModules([{type:a.i},{type:a.j},{type:a.h}]),Y=""+this.modelUrls.urlBase+m+"labels/"+this.modelUrls.sid+".json",W=new c.b(this.storeQueue,Y,T.a),K=new N.a({publishStore:W},t),Z=new c.b(this.storeQueue,this.modelUrl,k.a,this.scanmodelStoreCache),X=new N.c({publishStore:Z},t),$=""+this.modelUrls.urlBase+m+"mattertags/"+this.modelUrls.sid;if(SCENE_CONFIG.type==0){$=IMAGE_SERVER+"/tags/"+this.modelUrls.sid+".dam"}else if(SCENE_CONFIG.type==1){$=SCENE_CONFIG.modelUrl}else if(SCENE_CONFIG.type==2){$="https://my.matterportvr.cn"+m+"mattertags/"+this.modelUrls.sid}Q=new c.b(this.storeQueue,$,Object(S.a)(this.mattertagParserOptions,!0));if(w.indexOf(".dam")>0)Q.options.responseType="arraybuffer";J=new N.b({publishStore:Q},t),this.loadModules([{type:a.D,config:{tagSync:J}},{type:a.Ha},{type:a.E},{type:a.C},{type:a.V,config:{optionsSync:X,modelDetailsStore:F}}]),tt=""+this.modelUrls.urlBase+m+"highlights/"+this.modelUrls.sid,tt=(undefined==RES_URL?"":RES_URL)+"js/dummy.json",et=new c.b(this.storeQueue,tt,d.a),nt=new N.c({publishStore:et},t),this.loadModules([{type:a.W},{type:a.L,config:{enableWheel:"1"===this.urlValues.nozoom}},{type:a.Da},{type:a.Ia,config:{snapshotsSync:P,activeReelSync:nt}},{type:a.P}]),this.loadModules([{type:a.O},{type:a.N},{type:a.Ea}]),this.loadModules([{type:a.S}]),this.loadModules([{type:a.Qa}]),this.loadModules([{type:a.Q}]),this.loadModules([{type:a.U},{type:a.J},{type:a.Ma},{type:a.g}]);return[2]}})})},t.prototype.unload=function(t){return z(this,void 0,void 0,function(){return U(this,function(t){return[2]})})},t.prototype.loadInitialModules=function(t,e,n){this.loadModules([{type:a.T},{type:a.K},{type:a.d,config:{canvas:this.canvas}},{type:a.a,config:{prefetchedData:window.MP_PREFETCHED_MODELDATA,baseUrl:this.modelUrls.urlBase}},{type:a.z,config:{modelDetailsStore:n,sid:this.modelUrls.sid,baseUrl:this.modelUrls.urlBase,quickstart:this.quickstart,autoplay:"1"===this.urlValues.play||!u.d(),startNewTab:"1"===this.urlValues.nt,hideTitle:"0"===this.urlValues.title||"2"===this.urlValues.title,hideBranding:"1"===this.urlValues.mls||"2"===this.urlValues.mls||"0"===this.urlValues.brand}},{type:a.n,config:{}},{type:a.c,config:{snapshotsStore:t,cameraStartSync:e,startOverride:this.urlValues.start,start:{panoId:this.urlValues.start,x:this.urlValues.x?parseFloat(this.urlValues.x):0,y:this.urlValues.y?parseFloat(this.urlValues.y):0,z:this.urlValues.z?parseFloat(this.urlValues.z):0,w:this.urlValues.w?parseFloat(this.urlValues.w):1}}},{type:a.H,config:{modelDetailsStore:n,sid:this.modelUrls.sid}},{type:a.A}])},t.prototype.loadPanoControls=function(){this.loadModules([{type:a.e},{type:a.M},{type:a.r,config:{enableWheel:"0"!==this.urlValues.wh}}])},t.prototype.loadModules=function(t){var e=t.map(function(t){return{type:t.type,config:t.config}});return this.engine.loadModules(e)},t}();e.a=F},function(t,e,n){(function(n){var r;e=t.exports=K,r="object"==typeof n&&n.env&&n.env.NODE_DEBUG&&/\bsemver\b/i.test(n.env.NODE_DEBUG)?function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("SEMVER"),console.log.apply(console,t)}:function(){},e.SEMVER_SPEC_VERSION="2.0.0";var i=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,s=e.re=[],a=e.src=[],u=0,h=u++;a[h]="0|[1-9]\\d*";var l=u++;a[l]="[0-9]+";var c=u++;a[c]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=u++;a[f]="("+a[h]+")\\.("+a[h]+")\\.("+a[h]+")";var p=u++;a[p]="("+a[l]+")\\.("+a[l]+")\\.("+a[l]+")";var d=u++;a[d]="(?:"+a[h]+"|"+a[c]+")";var y=u++;a[y]="(?:"+a[l]+"|"+a[c]+")";var m=u++;a[m]="(?:-("+a[d]+"(?:\\."+a[d]+")*))";var g=u++;a[g]="(?:-?("+a[y]+"(?:\\."+a[y]+")*))";var v=u++;a[v]="[0-9A-Za-z-]+";var b=u++;a[b]="(?:\\+("+a[v]+"(?:\\."+a[v]+")*))";var w=u++,E="v?"+a[f]+a[m]+"?"+a[b]+"?";a[w]="^"+E+"$";var _="[v=\\s]*"+a[p]+a[g]+"?"+a[b]+"?",x=u++;a[x]="^"+_+"$";var O=u++;a[O]="((?:<|>)?=?)";var S=u++;a[S]=a[l]+"|x|X|\\*";var T=u++;a[T]=a[h]+"|x|X|\\*";var P=u++;a[P]="[v=\\s]*("+a[T]+")(?:\\.("+a[T]+")(?:\\.("+a[T]+")(?:"+a[m]+")?"+a[b]+"?)?)?";var I=u++;a[I]="[v=\\s]*("+a[S]+")(?:\\.("+a[S]+")(?:\\.("+a[S]+")(?:"+a[g]+")?"+a[b]+"?)?)?";var R=u++;a[R]="^"+a[O]+"\\s*"+a[P]+"$";var L=u++;a[L]="^"+a[O]+"\\s*"+a[I]+"$";var A=u++;a[A]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var M=u++;a[M]="(?:~>?)";var k=u++;a[k]="(\\s*)"+a[M]+"\\s+",s[k]=new RegExp(a[k],"g");var N=u++;a[N]="^"+a[M]+a[P]+"$";var C=u++;a[C]="^"+a[M]+a[I]+"$";var D=u++;a[D]="(?:\\^)";var z=u++;a[z]="(\\s*)"+a[D]+"\\s+",s[z]=new RegExp(a[z],"g");var U=u++;a[U]="^"+a[D]+a[P]+"$";var j=u++;a[j]="^"+a[D]+a[I]+"$";var B=u++;a[B]="^"+a[O]+"\\s*("+_+")$|^$";var V=u++;a[V]="^"+a[O]+"\\s*("+E+")$|^$";var F=u++;a[F]="(\\s*)"+a[O]+"\\s*("+_+"|"+a[P]+")",s[F]=new RegExp(a[F],"g");var H=u++;a[H]="^\\s*("+a[P]+")\\s+-\\s+("+a[P]+")\\s*$";var q=u++;a[q]="^\\s*("+a[I]+")\\s+-\\s+("+a[I]+")\\s*$";var G=u++;a[G]="(<|>)?=?\\s*\\*";for(var Y=0;Y<35;Y++)r(Y,a[Y]),s[Y]||(s[Y]=new RegExp(a[Y]));function W(t,e){if(t instanceof K)return t;if("string"!=typeof t)return null;if(t.length>i)return null;if(!(e?s[x]:s[w]).test(t))return null;try{return new K(t,e)}catch(t){return null}}function K(t,e){if(t instanceof K){if(t.loose===e)return t;t=t.version}else if("string"!=typeof t)throw new TypeError("Invalid Version: "+t);if(t.length>i)throw new TypeError("version is longer than "+i+" characters");if(!(this instanceof K))return new K(t,e);r("SemVer",t,e),this.loose=e;var n=t.trim().match(e?s[x]:s[w]);if(!n)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(function(t){if(/^[0-9]+$/.test(t)){var e=+t;if(e>=0&&e<o)return e}return t}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}e.parse=W,e.valid=function(t,e){var n=W(t,e);return n?n.version:null},e.clean=function(t,e){var n=W(t.trim().replace(/^[=v]+/,""),e);return n?n.version:null},e.SemVer=K,K.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},K.prototype.toString=function(){return this.version},K.prototype.compare=function(t){return r("SemVer.compare",this.version,this.loose,t),t instanceof K||(t=new K(t,this.loose)),this.compareMain(t)||this.comparePre(t)},K.prototype.compareMain=function(t){return t instanceof K||(t=new K(t,this.loose)),X(this.major,t.major)||X(this.minor,t.minor)||X(this.patch,t.patch)},K.prototype.comparePre=function(t){if(t instanceof K||(t=new K(t,this.loose)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var e=0;do{var n=this.prerelease[e],i=t.prerelease[e];if(r("prerelease compare",e,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return X(n,i)}while(++e)},K.prototype.inc=function(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",e),this.inc("pre",e);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+t)}return this.format(),this.raw=this.version,this},e.inc=function(t,e,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new K(t,n).inc(e,r).version}catch(t){return null}},e.diff=function(t,e){if(tt(t,e))return null;var n=W(t),r=W(e);if(n.prerelease.length||r.prerelease.length){for(var i in n)if(("major"===i||"minor"===i||"patch"===i)&&n[i]!==r[i])return"pre"+i;return"prerelease"}for(var i in n)if(("major"===i||"minor"===i||"patch"===i)&&n[i]!==r[i])return i},e.compareIdentifiers=X;var Z=/^[0-9]+$/;function X(t,e){var n=Z.test(t),r=Z.test(e);return n&&r&&(t=+t,e=+e),n&&!r?-1:r&&!n?1:t<e?-1:t>e?1:0}function $(t,e,n){return new K(t,n).compare(new K(e,n))}function Q(t,e,n){return $(t,e,n)>0}function J(t,e,n){return $(t,e,n)<0}function tt(t,e,n){return 0===$(t,e,n)}function et(t,e,n){return 0!==$(t,e,n)}function nt(t,e,n){return $(t,e,n)>=0}function rt(t,e,n){return $(t,e,n)<=0}function it(t,e,n,r){var i;switch(e){case"===":"object"==typeof t&&(t=t.version),"object"==typeof n&&(n=n.version),i=t===n;break;case"!==":"object"==typeof t&&(t=t.version),"object"==typeof n&&(n=n.version),i=t!==n;break;case"":case"=":case"==":i=tt(t,n,r);break;case"!=":i=et(t,n,r);break;case">":i=Q(t,n,r);break;case">=":i=nt(t,n,r);break;case"<":i=J(t,n,r);break;case"<=":i=rt(t,n,r);break;default:throw new TypeError("Invalid operator: "+e)}return i}function ot(t,e){if(t instanceof ot){if(t.loose===e)return t;t=t.value}if(!(this instanceof ot))return new ot(t,e);r("comparator",t,e),this.loose=e,this.parse(t),this.semver===st?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}e.rcompareIdentifiers=function(t,e){return X(e,t)},e.major=function(t,e){return new K(t,e).major},e.minor=function(t,e){return new K(t,e).minor},e.patch=function(t,e){return new K(t,e).patch},e.compare=$,e.compareLoose=function(t,e){return $(t,e,!0)},e.rcompare=function(t,e,n){return $(e,t,n)},e.sort=function(t,n){return t.sort(function(t,r){return e.compare(t,r,n)})},e.rsort=function(t,n){return t.sort(function(t,r){return e.rcompare(t,r,n)})},e.gt=Q,e.lt=J,e.eq=tt,e.neq=et,e.gte=nt,e.lte=rt,e.cmp=it,e.Comparator=ot;var st={};function at(t,e){if(t instanceof at)return t.loose===e?t:new at(t.raw,e);if(t instanceof ot)return new at(t.value,e);if(!(this instanceof at))return new at(t,e);if(this.loose=e,this.raw=t,this.set=t.split(/\s*\|\|\s*/).map(function(t){return this.parseRange(t.trim())},this).filter(function(t){return t.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+t);this.format()}function ut(t){return!t||"x"===t.toLowerCase()||"*"===t}function ht(t,e,n,r,i,o,s,a,u,h,l,c,f){return((e=ut(n)?"":ut(r)?">="+n+".0.0":ut(i)?">="+n+"."+r+".0":">="+e)+" "+(a=ut(u)?"":ut(h)?"<"+(+u+1)+".0.0":ut(l)?"<"+u+"."+(+h+1)+".0":c?"<="+u+"."+h+"."+l+"-"+c:"<="+a)).trim()}function lt(t,e){for(var n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length){for(n=0;n<t.length;n++)if(r(t[n].semver),t[n].semver!==st&&t[n].semver.prerelease.length>0){var i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}function ct(t,e,n){try{e=new at(e,n)}catch(t){return!1}return e.test(t)}function ft(t,e,n,r){var i,o,s,a,u;switch(t=new K(t,r),e=new at(e,r),n){case">":i=Q,o=rt,s=J,a=">",u=">=";break;case"<":i=J,o=nt,s=Q,a="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ct(t,e,r))return!1;for(var h=0;h<e.set.length;++h){var l=e.set[h],c=null,f=null;if(l.forEach(function(t){t.semver===st&&(t=new ot(">=0.0.0")),c=c||t,f=f||t,i(t.semver,c.semver,r)?c=t:s(t.semver,f.semver,r)&&(f=t)}),c.operator===a||c.operator===u)return!1;if((!f.operator||f.operator===a)&&o(t,f.semver))return!1;if(f.operator===u&&s(t,f.semver))return!1}return!0}ot.prototype.parse=function(t){var e=this.loose?s[B]:s[V],n=t.match(e);if(!n)throw new TypeError("Invalid comparator: "+t);this.operator=n[1],"="===this.operator&&(this.operator=""),n[2]?this.semver=new K(n[2],this.loose):this.semver=st},ot.prototype.toString=function(){return this.value},ot.prototype.test=function(t){return r("Comparator.test",t,this.loose),this.semver===st||("string"==typeof t&&(t=new K(t,this.loose)),it(t,this.operator,this.semver,this.loose))},ot.prototype.intersects=function(t,e){if(!(t instanceof ot))throw new TypeError("a Comparator is required");var n;if(""===this.operator)return n=new at(t.value,e),ct(this.value,n,e);if(""===t.operator)return n=new at(this.value,e),ct(t.semver,n,e);var r=!(">="!==this.operator&&">"!==this.operator||">="!==t.operator&&">"!==t.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==t.operator&&"<"!==t.operator),o=this.semver.version===t.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==t.operator&&"<="!==t.operator),a=it(this.semver,"<",t.semver,e)&&(">="===this.operator||">"===this.operator)&&("<="===t.operator||"<"===t.operator),u=it(this.semver,">",t.semver,e)&&("<="===this.operator||"<"===this.operator)&&(">="===t.operator||">"===t.operator);return r||i||o&&s||a||u},e.Range=at,at.prototype.format=function(){return this.range=this.set.map(function(t){return t.join(" ").trim()}).join("||").trim(),this.range},at.prototype.toString=function(){return this.range},at.prototype.parseRange=function(t){var e=this.loose;t=t.trim(),r("range",t,e);var n=e?s[q]:s[H];t=t.replace(n,ht),r("hyphen replace",t),t=t.replace(s[F],"$1$2$3"),r("comparator trim",t,s[F]),t=(t=(t=t.replace(s[k],"$1~")).replace(s[z],"$1^")).split(/\s+/).join(" ");var i=e?s[B]:s[V],o=t.split(" ").map(function(t){return function(t,e){return r("comp",t),t=function(t,e){return t.trim().split(/\s+/).map(function(t){return function(t,e){r("caret",t,e);var n=e?s[j]:s[U];return t.replace(n,function(e,n,i,o,s){var a;return r("caret",t,e,n,i,o,s),ut(n)?a="":ut(i)?a=">="+n+".0.0 <"+(+n+1)+".0.0":ut(o)?a="0"===n?">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":">="+n+"."+i+".0 <"+(+n+1)+".0.0":s?(r("replaceCaret pr",s),"-"!==s.charAt(0)&&(s="-"+s),a="0"===n?"0"===i?">="+n+"."+i+"."+o+s+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+s+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+s+" <"+(+n+1)+".0.0"):(r("no pr"),a="0"===n?"0"===i?">="+n+"."+i+"."+o+" <"+n+"."+i+"."+(+o+1):">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0":">="+n+"."+i+"."+o+" <"+(+n+1)+".0.0"),r("caret return",a),a})}(t,e)}).join(" ")}(t,e),r("caret",t),t=function(t,e){return t.trim().split(/\s+/).map(function(t){return function(t,e){var n=e?s[C]:s[N];return t.replace(n,function(e,n,i,o,s){var a;return r("tilde",t,e,n,i,o,s),ut(n)?a="":ut(i)?a=">="+n+".0.0 <"+(+n+1)+".0.0":ut(o)?a=">="+n+"."+i+".0 <"+n+"."+(+i+1)+".0":s?(r("replaceTilde pr",s),"-"!==s.charAt(0)&&(s="-"+s),a=">="+n+"."+i+"."+o+s+" <"+n+"."+(+i+1)+".0"):a=">="+n+"."+i+"."+o+" <"+n+"."+(+i+1)+".0",r("tilde return",a),a})}(t,e)}).join(" ")}(t,e),r("tildes",t),t=function(t,e){return r("replaceXRanges",t,e),t.split(/\s+/).map(function(t){return function(t,e){t=t.trim();var n=e?s[L]:s[R];return t.replace(n,function(e,n,i,o,s,a){r("xRange",t,e,n,i,o,s,a);var u=ut(i),h=u||ut(o),l=h||ut(s),c=l;return"="===n&&c&&(n=""),u?e=">"===n||"<"===n?"<0.0.0":"*":n&&c?(h&&(o=0),l&&(s=0),">"===n?(n=">=",h?(i=+i+1,o=0,s=0):l&&(o=+o+1,s=0)):"<="===n&&(n="<",h?i=+i+1:o=+o+1),e=n+i+"."+o+"."+s):h?e=">="+i+".0.0 <"+(+i+1)+".0.0":l&&(e=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"),r("xRange return",e),e})}(t,e)}).join(" ")}(t,e),r("xrange",t),t=function(t,e){return r("replaceStars",t,e),t.trim().replace(s[G],"")}(t,e),r("stars",t),t}(t,e)}).join(" ").split(/\s+/);return this.loose&&(o=o.filter(function(t){return!!t.match(i)})),o=o.map(function(t){return new ot(t,e)})},at.prototype.intersects=function(t,e){if(!(t instanceof at))throw new TypeError("a Range is required");return this.set.some(function(n){return n.every(function(n){return t.set.some(function(t){return t.every(function(t){return n.intersects(t,e)})})})})},e.toComparators=function(t,e){return new at(t,e).set.map(function(t){return t.map(function(t){return t.value}).join(" ").trim().split(" ")})},at.prototype.test=function(t){if(!t)return!1;"string"==typeof t&&(t=new K(t,this.loose));for(var e=0;e<this.set.length;e++)if(lt(this.set[e],t))return!0;return!1},e.satisfies=ct,e.maxSatisfying=function(t,e,n){var r=null,i=null;try{var o=new at(e,n)}catch(t){return null}return t.forEach(function(t){o.test(t)&&(r&&-1!==i.compare(t)||(i=new K(r=t,n)))}),r},e.minSatisfying=function(t,e,n){var r=null,i=null;try{var o=new at(e,n)}catch(t){return null}return t.forEach(function(t){o.test(t)&&(r&&1!==i.compare(t)||(i=new K(r=t,n)))}),r},e.validRange=function(t,e){try{return new at(t,e).range||"*"}catch(t){return null}},e.ltr=function(t,e,n){return ft(t,e,"<",n)},e.gtr=function(t,e,n){return ft(t,e,">",n)},e.outside=ft,e.prerelease=function(t,e){var n=W(t,e);return n&&n.prerelease.length?n.prerelease:null},e.intersects=function(t,e,n){return t=new at(t,n),e=new at(e,n),t.intersects(e)},e.coerce=function(t){if(t instanceof K)return t;if("string"!=typeof t)return null;var e=t.match(s[A]);return null==e?null:W((e[1]||"0")+"."+(e[2]||"0")+"."+(e[3]||"0"))}}).call(this,n(76))},,function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r,i=n(11),o=n(24),s=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mode=o.b.Desktop,e.source=o.a.None,e}return s(e,t),e.prototype.update=function(t){this.mode=t.mode,this.source=t.source},e.prototype.hasController=function(){return this.mode===o.b.VrWithController||this.mode===o.b.VrWithTrackedController},e.prototype.isVR=function(){return this.mode===o.b.VrOrientOnly||this.mode===o.b.VrWithController||this.mode===o.b.VrWithTrackedController},e}(i.a)},,function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return o});var r,i=n(0);!function(t){t.INSTANT="transition.instant",t.FLY="transition.fly",t.FADEOUT="transition.fade"}(r=r||(r={}));var o=function(t){switch(t){case r.FADEOUT:return i.Ja.FadeToBlack;case r.INSTANT:return i.Ja.Instant;case r.FLY:return i.Ja.Interpolate}}},,function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"c",function(){return s});var r=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},i=function(){return"getVRDisplays"in navigator},o=function(){return navigator.getVRDisplays().then(function(t){try{for(var e=r(t),n=e.next();!n.done;n=e.next()){var i=n.value;if(i){var o=i.displayName;if(o&&o.match(/daydream/i))return i}}}catch(t){s={error:t}}finally{try{n&&!n.done&&(a=e.return)&&a.call(e)}finally{if(s)throw s.error}}throw Error("daydream not found in VRDisplays");var s,a})},s=function(){return navigator.getVRDisplays().then(function(t){return t.length>0?t[0]:null})}},function(t,e,n){"use strict";e.a=Object.freeze({signedUrlDefaultExpireTime:24e4,signedUrlCheckInterval:1e4,signedUrlRefreshBuffer:15e3,visionTilingStartDate:new Date("8/26/2016"),visionTilingStartVersion:"1.1.407.13667",epsilon:1e-5,skyboxMeshGroup:"_group_skybox_"})},function(t,e,n){"use strict";n.d(e,"d",function(){return s}),n.d(e,"a",function(){return r}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r,i=n(6),o=n(15),s=function(t,e){switch(t){case i.a.Panorama:return e?o.b.INSIDE:o.b.OUTSIDE;case i.a.Dollhouse:return o.b.DOLLHOUSE;case i.a.Floorplan:return o.b.FLOORPLAN;case i.a.Transition:return o.b.TRANSITIONING;default:return}};!function(t){t.PANORAMA="panorama",t.DOLLHOUSE="dollhouse",t.FLOORPLAN="floorplan",t.TRANSITIONING="transitioning"}(r=r||(r={}));var a=function(t){switch(t){case r.PANORAMA:return o.b.INSIDE;case r.DOLLHOUSE:return o.b.DOLLHOUSE;case r.FLOORPLAN:return o.b.FLOORPLAN;case r.TRANSITIONING:return o.b.TRANSITIONING}},u=function(t){switch(t){case i.a.Panorama:return r.PANORAMA;case i.a.Dollhouse:return r.DOLLHOUSE;case i.a.Floorplan:return r.FLOORPLAN;case i.a.Transition:return r.TRANSITIONING}}},,function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"a",function(){return l});var r,i,o,s=n(11),a=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},h=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};!function(t){t[t.Inactive=0]="Inactive",t[t.Active=1]="Active",t[t.StopScheduled=2]="StopScheduled"}(i=i||(i={})),function(t){t[t.Move=0]="Move",t[t.Pan=1]="Pan",t[t.Zoom=2]="Zoom"}(o=o||(o={}));var l=function(t){function e(e,n,r,s,a){void 0===e&&(e={});var u=t.call(this)||this;return u.snapshots=e,u.activeReel=n,u.allowedModes=r,u.modelSweeps=s,u.looping=a,u.orderedSnapshots=[],u.orderedSnapshots=u.getFilteredSnapshots(u.snapshots,n,r,s),u.tourState=i.Inactive,u.tourCurrentSnapshot=-1,u.transition={active:!1,type:o.Move,promise:Promise.resolve()},u.looping=a,u}return a(e,t),e.prototype.update=function(t){this.copy(t)},e.prototype.clone=function(){var t,n,r=new e({},this.activeReel,this.allowedModes,this.modelSweeps,this.looping);try{for(var i=h(Object.keys(this.snapshots)),o=i.next();!o.done;o=i.next()){var s=o.value,a=this.snapshots[s];r.snapshots[s]=u({},a,{metadata:u({},a.metadata,{camera_position:a.metadata.camera_position.clone(),camera_quaternion:a.metadata.camera_quaternion.clone()})})}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},e.prototype.copy=function(t){for(var e in t.snapshots)this.snapshots[e]=t.snapshots[e];this.tourState=t.tourState,this.tourCurrentSnapshot=t.tourCurrentSnapshot,this.orderedSnapshots=[];try{for(var n=h(t.orderedSnapshots),r=n.next();!r.done;r=n.next()){var i=r.value;this.orderedSnapshots.push(i)}}catch(t){o={error:t}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(o)throw o.error}}var o,s},e.prototype.getFilteredSnapshots=function(t,e,n,r){var i,o,s=[];if(e&&e.reel){var a=function(e){if(e.sid in t){var i=t[e.sid],o=i.metadata.camera_mode,a=i.metadata.scan_id,u=void 0!==a&&-1!==r.findIndex(function(t){return t.id===a});-1===n.indexOf(o)||a&&!u||s.push(e.sid)}};try{for(var u=h(e.reel),l=u.next();!l.done;l=u.next()){a(l.value)}}catch(t){i={error:t}}finally{try{l&&!l.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}}return s},e.prototype.isLooping=function(){return this.looping},e.prototype.isTourActive=function(){return this.tourState!==i.Inactive},e.prototype.isTourTransitionActive=function(){return this.transition.active},e.prototype.getTourTransitionType=function(){return this.transition.type},e.prototype.activateTourTransition=function(t,e){this.transition.active=!0,this.transition.type=t,this.transition.promise=e},e.prototype.deactivateTourTransition=function(){this.transition.active=!1,this.transition.promise=Promise.resolve()},e.prototype.getTourTransitionPromise=function(){return this.transition.promise},e.prototype.iterateSnapshots=function(t){var e=this,n=0;this.orderedSnapshots.forEach(function(r){var i=e.snapshots[r];t(i,n++)})},e.prototype.getSnapshot=function(t){return this.snapshots[t]},e.prototype.getSnapshotCount=function(){return this.orderedSnapshots?this.orderedSnapshots.length:0},e.prototype.getTourState=function(){return this.tourState},e.prototype.setTourState=function(t){this.tourState=t},e.prototype.getTourCurrentSnapshotIndex=function(){return this.tourCurrentSnapshot},e.prototype.getTourSnapshotSid=function(t){if(t>=0&&t<this.getSnapshotCount())return this.orderedSnapshots[t];throw new Error("getTourSnapshotSid() -> Invalid snapshot index.")},e.prototype.setTourCurrentSnapshotByIndex=function(t){if(!(t>=0&&t<this.getSnapshotCount()))throw new Error("setTourCurrentSnapshotByIndex() -> Invalid snapshot index.");this.tourCurrentSnapshot=t},e.prototype.getTourCurrentSnapshotByIndex=function(t){if(t>=0&&t<this.getSnapshotCount()){var e=this.orderedSnapshots[t];return this.snapshots[e]}throw new Error("setTourCurrentSnapshotByIndex() -> Invalid snapshot index.")},e}(s.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r,i,o,s=n(1),a=n(31),u=n(27);function h(t,e,n,r,i,o){this.planes=[void 0!==t?t:new u.a,void 0!==e?e:new u.a,void 0!==n?n:new u.a,void 0!==r?r:new u.a,void 0!==i?i:new u.a,void 0!==o?o:new u.a]}h.prototype={constructor:h,set:function(t,e,n,r,i,o){var s=this.planes;return s[0].copy(t),s[1].copy(e),s[2].copy(n),s[3].copy(r),s[4].copy(i),s[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this},setFromMatrix:function(t){var e=this.planes,n=t.elements,r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],u=n[5],h=n[6],l=n[7],c=n[8],f=n[9],p=n[10],d=n[11],y=n[12],m=n[13],g=n[14],v=n[15];return e[0].setComponents(s-r,l-a,d-c,v-y).normalize(),e[1].setComponents(s+r,l+a,d+c,v+y).normalize(),e[2].setComponents(s+i,l+u,d+f,v+m).normalize(),e[3].setComponents(s-i,l-u,d-f,v-m).normalize(),e[4].setComponents(s-o,l-h,d-p,v-g).normalize(),e[5].setComponents(s+o,l+h,d+p,v+g).normalize(),this},intersectsObject:(o=new a.a,function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),o.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(o)}),intersectsSprite:function(){var t=new a.a;return function(e){return t.center.set(0,0,0),t.radius=.7071067811865476,t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){for(var e=this.planes,n=t.center,r=-t.radius,i=0;i<6;i++){if(e[i].distanceToPoint(n)<r)return!1}return!0},intersectsBox:(r=new s.a,i=new s.a,function(t){for(var e=this.planes,n=0;n<6;n++){var o=e[n];r.x=o.normal.x>0?t.min.x:t.max.x,i.x=o.normal.x>0?t.max.x:t.min.x,r.y=o.normal.y>0?t.min.y:t.max.y,i.y=o.normal.y>0?t.max.y:t.min.y,r.z=o.normal.z>0?t.min.z:t.max.z,i.z=o.normal.z>0?t.max.z:t.min.z;var s=o.distanceToPoint(r),a=o.distanceToPoint(i);if(s<0&&a<0)return!1}return!0}),containsPoint:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}}},function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return h});var r=n(14),i=n(80),o=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})},s=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},a=function(t){return null!==t.position?{x:t.position.x,y:t.position.y,z:t.position.z}:null},u=function(t,e,n,r,o){return void 0===o&&(o=!1),r.sweeps=[],n.forEach(function(t,e){r.sweeps.push({uuid:t.id,aligned:true,alignmentType:t.alignmentType,neighbors:t.neighbours,position:a(t),rotation:Object(i.b)(t.rotation),floor:t.floor,pavilionMapId:t.pavilionMapId,isInside:t.isInside,obj:t.obj})}),r.sid=t,r.modelSupportsVr=e,r},h=function(t,e,n,u){return o(void 0,void 0,void 0,function(){var h,l=this;return s(this,function(c){switch(c.label){case 0:return[4,Promise.all(u.map(function(e){return o(l,void 0,void 0,function(){var n;return s(this,function(o){switch(o.label){case 0:return n={uuid:e.id,aligned:e.alignmentType===r.a.ALIGNED,neighbourUUIDs:e.neighbours,position:a(e),rotation:Object(i.b)(e.rotation)},[4,t.getSignedUrl(IMAGE_SERVER+"/tiles/"+e.id+"/512_face1_0_0.jpg")];case 1:return[2,(n.thumbnail=o.sent(),n.floor=e.floor,n)]}})})}))];case 1:return h=c.sent(),[2,{sid:e,panos:h,modelSupportsVr:n}]}})})}},function(t,e,n){"use strict";var r;n.d(e,"a",function(){return r}),function(t){t.FORWARD="FORWARD",t.LEFT="LEFT",t.RIGHT="RIGHT",t.BACK="BACK",t.UP="UP",t.DOWN="DOWN"}(r=r||(r={}))},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(1),i=n(3),o=new(n(4).a)("navurl"),s=function(){function t(){}return t.serialize=function(t){return encodeURIComponent(JSON.stringify(t))},t.deserialize=function(e){var n=decodeURI(e),r=n.indexOf("start=");-1!==r&&(n=n.substring(r+6));try{return t.parseObject(n)}catch(e){o.debug("Not able to parse start location as JSON; falling back to old array style parsing");try{return t.parseArray(n)}catch(t){o.warn('Invalid start override, ignoring: "'+n+'"',t.message)}}return null},t.parseObject=function(t){var e=JSON.parse(decodeURIComponent(t));try{if(!e.camera_quaternion)throw Error("Start override is missing camera_quaternion");if(!e.camera_position)throw Error("Start override is missing camera_position");if(!e.camera_mode)throw Error("Start override is missing camera_mode");var n=(new i.a).copy(e.camera_quaternion);return{mode:e.camera_mode,panoId:e.scan_id,position:(new r.a).copy(e.camera_position),quaternion:n,zoom:e.ortho_zoom,floorVisibility:e.floor_visibility}}catch(t){o.debug(t)}return null},t.parseArray=function(t){var e=t.split(","),n=new r.a(parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])),o=new i.a(parseFloat(e[5]),parseFloat(e[6]),parseFloat(e[7]),parseFloat(e[8]));return{mode:parseInt(e[0],10),panoId:e[1],position:n,quaternion:o}},t}()},function(t,e,n){"use strict";var r,i=n(13),o=n(39),s=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},u=function(t){function e(){var e=t.call(this)||this;return e.elementChangedHandlers=[],e}return s(e,t),e.prototype.onElementChanged=function(t){this.elementChangedHandlers.push(t)},e.prototype.removeOnElementChanged=function(t){Object(o.a)(this.elementChangedHandlers,t)},e.prototype.added=function(t,e){try{for(var n=a(this.elementChangedHandlers),r=n.next();!r.done;r=n.next()){var o=r.value;o.onAdded&&o.onAdded(t,e)}}catch(t){s={error:t}}finally{try{r&&!r.done&&(u=n.return)&&u.call(n)}finally{if(s)throw s.error}}var s,u;i.a.changedFunc(this,""+e,t),this.linkObservables(t,e)},e.prototype.removed=function(t,e){try{for(var n=a(this.elementChangedHandlers),r=n.next();!r.done;r=n.next()){var o=r.value;o.onRemoved&&o.onRemoved(t,e)}}catch(t){s={error:t}}finally{try{r&&!r.done&&(u=n.return)&&u.call(n)}finally{if(s)throw s.error}}var s,u;i.a.changedFunc(this,""+e,t),this.unlinkObservables(t,e)},e.prototype.updated=function(t,e,n){try{for(var r=a(this.elementChangedHandlers),o=r.next();!o.done;o=r.next()){var s=o.value;s.onUpdated&&s.onUpdated(t,e)}}catch(t){u={error:t}}finally{try{o&&!o.done&&(h=r.return)&&h.call(r)}finally{if(u)throw u.error}}var u,h;i.a.changedFunc(this,""+e,t),n&&this.unlinkObservables(n,e),this.linkObservables(t,e)},e.prototype.linkObservables=function(t,e){var n=this,r=i.a.isObservable(t);if(r){var o=function(t,r){var o=i.a.buildEmptyObjectWithProp(t,r);i.a.changedFunc(n,""+e,o)};r.onChanged(o),this.childChangeFunctions[e+""]=o}},e.prototype.unlinkObservables=function(t,e){var n=i.a.isObservable(t),r=this.childChangeFunctions[e+""];n&&r&&n.removeOnChanged(r)},e}(i.a);e.a=u},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r,i=n(101),o=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},a=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s(arguments[e]));return t},u=function(t){function e(e){var n=t.call(this)||this;return n.elements=e?e.concat():[],n}return o(e,t),e.prototype.push=function(e){return this.elements.push(e),t.prototype.added.call(this,e,this.elements.length-1),this.length},e.prototype.remove=function(e){var n=this.elements[e];this.elements.length>1&&(this.elements[e]=this.elements[this.elements.length-1]),this.elements.length--,t.prototype.removed.call(this,n,e)},e.prototype.update=function(e,n){var r=this.elements[e];this.elements[e]=n,t.prototype.updated.call(this,n,e,r)},e.prototype.getValueForKey=function(t){var e=parseInt(t,10);if(e)return this.elements[e]},Object.defineProperty(e.prototype,"length",{get:function(){return this.elements.length},set:function(e){if(e<this.elements.length){for(var n=this.elements.length-1;n>=e;n--){var r=this.elements[n];t.prototype.removed.call(this,r,n)}this.elements.length=e}},enumerable:!0,configurable:!0}),e.prototype.values=function(){return a(this.elements)},e.prototype.filter=function(t){return this.elements.filter(t)},e.prototype.map=function(t){return this.elements.map(t)},e.prototype.forEach=function(t){this.elements.forEach(t)},e.prototype.get=function(t){return this.elements[t]},e}(i.a)},function(t,e,n){"use strict";n(143);var r,i=n(32),o=n(12),s=n(4),a=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},u=new s.a("module-loader");!function(t){t[t.Registered=0]="Registered",t[t.Loading=1]="Loading",t[t.Initialized=2]="Initialized",t[t.Unloaded=3]="Unloaded"}(r||(r={}));var h=function(){function t(t){this.registeredModules={},this.typeLookup=new i.a(!0),this.engine=t}return t.prototype.registerModule=function(t,e){var n=this.typeLookup.addIndexByType(t),i={type:t,es6ModulePromise:e,ctorPromise:new o.a,initPromise:new o.a,state:r.Registered};this.registeredModules[n]=i},t.prototype.getTypeID=function(t){var e=this.typeLookup.getIndexByType(t);if(-1===e)throw Error("Trying to access unregistered Module");return e},t.prototype.getTypeFromTypeID=function(t){return this.typeLookup.getTypeByIndex(t)},t.prototype.moduleRegistered=function(t){return-1!==this.typeLookup.getIndexByType(t)},t.prototype.getModule=function(t){var e=this.typeLookup.getIndexByType(t);if(-1===e)throw Error("Trying to get "+this.prettyPrintType(t)+" before it was registered!");if(this.registeredModules[e].state===r.Unloaded)throw Error("Module unloaded");return this.registeredModules[e].initPromise.nativePromise()},t.prototype.getModuleByParent=function(t){var e=this.typeLookup.getIndicesByType(t);if(0===e.length)throw Error("No registered modules derive from "+this.prettyPrintType(t)+".");var n,r,i=[];try{for(var o=a(e),s=o.next();!s.done;s=o.next()){var u=s.value;i.push(this.registeredModules[u].initPromise.nativePromise())}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return Promise.race(i)},t.prototype.getModuleSync=function(t){var e=this.typeLookup.getIndexByType(t);if(-1===e)throw new Error("Trying to get "+this.prettyPrintType(t)+" before it was registered!");var n=this.registeredModules[e];if(n.state!==r.Initialized)throw Error(this.prettyPrintType(t)+" module not loaded!");return n.module},t.prototype.loadModule=function(t,e){var n=this;void 0===e&&(e={});var i=this.typeLookup.getIndexByType(t);if(-1===i)throw Error("Attempting to load an unregistered module");var o=this.registeredModules[i];if(o.state===r.Initialized)return o;if(o.state!==r.Registered&&o.state!==r.Unloaded)throw Error(this.prettyPrintType(t)+" already loading");return o.state=r.Loading,o.es6ModulePromise().then(function(i){if(!i.default)throw new Error(n.prettyPrintType(t)+" has no default export during module loading");var s=new i.default;o.ctorPromise.resolve(s).then(function(){var t=Date.now(),i=!1;setTimeout(function(){i||u.debug(s.name+" init took over 2 seconds")},2e3),(s.init(e,n.engine)||Promise.resolve()).then(function(){u.debug(s.name+" init took "+(Date.now()-t)/1e3+" secs."),i=!0,o.state=r.Initialized,o.module=s,o.initPromise.resolve(s)},function(t){return o.initPromise.reject(t)})})},function(e){u.error("Failed to load es6Module for "+n.prettyPrintType(t)+": "+e),o.initPromise.reject(e)}),o},t.prototype.whenQueueEmpties=function(){var t=[];for(var e in this.registeredModules){var n=this.registeredModules[e];n.state===r.Loading&&t.push(n.initPromise)}return o.a.all(t).nativePromise()},t.prototype.unloadModule=function(t){var e=this.typeLookup.getIndexByType(t);if(-1===e)throw Error("Attempting to unload unregistered module");var n=this.registeredModules[e];if(n.state===r.Unloaded||n.state===r.Registered)throw Error("Attempting to unload not-loaded module");n.state=r.Unloaded,n.ctorPromise=new o.a,n.initPromise=new o.a,n.module=void 0},t.prototype.prettyPrintType=function(t){var e=t.toString();return e.substring(0,e.indexOf("\n")).split(" ")[1]},t}(),l=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},c=new s.a("market"),f=function(){function t(){this.typeLookup=new i.a,this.store=[],this.moduleRegistry=[],this.firstUpdatePromises=[],this.callbacks=[]}return t.prototype.register=function(t,e,n){var r=this.typeLookup.getIndexByType(e,!0);if(this.moduleRegistry[r])throw Error("Data can only be registered to one Module");this.moduleRegistry[r]=t,n&&this.update(t,n)},t.prototype.update=function(t,e){var n,r,i=this.typeLookup.getIndexByInstance(e);if(-1===i)throw Error("Data must be registered before updated");if(this.moduleRegistry[i]!==t)throw Error("Data must be updated from the Module that registered it");if(this.store[i]||(this.store[i]=new(this.typeLookup.getTypeByIndex(i))),this.store[i].update(e),this.firstUpdatePromises[i]&&(this.firstUpdatePromises[i].resolve(this.store[i]),delete this.firstUpdatePromises[i]),this.callbacks[i])try{for(var o=l(this.callbacks[i]),s=o.next();!s.done;s=o.next()){(0,s.value)(this.store[i])}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.getData=function(t){var e=this.typeLookup.getIndexByType(t);if(e in this.store)return this.store[e];throw Error("Data not present.")},t.prototype.waitForData=function(t){var e=this,n=this.typeLookup.getIndexByType(t,!0);return n in this.store?Promise.resolve(this.store[n]):(this.firstUpdatePromises[n]||(this.firstUpdatePromises[n]=new o.a,setTimeout(function(){n in e.store||c.debug("still waiting for "+t.name+" after 2 seconds")},2e3)),this.firstUpdatePromises[n].nativePromise())},t.prototype.tryGetData=function(t){try{return this.getData(t)}catch(t){if("Data not present."!==t.message)throw t}return null},t.prototype.debugData=function(){var t={};for(var e in this.moduleRegistry)t[this.moduleRegistry[e].name]||(t[this.moduleRegistry[e].name]=[]),t[this.moduleRegistry[e].name].push(this.store[e]);return Object.freeze(t)},t.prototype.onDataUpdate=function(t,e,n){var r=this.typeLookup.getIndexByType(t);n&&-1!==r?e(this.getData(t)):r=this.typeLookup.getIndexByType(t,!0),this.callbacks[r]||(this.callbacks[r]=[]),this.callbacks[r].push(e)},t.prototype.removeOnDataUpdate=function(t,e){var n=this.typeLookup.getIndexByType(t);if(-1!==n){var r=this.callbacks[n],i=r.indexOf(e);r.splice(i,1)}},t}(),p=n(84),d=function(){function t(){this.typeLookup=new i.a,this.bindings=[]}return t.prototype.addBinding=function(t,e){var n=this.typeLookup.getIndexByType(t,!0);if(this.bindings[n])throw Error("Command already bound to a callback");return this.bindings[n]=e,e},t.prototype.removeBinding=function(t,e){var n=this.typeLookup.getIndexByType(t);if(-1===n)throw Error("Trying to unbind unbound command");if(this.bindings[n]!==e)throw Error("Trying to unbind unbound callback");delete this.bindings[n]},t.prototype.issueCommand=function(t){var e=this.typeLookup.getIndexByInstance(t),n=this.bindings[e];return n?n(t.payload):Promise.reject("Command not bound: "+t.id)},t}(),y=n(10),m=n(41),g=n(73),v=n(30),b=n(38),w=n(40),E=n(20),_=n(8),x=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})},O=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},S=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},T=new s.a("engine"),P=y.a.End,I=function(){function t(t){void 0===t&&(t=!1),this.moduleLookup=[],this.componentLookup={},this.currentApplication=null,this.market=new f,this.commandBinder=new d,this.messageBus=new p.a,this.engineGenerators=new m.d,this.layers=new g.a,this.moduleLoader=new h(this),this.registerModule({type:E.default,promise:function(){return Promise.resolve(n(20))}}),this.registerModule({type:v.default,promise:function(){return Promise.resolve(n(30))}}),this.registerModule({type:w.default,promise:function(){return Promise.resolve(n(40))}}),this.registerModule({type:b.default,promise:function(){return Promise.resolve(n(38))}}),this.loadModules([{type:E.default},{type:v.default,config:{useGUI:!t}},{type:w.default},{type:b.default}]),this.afterPhasePromises=[],this.afterPhaseListenerCount=[],this.resetPromises()}return t.prototype.loadApplication=function(t){return x(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,h,l,c,f,p,d,y,m,g,v;return O(this,function(b){switch(b.label){case 0:if(t===this.currentApplication)throw Error("Application already loaded");e=(this.currentApplication?this.currentApplication.getManifest():[]).map(function(t){return t.type}),n=t.getManifest(),r=n.map(function(t){return t.type}),i=this.currentApplication,this.currentApplication=null,o=e.filter(function(t){return-1===r.indexOf(t)});try{for(s=S(o),a=s.next();!a.done;a=s.next())u=a.value,this.unloadModule(u)}catch(t){y={error:t}}finally{try{a&&!a.done&&(m=s.return)&&m.call(s)}finally{if(y)throw y.error}}h=n.filter(function(t){return-1===e.indexOf(t.type)});try{for(l=S(h),c=l.next();!c.done;c=l.next())f=c.value,this.moduleLoader.moduleRegistered(f.type)||this.registerModule(f)}catch(t){g={error:t}}finally{try{c&&!c.done&&(v=l.return)&&v.call(l)}finally{if(g)throw g.error}}if(!i)return[3,4];b.label=1;case 1:return b.trys.push([1,3,,4]),[4,i.unload(this)];case 2:return b.sent(),[3,4];case 3:return p=b.sent(),T.error(p),this.getModuleSync(E.default).updateAppPhase(_.a.ERROR,p),[3,4];case 4:return b.trys.push([4,6,,7]),this.currentApplication=t,[4,t.load(this,null===i)];case 5:return b.sent(),[3,7];case 6:return d=b.sent(),T.error(d),this.getModuleSync(E.default).updateAppPhase(_.a.ERROR,d),[3,7];case 7:return[2]}})})},t.prototype.registerModule=function(t){if(this.currentApplication)throw Error("Cannot register modules while application is running");this.moduleLoader.registerModule(t.type,t.promise)},t.prototype.loadModules=function(t){var e,n,r=this,i=[],o=function(t){s.moduleLoadInjectionHook&&(t.config=s.moduleLoadInjectionHook(t.type,t.config));var e=s.moduleLoader.loadModule(t.type,t.config);e.ctorPromise.then(function(e){return r.moduleLookup[r.moduleLoader.getTypeID(t.type)]={module:e,initialized:!1}}),e.initPromise.then(function(e){r.moduleLookup[r.moduleLoader.getTypeID(t.type)].initialized=!0}),i.push(e.initPromise.nativePromise())},s=this;try{for(var a=S(t),u=a.next();!u.done;u=a.next()){o(u.value)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return Promise.all(i)},t.prototype.setLoadInjection=function(t){if(this.moduleLoadInjectionHook)throw Error("Hook already registered");this.moduleLoadInjectionHook=t},t.prototype.unloadModule=function(t){var e,n,r=this.getModuleSync(t),i=this.getModuleIndex(r);if(this.componentLookup[i]){try{for(var o=S(this.componentLookup[i]),s=o.next();!s.done;s=o.next()){var a=s.value;this.removeComponent(r,a.component)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}this.componentLookup[i]=[]}this.moduleLoader.unloadModule(t),r.dispose(this)},t.prototype.waitForModule=function(t){return this.moduleLoader.getModule(t)},t.prototype.waitForLoadingModules=function(){return this.moduleLoader.whenQueueEmpties()},t.prototype.getModule=function(t){return x(this,void 0,void 0,function(){return O(this,function(e){return[2,this.moduleLoader.getModule(t)]})})},t.prototype.getModuleByParent=function(t){return x(this,void 0,void 0,function(){return O(this,function(e){return[2,this.moduleLoader.getModuleByParent(t)]})})},t.prototype.getModuleSync=function(t){return this.moduleLoader.getModuleSync(t)},t.prototype.addComponent=function(t,e){var n=this.getModuleIndex(t),r=this.componentLookup[n];r||(this.componentLookup[n]=r=[]);for(var i=-1,o=0;o<r.length;o++)if(r[o].component===e){i=o;break}-1===i&&(i=r.push({component:e,active:!1})-1,e.init(this,this.market)),r[i].active||(r[i].active=!0,e.activate())},t.prototype.removeComponent=function(t,e){var n=this.getModuleIndex(t),r=this.componentLookup[n];if(r){for(var i=-1,o=0;o<r.length;o++)if(r[o].component===e){i=o;break}-1===i&&r[i].active||(r[i].active=!1,e.deactivate())}},t.prototype.tick=function(){if(P!==y.a.End)throw Error("Engine.tick called outside of waiting. Did the engine get called recursively?!");P=y.a.Begin,this.resolveAfterPhase(y.a.Begin);var t,e,n=Date.now(),r=this.lastTick?n-this.lastTick:16;this.lastTick=n,P=y.a.Logic;try{try{for(var i=S(this.moduleLookup),o=i.next();!o.done;o=i.next()){var s=o.value;s&&s.initialized&&s.module.onUpdate(r)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}}catch(t){throw T.error(t.message),t}try{this.renderComponents(r)}catch(t){throw T.error(t.message),t}this.resolveAfterPhase(y.a.Logic);try{P=y.a.Render,this.resolveAfterPhase(y.a.Render),this.engineGenerators.processGenerators(m.a.Phase,y.a.Render),P=y.a.End,this.resolveAfterPhase(y.a.End),this.engineGenerators.processGenerators(m.a.None),this.engineGenerators.processGenerators(m.a.Promise),this.engineGenerators.processGenerators(m.a.Duration)}catch(t){throw T.error(t.message),t}},t.prototype.subscribe=function(t,e,n){void 0===n&&(n=p.b.PERMANENT),this.messageBus.subscribe(t,e,n)},t.prototype.unsubscribe=function(t,e){this.messageBus.unsubscribe(t,e)},t.prototype.broadcast=function(t){this.messageBus.broadcast(t)},t.prototype.claimRenderLayer=function(t){return this.layers.claimLayer(t)},t.prototype.getRenderLayer=function(t){return this.layers.getLayer(t)},t.prototype.disposeRenderLayer=function(t){this.layers.disposeLayer(t)},t.prototype.startGenerator=function(t){this.engineGenerators.startGenerator(t)},t.prototype.stopGenerator=function(t){this.engineGenerators.stopGenerator(t)},t.prototype.after=function(t){return this.afterPhaseListenerCount[t]++,this.afterPhasePromises[t].promise()},t.prototype.getModuleIndex=function(t){for(var e=0;e<this.moduleLookup.length;e++)if(this.moduleLookup[e]&&this.moduleLookup[e].module===t)return e;return-1},t.prototype.renderComponents=function(t){for(var e in this.moduleLookup){if(i=this.componentLookup[e])try{for(var n=S(i),r=n.next();!r.done;r=n.next()){(a=r.value).active&&a.component.beforeRender&&a.component.beforeRender(t)}}catch(t){u={error:t}}finally{try{r&&!r.done&&(h=n.return)&&h.call(n)}finally{if(u)throw u.error}}}for(var e in this.moduleLookup){var i;if(e)if(i=this.componentLookup[e])try{for(var o=S(i),s=o.next();!s.done;s=o.next()){var a;(a=s.value).active&&a.component.render(t)}}catch(t){l={error:t}}finally{try{s&&!s.done&&(c=o.return)&&c.call(o)}finally{if(l)throw l.error}}}var u,h,l,c},t.prototype.resetPromises=function(){this.resetAfterPhasePromises()},t.prototype.resetAfterPhasePromises=function(){this.resetAfterPhasePromise(y.a.Logic),this.resetAfterPhasePromise(y.a.Render),this.resetAfterPhasePromise(y.a.Begin),this.resetAfterPhasePromise(y.a.End)},t.prototype.resetAfterPhasePromise=function(t){this.afterPhasePromises[t]=new o.a,this.afterPhaseListenerCount[t]=0},t.prototype.resolveAfterPhase=function(t){this.afterPhaseListenerCount[t]>0&&(this.afterPhasePromises[t].resolve(),this.resetAfterPhasePromise(t))},t.prototype.deactivate=function(){this.getModuleSync(b.default).clearInterface();try{for(var t=S(this.moduleLookup),e=t.next();!e.done;e=t.next()){var n=e.value;if(n&&n.initialized){var r=this.getModuleType(n.module);r&&this.unloadModule(r)}}}catch(t){i={error:t}}finally{try{e&&!e.done&&(o=t.return)&&o.call(t)}finally{if(i)throw i.error}}var i,o},t.prototype.getModuleType=function(t){for(var e=0;e<this.moduleLookup.length;e++){var n=this.moduleLookup[e];if(n&&n.module===t)return this.moduleLoader.getTypeFromTypeID(e)}return null},t}();e.a=I},function(t,e,n){"use strict";var r=n(118),i=n(116);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=b,e.resolve=function(t,e){return b(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?b(t,!1,!0).resolveObject(e):e},e.format=function(t){i.isString(t)&&(t=b(t));return t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,h=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(h),c=["%","/","?",";","#"].concat(l),f=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,y={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=n(115);function b(t,e,n){if(t&&i.isObject(t)&&t instanceof o)return t;var r=new o;return r.parse(t,e,n),r}o.prototype.parse=function(t,e,n){if(!i.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),a=-1!==o&&o<t.indexOf("#")?"?":"#",h=t.split(a);h[0]=h[0].replace(/\\/g,"/");var b=t=h.join(a);if(b=b.trim(),!n&&1===t.split("#").length){var w=u.exec(b);if(w)return this.path=b,this.href=b,this.pathname=w[1],w[2]?(this.search=w[2],this.query=e?v.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var E=s.exec(b);if(E){var _=(E=E[0]).toLowerCase();this.protocol=_,b=b.substr(E.length)}if(n||E||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var x="//"===b.substr(0,2);!x||E&&m[E]||(b=b.substr(2),this.slashes=!0)}if(!m[E]&&(x||E&&!g[E])){for(var O,S,T=-1,P=0;P<f.length;P++){-1!==(I=b.indexOf(f[P]))&&(-1===T||I<T)&&(T=I)}-1!==(S=-1===T?b.lastIndexOf("@"):b.lastIndexOf("@",T))&&(O=b.slice(0,S),b=b.slice(S+1),this.auth=decodeURIComponent(O)),T=-1;for(P=0;P<c.length;P++){var I;-1!==(I=b.indexOf(c[P]))&&(-1===T||I<T)&&(T=I)}-1===T&&(T=b.length),this.host=b.slice(0,T),b=b.slice(T),this.parseHost(),this.hostname=this.hostname||"";var R="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!R)for(var L=this.hostname.split(/\./),A=(P=0,L.length);P<A;P++){var M=L[P];if(M&&!M.match(p)){for(var k="",N=0,C=M.length;N<C;N++)M.charCodeAt(N)>127?k+="x":k+=M[N];if(!k.match(p)){var D=L.slice(0,P),z=L.slice(P+1),U=M.match(d);U&&(D.push(U[1]),z.unshift(U[2])),z.length&&(b="/"+z.join(".")+b),this.hostname=D.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),R||(this.hostname=r.toASCII(this.hostname));var j=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+j,this.href+=this.host,R&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!y[_])for(P=0,A=l.length;P<A;P++){var V=l[P];if(-1!==b.indexOf(V)){var F=encodeURIComponent(V);F===V&&(F=escape(V)),b=b.split(V).join(F)}}var H=b.indexOf("#");-1!==H&&(this.hash=b.substr(H),b=b.slice(0,H));var q=b.indexOf("?");if(-1!==q?(this.search=b.substr(q),this.query=b.substr(q+1),e&&(this.query=v.parse(this.query)),b=b.slice(0,q)):e&&(this.search="",this.query={}),b&&(this.pathname=b),g[_]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){j=this.pathname||"";var G=this.search||"";this.path=j+G}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,s="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(s=v.stringify(this.query));var a=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||g[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),e+o+(n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(a=a.replace("#","%23"))+r},o.prototype.resolve=function(t){return this.resolveObject(b(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(i.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var n=new o,r=Object.keys(this),s=0;s<r.length;s++){var a=r[s];n[a]=this[a]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var u=Object.keys(t),h=0;h<u.length;h++){var l=u[h];"protocol"!==l&&(n[l]=t[l])}return g[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!g[t.protocol]){for(var c=Object.keys(t),f=0;f<c.length;f++){var p=c[f];n[p]=t[p]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||m[t.protocol])n.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var y=n.pathname||"",v=n.search||"";n.path=y+v}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var b=n.pathname&&"/"===n.pathname.charAt(0),w=t.host||t.pathname&&"/"===t.pathname.charAt(0),E=w||b||n.host&&t.pathname,_=E,x=n.pathname&&n.pathname.split("/")||[],O=(d=t.pathname&&t.pathname.split("/")||[],n.protocol&&!g[n.protocol]);if(O&&(n.hostname="",n.port=null,n.host&&(""===x[0]?x[0]=n.host:x.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),E=E&&(""===d[0]||""===x[0])),w)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,x=d;else if(d.length)x||(x=[]),x.pop(),x=x.concat(d),n.search=t.search,n.query=t.query;else if(!i.isNullOrUndefined(t.search)){if(O)n.hostname=n.host=x.shift(),(R=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=R.shift(),n.host=n.hostname=R.shift());return n.search=t.search,n.query=t.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!x.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var S=x.slice(-1)[0],T=(n.host||t.host||x.length>1)&&("."===S||".."===S)||""===S,P=0,I=x.length;I>=0;I--)"."===(S=x[I])?x.splice(I,1):".."===S?(x.splice(I,1),P++):P&&(x.splice(I,1),P--);if(!E&&!_)for(;P--;P)x.unshift("..");!E||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),T&&"/"!==x.join("/").substr(-1)&&x.push("");var R,L=""===x[0]||x[0]&&"/"===x[0].charAt(0);O&&(n.hostname=n.host=L?"":x.length?x.shift():"",(R=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=R.shift(),n.host=n.hostname=R.shift()));return(E=E||n.host&&x.length)&&!L&&x.unshift(""),x.length?n.pathname=x.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,n){"use strict";t.exports=function(){var t=window.analytics=window.analytics||[];if(!t.initialize)if(t.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{t.invoked=!0,t.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"],t.factory=function(e){return function(){var n=Array.prototype.slice.call(arguments);return n.unshift(e),t.push(n),t}};for(var e=0;e<t.methods.length;e++){var n=t.methods[e];t[n]=t.factory(n)}t.load=function(t){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)},t.SNIPPET_VERSION="4.0.0"}}},,,,,function(t,e,n){(function(e,n){var r;r=function(){"use strict";function t(t){return"function"==typeof t}var r=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=0,o=void 0,s=void 0,a=function(t,e){d[i]=t,d[i+1]=e,2===(i+=2)&&(s?s(y):w())};var u="undefined"!=typeof window?window:void 0,h=u||{},l=h.MutationObserver||h.WebKitMutationObserver,c="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){var t=setTimeout;return function(){return t(y,1)}}var d=new Array(1e3);function y(){for(var t=0;t<i;t+=2){(0,d[t])(d[t+1]),d[t]=void 0,d[t+1]=void 0}i=0}var m,g,v,b,w=void 0;function E(t,e){var n=this,r=new this.constructor(O);void 0===r[x]&&j(r);var i=n._state;if(i){var o=arguments[i-1];a(function(){return z(i,r,o,n._result)})}else C(n,r,t,e);return r}function _(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(O);return A(e,t),e}c?w=function(){return e.nextTick(y)}:l?(g=0,v=new l(y),b=document.createTextNode(""),v.observe(b,{characterData:!0}),w=function(){b.data=g=++g%2}):f?((m=new MessageChannel).port1.onmessage=y,w=function(){return m.port2.postMessage(0)}):w=void 0===u?function(){try{var t=Function("return this")().require("vertx");return void 0!==(o=t.runOnLoop||t.runOnContext)?function(){o(y)}:p()}catch(t){return p()}}():p();var x=Math.random().toString(36).substring(2);function O(){}var S=void 0,T=1,P=2,I={error:null};function R(t){try{return t.then}catch(t){return I.error=t,I}}function L(e,n,r){n.constructor===e.constructor&&r===E&&n.constructor.resolve===_?function(t,e){e._state===T?k(t,e._result):e._state===P?N(t,e._result):C(e,void 0,function(e){return A(t,e)},function(e){return N(t,e)})}(e,n):r===I?(N(e,I.error),I.error=null):void 0===r?k(e,n):t(r)?function(t,e,n){a(function(t){var r=!1,i=function(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}(n,e,function(n){r||(r=!0,e!==n?A(t,n):k(t,n))},function(e){r||(r=!0,N(t,e))},t._label);!r&&i&&(r=!0,N(t,i))},t)}(e,n,r):k(e,n)}function A(t,e){var n,r;t===e?N(t,new TypeError("You cannot resolve a promise with itself")):(r=typeof(n=e),null===n||"object"!==r&&"function"!==r?k(t,e):L(t,e,R(e)))}function M(t){t._onerror&&t._onerror(t._result),D(t)}function k(t,e){t._state===S&&(t._result=e,t._state=T,0!==t._subscribers.length&&a(D,t))}function N(t,e){t._state===S&&(t._state=P,t._result=e,a(M,t))}function C(t,e,n,r){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+T]=n,i[o+P]=r,0===o&&t._state&&a(D,t)}function D(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,i=void 0,o=t._result,s=0;s<e.length;s+=3)r=e[s],i=e[s+n],r?z(n,r,i,o):i(o);t._subscribers.length=0}}function z(e,n,r,i){var o=t(r),s=void 0,a=void 0,u=void 0,h=void 0;if(o){if((s=function(t,e){try{return t(e)}catch(t){return I.error=t,I}}(r,i))===I?(h=!0,a=s.error,s.error=null):u=!0,n===s)return void N(n,new TypeError("A promises callback cannot return that same promise."))}else s=i,u=!0;n._state!==S||(o&&u?A(n,s):h?N(n,a):e===T?k(n,s):e===P&&N(n,s))}var U=0;function j(t){t[x]=U++,t._state=void 0,t._result=void 0,t._subscribers=[]}var B=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(O),this.promise[x]||j(this.promise),r(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?k(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&k(this.promise,this._result))):N(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===S&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===_){var i=R(t);if(i===E&&t._state!==S)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(n===V){var o=new n(O);L(o,t,i),this._willSettleAt(o,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===S&&(this._remaining--,t===P?N(r,n):this._result[e]=n),0===this._remaining&&k(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;C(t,void 0,function(t){return n._settledAt(T,e,t)},function(t){return n._settledAt(P,e,t)})},t}();var V=function(){function t(e){this[x]=U++,this._result=this._state=void 0,this._subscribers=[],O!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(t,e){try{e(function(e){A(t,e)},function(e){N(t,e)})}catch(e){N(t,e)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(t){return this.then(null,t)},t.prototype.finally=function(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){throw n})})},t}();return V.prototype.then=E,V.all=function(t){return new B(this,t).promise},V.race=function(t){var e=this;return r(t)?new e(function(n,r){for(var i=t.length,o=0;o<i;o++)e.resolve(t[o]).then(n,r)}):new e(function(t,e){return e(new TypeError("You must pass an array to race."))})},V.resolve=_,V.reject=function(t){var e=new this(O);return N(e,t),e},V._setScheduler=function(t){s=t},V._setAsap=function(t){a=t},V._asap=a,V.polyfill=function(){var t=void 0;if(void 0!==n)t=n;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var r=null;try{r=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===r&&!e.cast)return}t.Promise=V},V.Promise=V,V},t.exports=r()}).call(this,n(76),n(67))},function(t,e,n){"use strict";t.exports=n(110).polyfill()},function(t,e,n){"use strict";n.r(e);var r,i=n(0),o=n(28),s=n(20),a=n(8),u=n(12),h=n(77),l=function(){function t(t){this.lastProgress=0,this.currentProgress=0,this.webpackChunks=[],this.meshAlloc={alloc:2e6,loaded:0},this.showingProgress=!1,this.loaderElm=document.getElementById("loader-cont"),this.progressElm=document.getElementById("bar"),window.addEventListener("WebpackChunkProgress",this.onWebpackChunkProgress.bind(this)),this.engine=t,this.meshProgressBinding=this.onMeshLoadProgress.bind(this),this.engine.subscribe(h.b,this.meshProgressBinding)}return t.prototype.showProgress=function(){this.showingProgress=!0,this.setProgress(this.currentProgress)},t.prototype.setDone=function(){this.currentProgress=100,this.setProgress(this.currentProgress),this.engine.unsubscribe(h.b,this.meshProgressBinding)},t.prototype.setProgress=function(t){if(this.progressElm&&!isNaN(t)){this.lastProgress=Math.max(this.lastProgress,t),t=this.lastProgress;var e=Number.parseFloat(this.progressElm.getAttribute("r")||"0"),n=Math.PI*(2*e),r=(100-(t=Math.max(Math.min(t,100),0)))/100*n;this.progressElm.style.strokeDashoffset=r.toString(10)}},t.prototype.calcProgress=function(){var t=0,e=0;this.webpackChunks.forEach(function(n){t+=n.loaded,e+=n.total}),t+=this.meshAlloc.loaded,e+=this.meshAlloc.alloc,this.currentProgress=75*Math.min(t/e,1),this.showingProgress&&this.setProgress(this.currentProgress)},t.prototype.onWebpackChunkProgress=function(t){this.webpackChunks[t.chunkID]?this.webpackChunks[t.chunkID].loaded=t.loaded:this.webpackChunks[t.chunkID]={loaded:t.loaded,total:t.total},this.calcProgress()},t.prototype.onMeshLoadProgress=function(t){this.meshAlloc.loaded=t.loaded/t.total*this.meshAlloc.alloc,this.calcProgress()},t}(),c=n(18),f=n(58),p=(n(121),n(46)),d=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),y=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})},m=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="loading-ui",e.playPromise=new u.a,e}return d(e,t),e.prototype.init=function(t,e){return y(this,void 0,void 0,function(){var n,r,u;return m(this,function(h){switch(h.label){case 0:return this.engine=e,n=this,[4,e.getModule(i.A)];case 1:return n.locale=h.sent(),[4,t.modelDetailsStore.read()];case 2:return r=h.sent(),[4,e.getModule(s.default)];case 3:return u=h.sent(),this.config={quickstart:!!t.quickstart,autoplay:!!t.autoplay,startNewTab:!!t.startNewTab,hideTitle:!!t.hideTitle,hideBranding:!!t.hideBranding,sid:t.sid,baseUrl:t.baseUrl},this.progressUI=new l(e),this.hideUI=this.hideUI.bind(this),this.engine.subscribe(o.a,this.hideUI),this.showPlayButton(r),u.updateAppPhase(a.a.WAITING),[2,this.playPromise.nativePromise()]}})})},e.prototype.getLoadingElements=function(){if(this.uiRoot=document.getElementById("loading-gui"),!this.uiRoot)throw Error("Loading GUI root not found");this.uiRoot.classList.remove("hidden"),this.presentedBy=document.getElementById("loading-presented-by"),this.mpLogo=document.getElementById("loading-logo"),this.mpLogo.src=n(119),this.nameHeader=document.getElementById("loading-header"),this.background=document.getElementById("loading-background"),this.tint=document.getElementById("tint")},e.prototype.addCobrand=function(t){if(t&&t.presented_by){var e=document.createElement("div");e.textContent=this.locale.t(f.a.PRESENTED_BY_CAPS),this.presentedBy.appendChild(e);var n=document.createElement("h3");n.textContent=t.presented_by,this.presentedBy.appendChild(n)}},e.prototype.hidePlayButtonUI=function(){this.background.style.backgroundImage="",this.presentedBy.style.transition="none",this.presentedBy.classList.remove("fadeIn"),this.mpLogo.style.transition="none",this.mpLogo.classList.remove("fadeIn"),this.nameHeader.classList.add("hidden"),this.tint.classList.add("hidden"),document.getElementById("circleLoader").classList.add("hidden"),this.uiRoot.classList.add("quickstart")},e.prototype.showQuickstartUI=function(){return y(this,void 0,void 0,function(){return m(this,function(t){switch(t.label){case 0:return this.getLoadingElements(),this.background.classList.add("fadeOut"),[4,Object(p.c)(500)];case 1:return t.sent(),this.presentedBy.style.transition="",this.presentedBy.classList.add("fadeIn"),this.mpLogo.style.transition="",this.mpLogo.classList.add("fadeIn"),[4,Object(p.c)(2500)];case 2:return t.sent(),this.presentedBy.classList.remove("fadeIn"),this.mpLogo.classList.remove("fadeIn"),this.uiRoot.classList.add("fadeOut"),[2]}})})},e.prototype.showLoadingUI=function(t){var e=document.createAttribute("data-status");e.value=this.locale.t(f.a.LOADING);var n=document.getElementById("loader-cont");n.attributes.setNamedItem(e),n.classList.add(this.locale.languageCode),t.classList.add("fadeOut"),this.presentedBy.classList.add("fadeIn")},e.prototype.showPlayButton=function(t){var e=this;this.getLoadingElements();var n=document.getElementById("loading-subheader"),r=document.getElementById("showcase-play");this.config.hideTitle&&this.nameHeader.classList.add("hidden"),this.config.hideBranding||this.addCobrand(t),this.nameHeader.textContent=t.name,this.uiRoot.appendChild(this.nameHeader),this.mpLogo.classList.add("fadeIn"),this.tint.classList.add("fadeIn"),this.playPromise.then(function(){e.config.quickstart?e.hidePlayButtonUI():e.showLoadingUI(n)}),this.config.autoplay?(this.progressUI.showProgress(),this.playPromise.resolve()):(n.classList.remove("hidden"),n.innerText=this.locale.t(f.a.EXPLORE_3D_SPACE),r.classList.remove("hidden"),r.addEventListener("click",function(){if(Object(c.j)())return e.config.startNewTab?void window.open(self.location.href,"_blank"):void(top.location.href=self.location.href);r.classList.add("hidden"),e.progressUI.showProgress(),e.playPromise.resolve()})),this.background.style.backgroundImage="url("+this.config.baseUrl+"/api/v1/player/models/"+this.config.sid+"/thumb)"},e.prototype.hideUI=function(t){return y(this,void 0,void 0,function(){return m(this,function(e){return t.phase!==a.a.STARTING&&t.phase!==a.a.PLAYING&&t.phase!==a.a.ERROR||(this.progressUI.setDone(),this.engine.unsubscribe(o.a,this.hideUI),this.config.quickstart?this.showQuickstartUI():this.uiRoot.classList.add("fadeOut")),[2]})})},e}(i.z);e.default=g},function(t,e,n){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,a){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?o(s(t),function(s){var a=encodeURIComponent(r(s))+n;return i(t[s])?o(t[s],function(t){return a+encodeURIComponent(r(t))}).join(e):a+encodeURIComponent(r(t[s]))}).join(e):a?encodeURIComponent(r(a))+n+encodeURIComponent(r(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var s=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,o){e=e||"&",n=n||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var h=t.length;u>0&&h>u&&(h=u);for(var l=0;l<h;++l){var c,f,p,d,y=t[l].replace(a,"%20"),m=y.indexOf(n);m>=0?(c=y.substr(0,m),f=y.substr(m+1)):(c=y,f=""),p=decodeURIComponent(c),d=decodeURIComponent(f),r(s,p)?i(s[p])?s[p].push(d):s[p]=[s[p],d]:s[p]=d}return s};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";e.decode=e.parse=n(114),e.encode=e.stringify=n(113)},function(t,e,n){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){(function(t,r){var i;!function(o){"object"==typeof e&&e&&e.nodeType,"object"==typeof t&&t&&t.nodeType;var s="object"==typeof r&&r;s.global!==s&&s.window!==s&&s.self;var a,u=2147483647,h=36,l=1,c=26,f=38,p=700,d=72,y=128,m="-",g=/^xn--/,v=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},E=h-l,_=Math.floor,x=String.fromCharCode;function O(t){throw RangeError(w[t])}function S(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function T(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+S((t=t.replace(b,".")).split("."),e).join(".")}function P(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function I(t){return S(t,function(t){var e="";return t>65535&&(e+=x((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=x(t)}).join("")}function R(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function L(t,e,n){var r=0;for(t=n?_(t/p):t>>1,t+=_(t/e);t>E*c>>1;r+=h)t=_(t/E);return _(r+(E+1)*t/(t+f))}function A(t){var e,n,r,i,o,s,a,f,p,g,v,b=[],w=t.length,E=0,x=y,S=d;for((n=t.lastIndexOf(m))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&O("not-basic"),b.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<w;){for(o=E,s=1,a=h;i>=w&&O("invalid-input"),((f=(v=t.charCodeAt(i++))-48<10?v-22:v-65<26?v-65:v-97<26?v-97:h)>=h||f>_((u-E)/s))&&O("overflow"),E+=f*s,!(f<(p=a<=S?l:a>=S+c?c:a-S));a+=h)s>_(u/(g=h-p))&&O("overflow"),s*=g;S=L(E-o,e=b.length+1,0==o),_(E/e)>u-x&&O("overflow"),x+=_(E/e),E%=e,b.splice(E++,0,x)}return I(b)}function M(t){var e,n,r,i,o,s,a,f,p,g,v,b,w,E,S,T=[];for(b=(t=P(t)).length,e=y,n=0,o=d,s=0;s<b;++s)(v=t[s])<128&&T.push(x(v));for(r=i=T.length,i&&T.push(m);r<b;){for(a=u,s=0;s<b;++s)(v=t[s])>=e&&v<a&&(a=v);for(a-e>_((u-n)/(w=r+1))&&O("overflow"),n+=(a-e)*w,e=a,s=0;s<b;++s)if((v=t[s])<e&&++n>u&&O("overflow"),v==e){for(f=n,p=h;!(f<(g=p<=o?l:p>=o+c?c:p-o));p+=h)S=f-g,E=h-g,T.push(x(R(g+S%E,0))),f=_(S/E);T.push(x(R(f,0))),o=L(n,w,r==i),n=0,++r}++n,++e}return T.join("")}a={version:"1.3.2",ucs2:{decode:P,encode:I},decode:A,encode:M,toASCII:function(t){return T(t,function(t){return v.test(t)?"xn--"+M(t):t})},toUnicode:function(t){return T(t,function(t){return g.test(t)?A(t.slice(4).toLowerCase()):t})}},void 0===(i=function(){return a}.call(e,n,e,t))||(t.exports=i)}()}).call(this,n(117)(t),n(67))},function(t,e,n){t.exports=n.p+"images/poweredByLogo.png"},,function(t,e,n){},function(t,e,n){"use strict";n.r(e),n.d(e,"ProxyPolyfill",function(){return o}),n.d(e,"watchProxies",function(){return s});var r=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},i=[];function o(t,e){var n={},o={};function s(i,s){void 0===i&&(i=n),void 0===s&&(s=!0);var a,u,h=Object.getOwnPropertyNames(i),l=function(r){if(o[r])return"continue";var i=n[r];Object.defineProperty(n,r,{get:function(){return e.get?e.get(t,r,n):t[r]},set:function(i){e.set?e.set(t,r,i,n):t[r]=i}}),s&&e.set(t,r,i,n),o[r]=!0};try{for(var c=r(h),f=c.next();!f.done;f=c.next()){l(f.value)}}catch(t){a={error:t}}finally{try{f&&!f.done&&(u=c.return)&&u.call(c)}finally{if(a)throw a.error}}}return s(t,!1),Object.setPrototypeOf(n,Object.getPrototypeOf(t)),i.push({target:t,update:s}),n}function s(){try{for(var t=r(i),e=t.next();!e.done;e=t.next()){e.value.update()}}catch(t){n={error:t}}finally{try{e&&!e.done&&(o=t.return)&&o.call(t)}finally{if(n)throw n.error}}var n,o}o.revocable=function(){throw Error("Proxy revoke not implemented")},window.Proxy||(window.Proxy=o,window.requestAnimationFrame(function t(){s(),window.requestAnimationFrame(t)}))},function(t,e,n){"use strict";t.exports=function(t){return!!t&&("symbol"==typeof t||!!t.constructor&&("Symbol"===t.constructor.name&&"Symbol"===t[t.constructor.toStringTag]))}},function(t,e,n){"use strict";var r=n(123);t.exports=function(t){if(!r(t))throw new TypeError(t+" is not a symbol");return t}},function(t,e,n){"use strict";var r=String.prototype.indexOf;t.exports=function(t){return r.call(this,t,arguments[1])>-1}},function(t,e,n){"use strict";var r="razdwatrzy";t.exports=function(){return"function"==typeof r.contains&&(!0===r.contains("dwa")&&!1===r.contains("foo"))}},function(t,e,n){"use strict";t.exports=n(126)()?String.prototype.contains:n(125)},function(t,e,n){"use strict";t.exports=function(t){return"function"==typeof t}},function(t,e,n){"use strict";var r=n(78),i=Array.prototype.forEach,o=Object.create;t.exports=function(t){var e=o(null);return i.call(arguments,function(t){r(t)&&function(t,e){var n;for(n in t)e[n]=t[n]}(Object(t),e)}),e}},function(t,e,n){"use strict";var r=n(78);t.exports=function(t){if(!r(t))throw new TypeError("Cannot use null or undefined");return t}},function(t,e,n){"use strict";t.exports=function(){}},function(t,e,n){"use strict";var r=n(78),i=Object.keys;t.exports=function(t){return i(r(t)?Object(t):t)}},function(t,e,n){"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}},function(t,e,n){"use strict";t.exports=n(133)()?Object.keys:n(132)},function(t,e,n){"use strict";var r=n(134),i=n(130),o=Math.max;t.exports=function(t,e){var n,s,a,u=o(arguments.length,2);for(t=Object(i(t)),a=function(r){try{t[r]=e[r]}catch(t){n||(n=t)}},s=1;s<u;++s)e=arguments[s],r(e).forEach(a);if(void 0!==n)throw n;return t}},function(t,e,n){"use strict";t.exports=function(){var t,e=Object.assign;return"function"==typeof e&&(e(t={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},function(t,e,n){"use strict";t.exports=n(136)()?Object.assign:n(135)},function(t,e,n){"use strict";var r=n(137),i=n(129),o=n(128),s=n(127);(t.exports=function(t,e){var n,o,a,u,h;return arguments.length<2||"string"!=typeof t?(u=e,e=t,t=null):u=arguments[2],null==t?(n=a=!0,o=!1):(n=s.call(t,"c"),o=s.call(t,"e"),a=s.call(t,"w")),h={value:e,configurable:n,enumerable:o,writable:a},u?r(i(u),h):h}).gs=function(t,e,n){var a,u,h,l;return"string"!=typeof t?(h=n,n=e,e=t,t=null):h=arguments[3],null==e?e=void 0:o(e)?null==n?n=void 0:o(n)||(h=n,n=void 0):(h=e,e=n=void 0),null==t?(a=!0,u=!1):(a=s.call(t,"c"),u=s.call(t,"e")),l={get:e,set:n,configurable:a,enumerable:u},h?r(i(h),l):l}},function(t,e,n){"use strict";var r,i,o,s,a=n(138),u=n(124),h=Object.create,l=Object.defineProperties,c=Object.defineProperty,f=Object.prototype,p=h(null);if("function"==typeof Symbol){r=Symbol;try{String(r()),s=!0}catch(t){}}var d,y=(d=h(null),function(t){for(var e,n,r=0;d[t+(r||"")];)++r;return d[t+=r||""]=!0,c(f,e="@@"+t,a.gs(null,function(t){n||(n=!0,c(this,e,a(t)),n=!1)})),e});o=function(t){if(this instanceof o)throw new TypeError("Symbol is not a constructor");return i(t)},t.exports=i=function t(e){var n;if(this instanceof t)throw new TypeError("Symbol is not a constructor");return s?r(e):(n=h(o.prototype),e=void 0===e?"":String(e),l(n,{__description__:a("",e),__name__:a("",y(e))}))},l(i,{for:a(function(t){return p[t]?p[t]:p[t]=i(String(t))}),keyFor:a(function(t){var e;for(e in u(t),p)if(p[e]===t)return e}),hasInstance:a("",r&&r.hasInstance||i("hasInstance")),isConcatSpreadable:a("",r&&r.isConcatSpreadable||i("isConcatSpreadable")),iterator:a("",r&&r.iterator||i("iterator")),match:a("",r&&r.match||i("match")),replace:a("",r&&r.replace||i("replace")),search:a("",r&&r.search||i("search")),species:a("",r&&r.species||i("species")),split:a("",r&&r.split||i("split")),toPrimitive:a("",r&&r.toPrimitive||i("toPrimitive")),toStringTag:a("",r&&r.toStringTag||i("toStringTag")),unscopables:a("",r&&r.unscopables||i("unscopables"))}),l(o.prototype,{constructor:a(i),toString:a("",function(){return this.__name__})}),l(i.prototype,{toString:a(function(){return"Symbol ("+u(this).__description__+")"}),valueOf:a(function(){return u(this)})}),c(i.prototype,i.toPrimitive,a("",function(){var t=u(this);return"symbol"==typeof t?t:t.toString()})),c(i.prototype,i.toStringTag,a("c","Symbol")),c(o.prototype,i.toStringTag,a("c",i.prototype[i.toStringTag])),c(o.prototype,i.toPrimitive,a("c",i.prototype[i.toPrimitive]))},function(t,e){t.exports=function(){return this}()},function(t,e,n){"use strict";var r={object:!0,symbol:!0};t.exports=function(){var t;if("function"!=typeof Symbol)return!1;t=Symbol("test symbol");try{String(t)}catch(t){return!1}return!!r[typeof Symbol.iterator]&&(!!r[typeof Symbol.toPrimitive]&&!!r[typeof Symbol.toStringTag])}},function(t,e,n){"use strict";n(141)()||Object.defineProperty(n(140),"Symbol",{value:n(139),configurable:!0,enumerable:!1,writable:!0})},function(t,e,n){Math.sign||(Math.sign=function(t){return t>0?1:0===t?0:-1}),Number.parseInt||(Number.parseInt=window.parseInt),Number.parseFloat||(Number.parseFloat=window.parseFloat),String.prototype.includes||(String.prototype.includes=function(t,e){"use strict";return"number"!=typeof e&&(e=0),!(e+t.length>this.length)&&-1!==this.indexOf(t,e)});var r=Object.keys;Object.keys=function(t){switch(typeof t){case"string":for(var e=[],n=0;n<t.length;n++)e.push(n.toString());return e;case"boolean":case"number":case"function":return[];default:return r(t)}},Array.prototype.fill||Object.defineProperty(Array.prototype,"fill",{value:function(t){if(null==this)throw new TypeError("this is null or not defined");for(var e=Object(this),n=e.length>>>0,r=arguments[1]>>0,i=r<0?Math.max(n+r,0):Math.min(r,n),o=arguments[2],s=void 0===o?n:o>>0,a=s<0?Math.max(n+s,0):Math.min(s,n);i<a;)e[i]=t,i++;return e}}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,e){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),r=1;r<arguments.length;r++){var i=arguments[r];if(null!=i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},writable:!0,configurable:!0}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var r=arguments[1],i=0;i<n;){var o=e[i];if(t.call(r,o,i,e))return o;i++}}}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var r=arguments[1],i=0;i<n;){var o=e[i];if(t.call(r,o,i,e))return i;i++}return-1}}),n(142),n(122)},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";n.r(e);var r=n(103),i=n(85);window.addEventListener("app-start",function(){var t=new r.a,e=new i.a;window.G_APP=t;t.loadApplication(e)},!0)}];var func492=function(t,e,n){var r,i,o;i=[],void 0===(o="function"==typeof(r=function(){"use strict";function t(t,e,n){this.low=0|t,this.high=0|e,this.unsigned=!!n}function e(t){return!0===(t&&t.__isLong__)}t.prototype.__isLong__,Object.defineProperty(t.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),t.isLong=e;var n={},r={};function i(t,e){var i,o,a;return e?(a=0<=(t>>>=0)&&t<256)&&(o=r[t])?o:(i=s(t,(0|t)<0?-1:0,!0),a&&(r[t]=i),i):(a=-128<=(t|=0)&&t<128)&&(o=n[t])?o:(i=s(t,t<0?-1:0,!1),a&&(n[t]=i),i)}function o(t,e){if(isNaN(t)||!isFinite(t))return e?y:d;if(e){if(t<0)return y;if(t>=c)return w}else{if(t<=-f)return E;if(t+1>=f)return b}return t<0?o(-t,e).neg():s(t%l|0,t/l|0,e)}function s(e,n,r){return new t(e,n,r)}t.fromInt=i,t.fromNumber=o,t.fromBits=s;var a=Math.pow;function u(t,e,n){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return d;if("number"==typeof e?(n=e,e=!1):e=!!e,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return u(t.substring(1),e,n).neg();for(var i=o(a(n,8)),s=d,h=0;h<t.length;h+=8){var l=Math.min(8,t.length-h),c=parseInt(t.substring(h,h+l),n);if(l<8){var f=o(a(n,l));s=s.mul(f).add(o(c))}else s=(s=s.mul(i)).add(o(c))}return s.unsigned=e,s}function h(e){return e instanceof t?e:"number"==typeof e?o(e):"string"==typeof e?u(e):s(e.low,e.high,e.unsigned)}t.fromString=u,t.fromValue=h;var l=4294967296,c=l*l,f=c/2,p=i(1<<24),d=i(0);t.ZERO=d;var y=i(0,!0);t.UZERO=y;var m=i(1);t.ONE=m;var g=i(1,!0);t.UONE=g;var v=i(-1);t.NEG_ONE=v;var b=s(-1,2147483647,!1);t.MAX_VALUE=b;var w=s(-1,-1,!0);t.MAX_UNSIGNED_VALUE=w;var E=s(0,-2147483648,!1);t.MIN_VALUE=E;var _=t.prototype;return _.toInt=function(){return this.unsigned?this.low>>>0:this.low},_.toNumber=function(){return this.unsigned?(this.high>>>0)*l+(this.low>>>0):this.high*l+(this.low>>>0)},_.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(E)){var e=o(t),n=this.div(e),r=n.mul(e).sub(this);return n.toString(t)+r.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var i=o(a(t,6),this.unsigned),s=this,u="";;){var h=s.div(i),l=(s.sub(h.mul(i)).toInt()>>>0).toString(t);if((s=h).isZero())return l+u;for(;l.length<6;)l="0"+l;u=""+l+u}},_.getHighBits=function(){return this.high},_.getHighBitsUnsigned=function(){return this.high>>>0},_.getLowBits=function(){return this.low},_.getLowBitsUnsigned=function(){return this.low>>>0},_.getNumBitsAbs=function(){if(this.isNegative())return this.eq(E)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},_.isZero=function(){return 0===this.high&&0===this.low},_.isNegative=function(){return!this.unsigned&&this.high<0},_.isPositive=function(){return this.unsigned||this.high>=0},_.isOdd=function(){return 1==(1&this.low)},_.isEven=function(){return 0==(1&this.low)},_.equals=function(t){return e(t)||(t=h(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&this.high===t.high&&this.low===t.low},_.eq=_.equals,_.notEquals=function(t){return!this.eq(t)},_.neq=_.notEquals,_.lessThan=function(t){return this.comp(t)<0},_.lt=_.lessThan,_.lessThanOrEqual=function(t){return this.comp(t)<=0},_.lte=_.lessThanOrEqual,_.greaterThan=function(t){return this.comp(t)>0},_.gt=_.greaterThan,_.greaterThanOrEqual=function(t){return this.comp(t)>=0},_.gte=_.greaterThanOrEqual,_.compare=function(t){if(e(t)||(t=h(t)),this.eq(t))return 0;var n=this.isNegative(),r=t.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},_.comp=_.compare,_.negate=function(){return!this.unsigned&&this.eq(E)?E:this.not().add(m)},_.neg=_.negate,_.add=function(t){e(t)||(t=h(t));var n=this.high>>>16,r=65535&this.high,i=this.low>>>16,o=65535&this.low,a=t.high>>>16,u=65535&t.high,l=t.low>>>16,c=0,f=0,p=0,d=0;return p+=(d+=o+(65535&t.low))>>>16,f+=(p+=i+l)>>>16,c+=(f+=r+u)>>>16,c+=n+a,s((p&=65535)<<16|(d&=65535),(c&=65535)<<16|(f&=65535),this.unsigned)},_.subtract=function(t){return e(t)||(t=h(t)),this.add(t.neg())},_.sub=_.subtract,_.multiply=function(t){if(this.isZero())return d;if(e(t)||(t=h(t)),t.isZero())return d;if(this.eq(E))return t.isOdd()?E:d;if(t.eq(E))return this.isOdd()?E:d;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(p)&&t.lt(p))return o(this.toNumber()*t.toNumber(),this.unsigned);var n=this.high>>>16,r=65535&this.high,i=this.low>>>16,a=65535&this.low,u=t.high>>>16,l=65535&t.high,c=t.low>>>16,f=65535&t.low,y=0,m=0,g=0,v=0;return g+=(v+=a*f)>>>16,m+=(g+=i*f)>>>16,g&=65535,m+=(g+=a*c)>>>16,y+=(m+=r*f)>>>16,m&=65535,y+=(m+=i*c)>>>16,m&=65535,y+=(m+=a*l)>>>16,y+=n*f+r*c+i*l+a*u,s((g&=65535)<<16|(v&=65535),(y&=65535)<<16|(m&=65535),this.unsigned)},_.mul=_.multiply,_.divide=function(t){if(e(t)||(t=h(t)),t.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?y:d;var n,r,i;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return y;if(t.gt(this.shru(1)))return g;i=y}else{if(this.eq(E))return t.eq(m)||t.eq(v)?E:t.eq(E)?m:(n=this.shr(1).div(t).shl(1)).eq(d)?t.isNegative()?m:v:(r=this.sub(t.mul(n)),i=n.add(r.div(t)));if(t.eq(E))return this.unsigned?y:d;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();i=d}for(r=this;r.gte(t);){n=Math.max(1,Math.floor(r.toNumber()/t.toNumber()));for(var s=Math.ceil(Math.log(n)/Math.LN2),u=s<=48?1:a(2,s-48),l=o(n),c=l.mul(t);c.isNegative()||c.gt(r);)c=(l=o(n-=u,this.unsigned)).mul(t);l.isZero()&&(l=m),i=i.add(l),r=r.sub(c)}return i},_.div=_.divide,_.modulo=function(t){return e(t)||(t=h(t)),this.sub(this.div(t).mul(t))},_.mod=_.modulo,_.not=function(){return s(~this.low,~this.high,this.unsigned)},_.and=function(t){return e(t)||(t=h(t)),s(this.low&t.low,this.high&t.high,this.unsigned)},_.or=function(t){return e(t)||(t=h(t)),s(this.low|t.low,this.high|t.high,this.unsigned)},_.xor=function(t){return e(t)||(t=h(t)),s(this.low^t.low,this.high^t.high,this.unsigned)},_.shiftLeft=function(t){return e(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?s(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):s(0,this.low<<t-32,this.unsigned)},_.shl=_.shiftLeft,_.shiftRight=function(t){return e(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?s(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):s(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},_.shr=_.shiftRight,_.shiftRightUnsigned=function(t){if(e(t)&&(t=t.toInt()),0==(t&=63))return this;var n=this.high;return t<32?s(this.low>>>t|n<<32-t,n>>>t,this.unsigned):s(32===t?n:n>>>t-32,0,this.unsigned)},_.shru=_.shiftRightUnsigned,_.toSigned=function(){return this.unsigned?s(this.low,this.high,!1):this},_.toUnsigned=function(){return this.unsigned?this:s(this.low,this.high,!0)},_.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},_.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24&255,255&t,t>>>8&255,t>>>16&255,t>>>24&255]},_.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24&255,t>>>16&255,t>>>8&255,255&t,e>>>24&255,e>>>16&255,e>>>8&255,255&e]},t})?r.apply(e,i):r)||(t.exports=o)};var func493=function(t,e,n){var r,i,o;i=[n(492)],void 0===(o="function"==typeof(r=function(t){"use strict";var e=function(t,n,i){if(void 0===t&&(t=e.DEFAULT_CAPACITY),void 0===n&&(n=e.DEFAULT_ENDIAN),void 0===i&&(i=e.DEFAULT_NOASSERT),!i){if((t|=0)<0)throw RangeError("Illegal capacity");n=!!n,i=!!i}this.buffer=0===t?r:new ArrayBuffer(t),this.view=0===t?null:new Uint8Array(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=t,this.littleEndian=n,this.noAssert=i};e.VERSION="5.0.1",e.LITTLE_ENDIAN=!0,e.BIG_ENDIAN=!1,e.DEFAULT_CAPACITY=16,e.DEFAULT_ENDIAN=e.BIG_ENDIAN,e.DEFAULT_NOASSERT=!1,e.Long=t||null;var n=e.prototype;n.__isByteBuffer__,Object.defineProperty(n,"__isByteBuffer__",{value:!0,enumerable:!1,configurable:!1});var r=new ArrayBuffer(0),i=String.fromCharCode;function o(t){var e=0;return function(){return e<t.length?t.charCodeAt(e++):null}}function s(){var t=[],e=[];return function(){if(0===arguments.length)return e.join("")+i.apply(String,t);t.length+arguments.length>1024&&(e.push(i.apply(String,t)),t.length=0),Array.prototype.push.apply(t,arguments)}}function a(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,h=u>>1,l=-7,c=n?i-1:0,f=n?-1:1,p=t[e+c];for(c+=f,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+t[e+c],c+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+t[e+c],c+=f,l-=8);if(0===o)o=1-h;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=h}return(p?-1:1)*s*Math.pow(2,o-r)}function u(t,e,n,r,i,o){var s,a,u,h=8*o-i-1,l=(1<<h)-1,c=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+c>=1?f/u:f*Math.pow(2,1-c))*u>=2&&(s++,u/=2),s+c>=l?(a=0,s=l):s+c>=1?(a=(e*u-1)*Math.pow(2,i),s+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,i),s=0));i>=8;t[n+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,h+=i;h>0;t[n+p]=255&s,p+=d,s/=256,h-=8);t[n+p-d]|=128*y}e.accessor=function(){return Uint8Array},e.allocate=function(t,n,r){return new e(t,n,r)},e.concat=function(t,n,r,i){"boolean"!=typeof n&&"string"==typeof n||(i=r,r=n,n=void 0);for(var o,s=0,a=0,u=t.length;a<u;++a)e.isByteBuffer(t[a])||(t[a]=e.wrap(t[a],n)),(o=t[a].limit-t[a].offset)>0&&(s+=o);if(0===s)return new e(0,r,i);var h,l=new e(s,r,i);for(a=0;a<u;)(o=(h=t[a++]).limit-h.offset)<=0||(l.view.set(h.view.subarray(h.offset,h.limit),l.offset),l.offset+=o);return l.limit=l.offset,l.offset=0,l},e.isByteBuffer=function(t){return!0===(t&&t.__isByteBuffer__)},e.type=function(){return ArrayBuffer},e.wrap=function(t,r,i,o){if("string"!=typeof r&&(o=i,i=r,r=void 0),"string"==typeof t)switch(void 0===r&&(r="utf8"),r){case"base64":return e.fromBase64(t,i);case"hex":return e.fromHex(t,i);case"binary":return e.fromBinary(t,i);case"utf8":return e.fromUTF8(t,i);case"debug":return e.fromDebug(t,i);default:throw Error("Unsupported encoding: "+r)}if(null===t||"object"!=typeof t)throw TypeError("Illegal buffer");var s;if(e.isByteBuffer(t))return(s=n.clone.call(t)).markedOffset=-1,s;if(t instanceof Uint8Array)s=new e(0,i,o),t.length>0&&(s.buffer=t.buffer,s.offset=t.byteOffset,s.limit=t.byteOffset+t.byteLength,s.view=new Uint8Array(t.buffer));else if(t instanceof ArrayBuffer)s=new e(0,i,o),t.byteLength>0&&(s.buffer=t,s.offset=0,s.limit=t.byteLength,s.view=t.byteLength>0?new Uint8Array(t):null);else{if("[object Array]"!==Object.prototype.toString.call(t))throw TypeError("Illegal buffer");(s=new e(t.length,i,o)).limit=t.length;for(var a=0;a<t.length;++a)s.view[a]=t[a]}return s},n.writeBitSet=function(t,e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if(!(t instanceof Array))throw TypeError("Illegal BitSet: Not an array");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}var r,i=e,o=t.length,s=o>>3,a=0;for(e+=this.writeVarint32(o,e);s--;)r=1&!!t[a++]|(1&!!t[a++])<<1|(1&!!t[a++])<<2|(1&!!t[a++])<<3|(1&!!t[a++])<<4|(1&!!t[a++])<<5|(1&!!t[a++])<<6|(1&!!t[a++])<<7,this.writeByte(r,e++);if(a<o){var u=0;for(r=0;a<o;)r|=(1&!!t[a++])<<u++;this.writeByte(r,e++)}return n?(this.offset=e,this):e-i},n.readBitSet=function(t){var e=void 0===t;e&&(t=this.offset);var n,r=this.readVarint32(t),i=r.value,o=i>>3,s=0,a=[];for(t+=r.length;o--;)n=this.readByte(t++),a[s++]=!!(1&n),a[s++]=!!(2&n),a[s++]=!!(4&n),a[s++]=!!(8&n),a[s++]=!!(16&n),a[s++]=!!(32&n),a[s++]=!!(64&n),a[s++]=!!(128&n);if(s<i){var u=0;for(n=this.readByte(t++);s<i;)a[s++]=!!(n>>u++&1)}return e&&(this.offset=t),a},n.readBytes=function(t,e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+t>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+"+t+") <= "+this.buffer.byteLength)}var r=this.slice(e,e+t);return n&&(this.offset+=t),r},n.writeBytes=n.append,n.writeInt8=function(t,e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=1;var r=this.buffer.byteLength;return e>r&&this.resize((r*=2)>e?r:e),e-=1,this.view[e]=t,n&&(this.offset+=1),this},n.writeByte=n.writeInt8,n.readInt8=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var n=this.view[t];return 128==(128&n)&&(n=-(255-n+1)),e&&(this.offset+=1),n},n.readByte=n.readInt8,n.writeUint8=function(t,e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=1;var r=this.buffer.byteLength;return e>r&&this.resize((r*=2)>e?r:e),e-=1,this.view[e]=t,n&&(this.offset+=1),this},n.writeUInt8=n.writeUint8,n.readUint8=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var n=this.view[t];return e&&(this.offset+=1),n},n.readUInt8=n.readUint8,n.writeInt16=function(t,e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=2;var r=this.buffer.byteLength;return e>r&&this.resize((r*=2)>e?r:e),e-=2,this.littleEndian?(this.view[e+1]=(65280&t)>>>8,this.view[e]=255&t):(this.view[e]=(65280&t)>>>8,this.view[e+1]=255&t),n&&(this.offset+=2),this},n.writeShort=n.writeInt16,n.readInt16=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+2) <= "+this.buffer.byteLength)}var n=0;return this.littleEndian?(n=this.view[t],n|=this.view[t+1]<<8):(n=this.view[t]<<8,n|=this.view[t+1]),32768==(32768&n)&&(n=-(65535-n+1)),e&&(this.offset+=2),n},n.readShort=n.readInt16,n.writeUint16=function(t,e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=2;var r=this.buffer.byteLength;return e>r&&this.resize((r*=2)>e?r:e),e-=2,this.littleEndian?(this.view[e+1]=(65280&t)>>>8,this.view[e]=255&t):(this.view[e]=(65280&t)>>>8,this.view[e+1]=255&t),n&&(this.offset+=2),this},n.writeUInt16=n.writeUint16,n.readUint16=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+2) <= "+this.buffer.byteLength)}var n=0;return this.littleEndian?(n=this.view[t],n|=this.view[t+1]<<8):(n=this.view[t]<<8,n|=this.view[t+1]),e&&(this.offset+=2),n},n.readUInt16=n.readUint16,n.writeInt32=function(t,e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var r=this.buffer.byteLength;return e>r&&this.resize((r*=2)>e?r:e),e-=4,this.littleEndian?(this.view[e+3]=t>>>24&255,this.view[e+2]=t>>>16&255,this.view[e+1]=t>>>8&255,this.view[e]=255&t):(this.view[e]=t>>>24&255,this.view[e+1]=t>>>16&255,this.view[e+2]=t>>>8&255,this.view[e+3]=255&t),n&&(this.offset+=4),this},n.writeInt=n.writeInt32,n.readInt32=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var n=0;return this.littleEndian?(n=this.view[t+2]<<16,n|=this.view[t+1]<<8,n|=this.view[t],n+=this.view[t+3]<<24>>>0):(n=this.view[t+1]<<16,n|=this.view[t+2]<<8,n|=this.view[t+3],n+=this.view[t]<<24>>>0),n|=0,e&&(this.offset+=4),n},n.readInt=n.readInt32,n.writeUint32=function(t,e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var r=this.buffer.byteLength;return e>r&&this.resize((r*=2)>e?r:e),e-=4,this.littleEndian?(this.view[e+3]=t>>>24&255,this.view[e+2]=t>>>16&255,this.view[e+1]=t>>>8&255,this.view[e]=255&t):(this.view[e]=t>>>24&255,this.view[e+1]=t>>>16&255,this.view[e+2]=t>>>8&255,this.view[e+3]=255&t),n&&(this.offset+=4),this},n.writeUInt32=n.writeUint32,n.readUint32=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var n=0;return this.littleEndian?(n=this.view[t+2]<<16,n|=this.view[t+1]<<8,n|=this.view[t],n+=this.view[t+3]<<24>>>0):(n=this.view[t+1]<<16,n|=this.view[t+2]<<8,n|=this.view[t+3],n+=this.view[t]<<24>>>0),e&&(this.offset+=4),n},n.readUInt32=n.readUint32,t&&(n.writeInt64=function(e,n){var r=void 0===n;if(r&&(n=this.offset),!this.noAssert){if("number"==typeof e)e=t.fromNumber(e);else if("string"==typeof e)e=t.fromString(e);else if(!(e&&e instanceof t))throw TypeError("Illegal value: "+e+" (not an integer or Long)");if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}"number"==typeof e?e=t.fromNumber(e):"string"==typeof e&&(e=t.fromString(e)),n+=8;var i=this.buffer.byteLength;n>i&&this.resize((i*=2)>n?i:n),n-=8;var o=e.low,s=e.high;return this.littleEndian?(this.view[n+3]=o>>>24&255,this.view[n+2]=o>>>16&255,this.view[n+1]=o>>>8&255,this.view[n]=255&o,n+=4,this.view[n+3]=s>>>24&255,this.view[n+2]=s>>>16&255,this.view[n+1]=s>>>8&255,this.view[n]=255&s):(this.view[n]=s>>>24&255,this.view[n+1]=s>>>16&255,this.view[n+2]=s>>>8&255,this.view[n+3]=255&s,n+=4,this.view[n]=o>>>24&255,this.view[n+1]=o>>>16&255,this.view[n+2]=o>>>8&255,this.view[n+3]=255&o),r&&(this.offset+=8),this},n.writeLong=n.writeInt64,n.readInt64=function(e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var r=0,i=0;this.littleEndian?(r=this.view[e+2]<<16,r|=this.view[e+1]<<8,r|=this.view[e],r+=this.view[e+3]<<24>>>0,e+=4,i=this.view[e+2]<<16,i|=this.view[e+1]<<8,i|=this.view[e],i+=this.view[e+3]<<24>>>0):(i=this.view[e+1]<<16,i|=this.view[e+2]<<8,i|=this.view[e+3],i+=this.view[e]<<24>>>0,e+=4,r=this.view[e+1]<<16,r|=this.view[e+2]<<8,r|=this.view[e+3],r+=this.view[e]<<24>>>0);var o=new t(r,i,!1);return n&&(this.offset+=8),o},n.readLong=n.readInt64,n.writeUint64=function(e,n){var r=void 0===n;if(r&&(n=this.offset),!this.noAssert){if("number"==typeof e)e=t.fromNumber(e);else if("string"==typeof e)e=t.fromString(e);else if(!(e&&e instanceof t))throw TypeError("Illegal value: "+e+" (not an integer or Long)");if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}"number"==typeof e?e=t.fromNumber(e):"string"==typeof e&&(e=t.fromString(e)),n+=8;var i=this.buffer.byteLength;n>i&&this.resize((i*=2)>n?i:n),n-=8;var o=e.low,s=e.high;return this.littleEndian?(this.view[n+3]=o>>>24&255,this.view[n+2]=o>>>16&255,this.view[n+1]=o>>>8&255,this.view[n]=255&o,n+=4,this.view[n+3]=s>>>24&255,this.view[n+2]=s>>>16&255,this.view[n+1]=s>>>8&255,this.view[n]=255&s):(this.view[n]=s>>>24&255,this.view[n+1]=s>>>16&255,this.view[n+2]=s>>>8&255,this.view[n+3]=255&s,n+=4,this.view[n]=o>>>24&255,this.view[n+1]=o>>>16&255,this.view[n+2]=o>>>8&255,this.view[n+3]=255&o),r&&(this.offset+=8),this},n.writeUInt64=n.writeUint64,n.readUint64=function(e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var r=0,i=0;this.littleEndian?(r=this.view[e+2]<<16,r|=this.view[e+1]<<8,r|=this.view[e],r+=this.view[e+3]<<24>>>0,e+=4,i=this.view[e+2]<<16,i|=this.view[e+1]<<8,i|=this.view[e],i+=this.view[e+3]<<24>>>0):(i=this.view[e+1]<<16,i|=this.view[e+2]<<8,i|=this.view[e+3],i+=this.view[e]<<24>>>0,e+=4,r=this.view[e+1]<<16,r|=this.view[e+2]<<8,r|=this.view[e+3],r+=this.view[e]<<24>>>0);var o=new t(r,i,!0);return n&&(this.offset+=8),o},n.readUInt64=n.readUint64),n.writeFloat32=function(t,e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof t)throw TypeError("Illegal value: "+t+" (not a number)");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var r=this.buffer.byteLength;return e>r&&this.resize((r*=2)>e?r:e),e-=4,u(this.view,t,e,this.littleEndian,23,4),n&&(this.offset+=4),this},n.writeFloat=n.writeFloat32,n.readFloat32=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var n=a(this.view,t,this.littleEndian,23,4);return e&&(this.offset+=4),n},n.readFloat=n.readFloat32,n.writeFloat64=function(t,e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof t)throw TypeError("Illegal value: "+t+" (not a number)");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=8;var r=this.buffer.byteLength;return e>r&&this.resize((r*=2)>e?r:e),e-=8,u(this.view,t,e,this.littleEndian,52,8),n&&(this.offset+=8),this},n.writeDouble=n.writeFloat64,n.readFloat64=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var n=a(this.view,t,this.littleEndian,52,8);return e&&(this.offset+=8),n},n.readDouble=n.readFloat64,e.MAX_VARINT32_BYTES=5,e.calculateVarint32=function(t){return(t>>>=0)<128?1:t<16384?2:t<1<<21?3:t<1<<28?4:5},e.zigZagEncode32=function(t){return((t|=0)<<1^t>>31)>>>0},e.zigZagDecode32=function(t){return t>>>1^-(1&t)|0},n.writeVarint32=function(t,n){var r=void 0===n;if(r&&(n=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}var i,o=e.calculateVarint32(t);n+=o;var s=this.buffer.byteLength;for(n>s&&this.resize((s*=2)>n?s:n),n-=o,t>>>=0;t>=128;)i=127&t|128,this.view[n++]=i,t>>>=7;return this.view[n++]=t,r?(this.offset=n,this):o},n.writeVarint32ZigZag=function(t,n){return this.writeVarint32(e.zigZagEncode32(t),n)},n.readVarint32=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var n,r=0,i=0;do{if(!this.noAssert&&t>this.limit){var o=Error("Truncated");throw o.truncated=!0,o}n=this.view[t++],r<5&&(i|=(127&n)<<7*r),++r}while(0!=(128&n));return i|=0,e?(this.offset=t,i):{value:i,length:r}},n.readVarint32ZigZag=function(t){var n=this.readVarint32(t);return"object"==typeof n?n.value=e.zigZagDecode32(n.value):n=e.zigZagDecode32(n),n},t&&(e.MAX_VARINT64_BYTES=10,e.calculateVarint64=function(e){"number"==typeof e?e=t.fromNumber(e):"string"==typeof e&&(e=t.fromString(e));var n=e.toInt()>>>0,r=e.shiftRightUnsigned(28).toInt()>>>0,i=e.shiftRightUnsigned(56).toInt()>>>0;return 0==i?0==r?n<16384?n<128?1:2:n<1<<21?3:4:r<16384?r<128?5:6:r<1<<21?7:8:i<128?9:10},e.zigZagEncode64=function(e){return"number"==typeof e?e=t.fromNumber(e,!1):"string"==typeof e?e=t.fromString(e,!1):!1!==e.unsigned&&(e=e.toSigned()),e.shiftLeft(1).xor(e.shiftRight(63)).toUnsigned()},e.zigZagDecode64=function(e){return"number"==typeof e?e=t.fromNumber(e,!1):"string"==typeof e?e=t.fromString(e,!1):!1!==e.unsigned&&(e=e.toSigned()),e.shiftRightUnsigned(1).xor(e.and(t.ONE).toSigned().negate()).toSigned()},n.writeVarint64=function(n,r){var i=void 0===r;if(i&&(r=this.offset),!this.noAssert){if("number"==typeof n)n=t.fromNumber(n);else if("string"==typeof n)n=t.fromString(n);else if(!(n&&n instanceof t))throw TypeError("Illegal value: "+n+" (not an integer or Long)");if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}"number"==typeof n?n=t.fromNumber(n,!1):"string"==typeof n?n=t.fromString(n,!1):!1!==n.unsigned&&(n=n.toSigned());var o=e.calculateVarint64(n),s=n.toInt()>>>0,a=n.shiftRightUnsigned(28).toInt()>>>0,u=n.shiftRightUnsigned(56).toInt()>>>0;r+=o;var h=this.buffer.byteLength;switch(r>h&&this.resize((h*=2)>r?h:r),r-=o,o){case 10:this.view[r+9]=u>>>7&1;case 9:this.view[r+8]=9!==o?128|u:127&u;case 8:this.view[r+7]=8!==o?a>>>21|128:a>>>21&127;case 7:this.view[r+6]=7!==o?a>>>14|128:a>>>14&127;case 6:this.view[r+5]=6!==o?a>>>7|128:a>>>7&127;case 5:this.view[r+4]=5!==o?128|a:127&a;case 4:this.view[r+3]=4!==o?s>>>21|128:s>>>21&127;case 3:this.view[r+2]=3!==o?s>>>14|128:s>>>14&127;case 2:this.view[r+1]=2!==o?s>>>7|128:s>>>7&127;case 1:this.view[r]=1!==o?128|s:127&s}return i?(this.offset+=o,this):o},n.writeVarint64ZigZag=function(t,n){return this.writeVarint64(e.zigZagEncode64(t),n)},n.readVarint64=function(e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var r=e,i=0,o=0,s=0,a=0;if(a=this.view[e++],i=127&a,128&a&&(a=this.view[e++],i|=(127&a)<<7,(128&a||this.noAssert&&void 0===a)&&(a=this.view[e++],i|=(127&a)<<14,(128&a||this.noAssert&&void 0===a)&&(a=this.view[e++],i|=(127&a)<<21,(128&a||this.noAssert&&void 0===a)&&(a=this.view[e++],o=127&a,(128&a||this.noAssert&&void 0===a)&&(a=this.view[e++],o|=(127&a)<<7,(128&a||this.noAssert&&void 0===a)&&(a=this.view[e++],o|=(127&a)<<14,(128&a||this.noAssert&&void 0===a)&&(a=this.view[e++],o|=(127&a)<<21,(128&a||this.noAssert&&void 0===a)&&(a=this.view[e++],s=127&a,(128&a||this.noAssert&&void 0===a)&&(a=this.view[e++],s|=(127&a)<<7,128&a||this.noAssert&&void 0===a))))))))))throw Error("Buffer overrun");var u=t.fromBits(i|o<<28,o>>>4|s<<24,!1);return n?(this.offset=e,u):{value:u,length:e-r}},n.readVarint64ZigZag=function(n){var r=this.readVarint64(n);return r&&r.value instanceof t?r.value=e.zigZagDecode64(r.value):r=e.zigZagDecode64(r),r}),n.writeCString=function(t,e){var n=void 0===e;n&&(e=this.offset);var r,i=t.length;if(!this.noAssert){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");for(r=0;r<i;++r)if(0===t.charCodeAt(r))throw RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}i=l.calculateUTF16asUTF8(o(t))[1],e+=i+1;var s=this.buffer.byteLength;return e>s&&this.resize((s*=2)>e?s:e),e-=i+1,l.encodeUTF16toUTF8(o(t),function(t){this.view[e++]=t}.bind(this)),this.view[e++]=0,n?(this.offset=e,this):i},n.readCString=function(t){var e=void 0===t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var n,r=t,i=-1;return l.decodeUTF8toUTF16(function(){if(0===i)return null;if(t>=this.limit)throw RangeError("Illegal range: Truncated data, "+t+" < "+this.limit);return 0===(i=this.view[t++])?null:i}.bind(this),n=s(),!0),e?(this.offset=t,n()):{string:n(),length:t-r}},n.writeIString=function(t,e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}var r,i=e;r=l.calculateUTF16asUTF8(o(t),this.noAssert)[1],e+=4+r;var s=this.buffer.byteLength;if(e>s&&this.resize((s*=2)>e?s:e),e-=4+r,this.littleEndian?(this.view[e+3]=r>>>24&255,this.view[e+2]=r>>>16&255,this.view[e+1]=r>>>8&255,this.view[e]=255&r):(this.view[e]=r>>>24&255,this.view[e+1]=r>>>16&255,this.view[e+2]=r>>>8&255,this.view[e+3]=255&r),e+=4,l.encodeUTF16toUTF8(o(t),function(t){this.view[e++]=t}.bind(this)),e!==i+4+r)throw RangeError("Illegal range: Truncated data, "+e+" == "+(e+4+r));return n?(this.offset=e,this):e-i},n.readIString=function(t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var r=t,i=this.readUint32(t),o=this.readUTF8String(i,e.METRICS_BYTES,t+=4);return t+=o.length,n?(this.offset=t,o.string):{string:o.string,length:t-r}},e.METRICS_CHARS="c",e.METRICS_BYTES="b",n.writeUTF8String=function(t,e){var n,r=void 0===e;if(r&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}var i=e;n=l.calculateUTF16asUTF8(o(t))[1],e+=n;var s=this.buffer.byteLength;return e>s&&this.resize((s*=2)>e?s:e),e-=n,l.encodeUTF16toUTF8(o(t),function(t){this.view[e++]=t}.bind(this)),r?(this.offset=e,this):e-i},n.writeString=n.writeUTF8String,e.calculateUTF8Chars=function(t){return l.calculateUTF16asUTF8(o(t))[0]},e.calculateUTF8Bytes=function(t){return l.calculateUTF16asUTF8(o(t))[1]},e.calculateString=e.calculateUTF8Bytes,n.readUTF8String=function(t,n,r){"number"==typeof n&&(r=n,n=void 0);var i=void 0===r;if(i&&(r=this.offset),void 0===n&&(n=e.METRICS_CHARS),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal length: "+t+" (not an integer)");if(t|=0,"number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}var o,a=0,u=r;if(n===e.METRICS_CHARS){if(o=s(),l.decodeUTF8(function(){return a<t&&r<this.limit?this.view[r++]:null}.bind(this),function(t){++a,l.UTF8toUTF16(t,o)}),a!==t)throw RangeError("Illegal range: Truncated data, "+a+" == "+t);return i?(this.offset=r,o()):{string:o(),length:r-u}}if(n===e.METRICS_BYTES){if(!this.noAssert){if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+t>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+"+t+") <= "+this.buffer.byteLength)}var h=r+t;if(l.decodeUTF8toUTF16(function(){return r<h?this.view[r++]:null}.bind(this),o=s(),this.noAssert),r!==h)throw RangeError("Illegal range: Truncated data, "+r+" == "+h);return i?(this.offset=r,o()):{string:o(),length:r-u}}throw TypeError("Unsupported metrics: "+n)},n.readString=n.readUTF8String,n.writeVString=function(t,n){var r=void 0===n;if(r&&(n=this.offset),!this.noAssert){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}var i,s,a=n;i=l.calculateUTF16asUTF8(o(t),this.noAssert)[1],s=e.calculateVarint32(i),n+=s+i;var u=this.buffer.byteLength;if(n>u&&this.resize((u*=2)>n?u:n),n-=s+i,n+=this.writeVarint32(i,n),l.encodeUTF16toUTF8(o(t),function(t){this.view[n++]=t}.bind(this)),n!==a+i+s)throw RangeError("Illegal range: Truncated data, "+n+" == "+(n+i+s));return r?(this.offset=n,this):n-a},n.readVString=function(t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var r=t,i=this.readVarint32(t),o=this.readUTF8String(i.value,e.METRICS_BYTES,t+=i.length);return t+=o.length,n?(this.offset=t,o.string):{string:o.string,length:t-r}},n.append=function(t,n,r){"number"!=typeof n&&"string"==typeof n||(r=n,n=void 0);var i=void 0===r;if(i&&(r=this.offset),!this.noAssert){if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}t instanceof e||(t=e.wrap(t,n));var o=t.limit-t.offset;if(o<=0)return this;r+=o;var s=this.buffer.byteLength;return r>s&&this.resize((s*=2)>r?s:r),r-=o,this.view.set(t.view.subarray(t.offset,t.limit),r),t.offset+=o,i&&(this.offset+=o),this},n.appendTo=function(t,e){return t.append(this,e),this},n.assert=function(t){return this.noAssert=!t,this},n.capacity=function(){return this.buffer.byteLength},n.clear=function(){return this.offset=0,this.limit=this.buffer.byteLength,this.markedOffset=-1,this},n.clone=function(t){var n=new e(0,this.littleEndian,this.noAssert);return t?(n.buffer=new ArrayBuffer(this.buffer.byteLength),n.view=new Uint8Array(n.buffer)):(n.buffer=this.buffer,n.view=this.view),n.offset=this.offset,n.markedOffset=this.markedOffset,n.limit=this.limit,n},n.compact=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.limit),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}if(0===t&&e===this.buffer.byteLength)return this;var n=e-t;if(0===n)return this.buffer=r,this.view=null,this.markedOffset>=0&&(this.markedOffset-=t),this.offset=0,this.limit=0,this;var i=new ArrayBuffer(n),o=new Uint8Array(i);return o.set(this.view.subarray(t,e)),this.buffer=i,this.view=o,this.markedOffset>=0&&(this.markedOffset-=t),this.offset=0,this.limit=n,this},n.copy=function(t,n){if(void 0===t&&(t=this.offset),void 0===n&&(n=this.limit),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof n||n%1!=0)throw TypeError("Illegal end: Not an integer");if(n>>>=0,t<0||t>n||n>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+n+" <= "+this.buffer.byteLength)}if(t===n)return new e(0,this.littleEndian,this.noAssert);var r=n-t,i=new e(r,this.littleEndian,this.noAssert);return i.offset=0,i.limit=r,i.markedOffset>=0&&(i.markedOffset-=t),this.copyTo(i,0,t,n),i},n.copyTo=function(t,n,r,i){var o,s;if(!this.noAssert&&!e.isByteBuffer(t))throw TypeError("Illegal target: Not a ByteBuffer");if(n=(s=void 0===n)?t.offset:0|n,r=(o=void 0===r)?this.offset:0|r,i=void 0===i?this.limit:0|i,n<0||n>t.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+n+" <= "+t.buffer.byteLength);if(r<0||i>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+r+" <= "+this.buffer.byteLength);var a=i-r;return 0===a?t:(t.ensureCapacity(n+a),t.view.set(this.view.subarray(r,i),n),o&&(this.offset+=a),s&&(t.offset+=a),this)},n.ensureCapacity=function(t){var e=this.buffer.byteLength;return e<t?this.resize((e*=2)>t?e:t):this},n.fill=function(t,e,n){var r=void 0===e;if(r&&(e=this.offset),"string"==typeof t&&t.length>0&&(t=t.charCodeAt(0)),void 0===e&&(e=this.offset),void 0===n&&(n=this.limit),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof n||n%1!=0)throw TypeError("Illegal end: Not an integer");if(n>>>=0,e<0||e>n||n>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+n+" <= "+this.buffer.byteLength)}if(e>=n)return this;for(;e<n;)this.view[e++]=t;return r&&(this.offset=e),this},n.flip=function(){return this.limit=this.offset,this.offset=0,this},n.mark=function(t){if(t=void 0===t?this.offset:t,!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}return this.markedOffset=t,this},n.order=function(t){if(!this.noAssert&&"boolean"!=typeof t)throw TypeError("Illegal littleEndian: Not a boolean");return this.littleEndian=!!t,this},n.LE=function(t){return this.littleEndian=void 0===t||!!t,this},n.BE=function(t){return this.littleEndian=void 0!==t&&!t,this},n.prepend=function(t,n,r){"number"!=typeof n&&"string"==typeof n||(r=n,n=void 0);var i=void 0===r;if(i&&(r=this.offset),!this.noAssert){if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}t instanceof e||(t=e.wrap(t,n));var o=t.limit-t.offset;if(o<=0)return this;var s=o-r;if(s>0){var a=new ArrayBuffer(this.buffer.byteLength+s),u=new Uint8Array(a);u.set(this.view.subarray(r,this.buffer.byteLength),o),this.buffer=a,this.view=u,this.offset+=s,this.markedOffset>=0&&(this.markedOffset+=s),this.limit+=s,r+=s}else new Uint8Array(this.buffer);return this.view.set(t.view.subarray(t.offset,t.limit),r-o),t.offset=t.limit,i&&(this.offset-=o),this},n.prependTo=function(t,e){return t.prepend(this,e),this},n.printDebug=function(t){"function"!=typeof t&&(t=console.log.bind(console)),t(this.toString()+"\n-------------------------------------------------------------------\n"+this.toDebug(!0))},n.remaining=function(){return this.limit-this.offset},n.reset=function(){return this.markedOffset>=0?(this.offset=this.markedOffset,this.markedOffset=-1):this.offset=0,this},n.resize=function(t){if(!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal capacity: "+t+" (not an integer)");if((t|=0)<0)throw RangeError("Illegal capacity: 0 <= "+t)}if(this.buffer.byteLength<t){var e=new ArrayBuffer(t),n=new Uint8Array(e);n.set(this.view),this.buffer=e,this.view=n}return this},n.reverse=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.limit),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}return t===e?this:(Array.prototype.reverse.call(this.view.subarray(t,e)),this)},n.skip=function(t){if(!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal length: "+t+" (not an integer)");t|=0}var e=this.offset+t;if(!this.noAssert&&(e<0||e>this.buffer.byteLength))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+t+" <= "+this.buffer.byteLength);return this.offset=e,this},n.slice=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.limit),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}var n=this.clone();return n.offset=t,n.limit=e,n},n.toBuffer=function(t){var e=this.offset,n=this.limit;if(!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: Not an integer");if(e>>>=0,"number"!=typeof n||n%1!=0)throw TypeError("Illegal limit: Not an integer");if(n>>>=0,e<0||e>n||n>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+n+" <= "+this.buffer.byteLength)}if(!t&&0===e&&n===this.buffer.byteLength)return this.buffer;if(e===n)return r;var i=new ArrayBuffer(n-e);return new Uint8Array(i).set(new Uint8Array(this.buffer).subarray(e,n),0),i},n.toArrayBuffer=n.toBuffer,n.toString=function(t,e,n){if(void 0===t)return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.markedOffset+",limit="+this.limit+",capacity="+this.capacity()+")";switch("number"==typeof t&&(n=e=t="utf8"),t){case"utf8":return this.toUTF8(e,n);case"base64":return this.toBase64(e,n);case"hex":return this.toHex(e,n);case"binary":return this.toBinary(e,n);case"debug":return this.toDebug();case"columns":return this.toColumns();default:throw Error("Unsupported encoding: "+t)}};var h=function(){for(var t={},e=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],n=[],r=0,i=e.length;r<i;++r)n[e[r]]=r;return t.encode=function(t,n){for(var r,i;null!==(r=t());)n(e[r>>2&63]),i=(3&r)<<4,null!==(r=t())?(n(e[63&((i|=r>>4&15)|r>>4&15)]),i=(15&r)<<2,null!==(r=t())?(n(e[63&(i|r>>6&3)]),n(e[63&r])):(n(e[63&i]),n(61))):(n(e[63&i]),n(61),n(61))},t.decode=function(t,e){var r,i,o;function s(t){throw Error("Illegal character code: "+t)}for(;null!==(r=t());)if(void 0===(i=n[r])&&s(r),null!==(r=t())&&(void 0===(o=n[r])&&s(r),e(i<<2>>>0|(48&o)>>4),null!==(r=t()))){if(void 0===(i=n[r])){if(61===r)break;s(r)}if(e((15&o)<<4>>>0|(60&i)>>2),null!==(r=t())){if(void 0===(o=n[r])){if(61===r)break;s(r)}e((3&i)<<6>>>0|o)}}},t.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)},t}();n.toBase64=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.limit),e|=0,(t|=0)<0||e>this.capacity||t>e)throw RangeError("begin, end");var n;return h.encode(function(){return t<e?this.view[t++]:null}.bind(this),n=s()),n()},e.fromBase64=function(t,n){if("string"!=typeof t)throw TypeError("str");var r=new e(t.length/4*3,n),i=0;return h.decode(o(t),function(t){r.view[i++]=t}),r.limit=i,r},e.btoa=function(t){return e.fromBinary(t).toBase64()},e.atob=function(t){return e.fromBase64(t).toBinary()},n.toBinary=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.limit),e|=0,(t|=0)<0||e>this.capacity()||t>e)throw RangeError("begin, end");if(t===e)return"";for(var n=[],r=[];t<e;)n.push(this.view[t++]),n.length>=1024&&(r.push(String.fromCharCode.apply(String,n)),n=[]);return r.join("")+String.fromCharCode.apply(String,n)},e.fromBinary=function(t,n){if("string"!=typeof t)throw TypeError("str");for(var r,i=0,o=t.length,s=new e(o,n);i<o;){if((r=t.charCodeAt(i))>255)throw RangeError("illegal char code: "+r);s.view[i++]=r}return s.limit=o,s},n.toDebug=function(t){for(var e,n=-1,r=this.buffer.byteLength,i="",o="",s="";n<r;){if(-1!==n&&(e=this.view[n],i+=e<16?"0"+e.toString(16).toUpperCase():e.toString(16).toUpperCase(),t&&(o+=e>32&&e<127?String.fromCharCode(e):".")),++n,t&&n>0&&n%16==0&&n!==r){for(;i.length<51;)i+=" ";s+=i+o+"\n",i=o=""}n===this.offset&&n===this.limit?i+=n===this.markedOffset?"!":"|":n===this.offset?i+=n===this.markedOffset?"[":"<":n===this.limit?i+=n===this.markedOffset?"]":">":i+=n===this.markedOffset?"'":t||0!==n&&n!==r?" ":""}if(t&&" "!==i){for(;i.length<51;)i+=" ";s+=i+o+"\n"}return t?s:i},e.fromDebug=function(t,n,r){for(var i,o,s=t.length,a=new e((s+1)/3|0,n,r),u=0,h=0,l=!1,c=!1,f=!1,p=!1,d=!1;u<s;){switch(i=t.charAt(u++)){case"!":if(!r){if(c||f||p){d=!0;break}c=f=p=!0}a.offset=a.markedOffset=a.limit=h,l=!1;break;case"|":if(!r){if(c||p){d=!0;break}c=p=!0}a.offset=a.limit=h,l=!1;break;case"[":if(!r){if(c||f){d=!0;break}c=f=!0}a.offset=a.markedOffset=h,l=!1;break;case"<":if(!r){if(c){d=!0;break}c=!0}a.offset=h,l=!1;break;case"]":if(!r){if(p||f){d=!0;break}p=f=!0}a.limit=a.markedOffset=h,l=!1;break;case">":if(!r){if(p){d=!0;break}p=!0}a.limit=h,l=!1;break;case"'":if(!r){if(f){d=!0;break}f=!0}a.markedOffset=h,l=!1;break;case" ":l=!1;break;default:if(!r&&l){d=!0;break}if(o=parseInt(i+t.charAt(u++),16),!r&&(isNaN(o)||o<0||o>255))throw TypeError("Illegal str: Not a debug encoded string");a.view[h++]=o,l=!0}if(d)throw TypeError("Illegal str: Invalid symbol at "+u)}if(!r){if(!c||!p)throw TypeError("Illegal str: Missing offset or limit");if(h<a.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+h+" < "+s)}return a},n.toHex=function(t,e){if(t=void 0===t?this.offset:t,e=void 0===e?this.limit:e,!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}for(var n,r=new Array(e-t);t<e;)(n=this.view[t++])<16?r.push("0",n.toString(16)):r.push(n.toString(16));return r.join("")},e.fromHex=function(t,n,r){if(!r){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if(t.length%2!=0)throw TypeError("Illegal str: Length not a multiple of 2")}for(var i,o=t.length,s=new e(o/2|0,n),a=0,u=0;a<o;a+=2){if(i=parseInt(t.substring(a,a+2),16),!r&&(!isFinite(i)||i<0||i>255))throw TypeError("Illegal str: Contains non-hex characters");s.view[u++]=i}return s.limit=u,s};var l=function(){var t={MAX_CODEPOINT:1114111,encodeUTF8:function(t,e){var n=null;for("number"==typeof t&&(n=t,t=function(){return null});null!==n||null!==(n=t());)n<128?e(127&n):n<2048?(e(n>>6&31|192),e(63&n|128)):n<65536?(e(n>>12&15|224),e(n>>6&63|128),e(63&n|128)):(e(n>>18&7|240),e(n>>12&63|128),e(n>>6&63|128),e(63&n|128)),n=null},decodeUTF8:function(t,e){for(var n,r,i,o,s=function(t){t=t.slice(0,t.indexOf(null));var e=Error(t.toString());throw e.name="TruncatedError",e.bytes=t,e};null!==(n=t());)if(0==(128&n))e(n);else if(192==(224&n))null===(r=t())&&s([n,r]),e((31&n)<<6|63&r);else if(224==(240&n))(null===(r=t())||null===(i=t()))&&s([n,r,i]),e((15&n)<<12|(63&r)<<6|63&i);else{if(240!=(248&n))throw RangeError("Illegal starting byte: "+n);(null===(r=t())||null===(i=t())||null===(o=t()))&&s([n,r,i,o]),e((7&n)<<18|(63&r)<<12|(63&i)<<6|63&o)}},UTF16toUTF8:function(t,e){for(var n,r=null;null!==(n=null!==r?r:t());)n>=55296&&n<=57343&&null!==(r=t())&&r>=56320&&r<=57343?(e(1024*(n-55296)+r-56320+65536),r=null):e(n);null!==r&&e(r)},UTF8toUTF16:function(t,e){var n=null;for("number"==typeof t&&(n=t,t=function(){return null});null!==n||null!==(n=t());)n<=65535?e(n):(e(55296+((n-=65536)>>10)),e(n%1024+56320)),n=null},encodeUTF16toUTF8:function(e,n){t.UTF16toUTF8(e,function(e){t.encodeUTF8(e,n)})},decodeUTF8toUTF16:function(e,n){t.decodeUTF8(e,function(e){t.UTF8toUTF16(e,n)})},calculateCodePoint:function(t){return t<128?1:t<2048?2:t<65536?3:4},calculateUTF8:function(t){for(var e,n=0;null!==(e=t());)n+=e<128?1:e<2048?2:e<65536?3:4;return n},calculateUTF16asUTF8:function(e){var n=0,r=0;return t.UTF16toUTF8(e,function(t){++n,r+=t<128?1:t<2048?2:t<65536?3:4}),[n,r]}};return t}();return n.toUTF8=function(t,e){if(void 0===t&&(t=this.offset),void 0===e&&(e=this.limit),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!=0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}var n;try{l.decodeUTF8toUTF16(function(){return t<e?this.view[t++]:null}.bind(this),n=s())}catch(n){if(t!==e)throw RangeError("Illegal range: Truncated data, "+t+" != "+e)}return n()},e.fromUTF8=function(t,n,r){if(!r&&"string"!=typeof t)throw TypeError("Illegal str: Not a string");var i=new e(l.calculateUTF16asUTF8(o(t),!0)[1],n,r),s=0;return l.encodeUTF16toUTF8(o(t),function(t){i.view[s++]=t}),i.limit=s,i},e})?r.apply(e,i):r)||(t.exports=o)};var fun494=function(t,e,n){(function(r){var i,o,s;o=[n(493)],void 0===(s="function"==typeof(i=function(t,e){"use strict";var i,o={};return o.ByteBuffer=t,o.Long=t.Long||null,o.VERSION="5.0.1",o.WIRE_TYPES={},o.WIRE_TYPES.VARINT=0,o.WIRE_TYPES.BITS64=1,o.WIRE_TYPES.LDELIM=2,o.WIRE_TYPES.STARTGROUP=3,o.WIRE_TYPES.ENDGROUP=4,o.WIRE_TYPES.BITS32=5,o.PACKABLE_WIRE_TYPES=[o.WIRE_TYPES.VARINT,o.WIRE_TYPES.BITS64,o.WIRE_TYPES.BITS32],o.TYPES={int32:{name:"int32",wireType:o.WIRE_TYPES.VARINT,defaultValue:0},uint32:{name:"uint32",wireType:o.WIRE_TYPES.VARINT,defaultValue:0},sint32:{name:"sint32",wireType:o.WIRE_TYPES.VARINT,defaultValue:0},int64:{name:"int64",wireType:o.WIRE_TYPES.VARINT,defaultValue:o.Long?o.Long.ZERO:void 0},uint64:{name:"uint64",wireType:o.WIRE_TYPES.VARINT,defaultValue:o.Long?o.Long.UZERO:void 0},sint64:{name:"sint64",wireType:o.WIRE_TYPES.VARINT,defaultValue:o.Long?o.Long.ZERO:void 0},bool:{name:"bool",wireType:o.WIRE_TYPES.VARINT,defaultValue:!1},double:{name:"double",wireType:o.WIRE_TYPES.BITS64,defaultValue:0},string:{name:"string",wireType:o.WIRE_TYPES.LDELIM,defaultValue:""},bytes:{name:"bytes",wireType:o.WIRE_TYPES.LDELIM,defaultValue:null},fixed32:{name:"fixed32",wireType:o.WIRE_TYPES.BITS32,defaultValue:0},sfixed32:{name:"sfixed32",wireType:o.WIRE_TYPES.BITS32,defaultValue:0},fixed64:{name:"fixed64",wireType:o.WIRE_TYPES.BITS64,defaultValue:o.Long?o.Long.UZERO:void 0},sfixed64:{name:"sfixed64",wireType:o.WIRE_TYPES.BITS64,defaultValue:o.Long?o.Long.ZERO:void 0},float:{name:"float",wireType:o.WIRE_TYPES.BITS32,defaultValue:0},enum:{name:"enum",wireType:o.WIRE_TYPES.VARINT,defaultValue:0},message:{name:"message",wireType:o.WIRE_TYPES.LDELIM,defaultValue:null},group:{name:"group",wireType:o.WIRE_TYPES.STARTGROUP,defaultValue:null}},o.MAP_KEY_TYPES=[o.TYPES.int32,o.TYPES.sint32,o.TYPES.sfixed32,o.TYPES.uint32,o.TYPES.fixed32,o.TYPES.int64,o.TYPES.sint64,o.TYPES.sfixed64,o.TYPES.uint64,o.TYPES.fixed64,o.TYPES.bool,o.TYPES.string,o.TYPES.bytes],o.ID_MIN=1,o.ID_MAX=536870911,o.convertFieldsToCamelCase=!1,o.populateAccessors=!0,o.populateDefaults=!0,o.Util=((i={}).IS_NODE=!("object"!=typeof r||r+""!="[object process]"||r.browser),i.XHR=function(){for(var t=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],e=null,n=0;n<t.length;n++){try{e=t[n]()}catch(t){continue}break}if(!e)throw Error("XMLHttpRequest is not supported");return e},i.fetch=function(t,e){if(e&&"function"!=typeof e&&(e=null),i.IS_NODE){var r=n(491);if(e)r.readFile(t,function(t,n){e(t?null:""+n)});else try{return r.readFileSync(t)}catch(t){return null}}else{var o=i.XHR();if(o.open("GET",t,!!e),o.setRequestHeader("Accept","text/plain"),"function"==typeof o.overrideMimeType&&o.overrideMimeType("text/plain"),!e)return o.send(null),200==o.status||0==o.status&&"string"==typeof o.responseText?o.responseText:null;if(o.onreadystatechange=function(){4==o.readyState&&(200==o.status||0==o.status&&"string"==typeof o.responseText?e(o.responseText):e(null))},4==o.readyState)return;o.send(null)}},i.toCamelCase=function(t){return t.replace(/_([a-zA-Z])/g,function(t,e){return e.toUpperCase()})},i),o.Lang={DELIM:/[\s\{\}=;:\[\],'"\(\)<>]/g,RULE:/^(?:required|optional|repeated|map)$/,TYPE:/^(?:double|float|int32|uint32|sint32|int64|uint64|sint64|fixed32|sfixed32|fixed64|sfixed64|bool|string|bytes)$/,NAME:/^[a-zA-Z_][a-zA-Z_0-9]*$/,TYPEDEF:/^[a-zA-Z][a-zA-Z_0-9]*$/,TYPEREF:/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)+$/,FQTYPEREF:/^(?:\.[a-zA-Z][a-zA-Z_0-9]*)+$/,NUMBER:/^-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+|([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?)|inf|nan)$/,NUMBER_DEC:/^(?:[1-9][0-9]*|0)$/,NUMBER_HEX:/^0[xX][0-9a-fA-F]+$/,NUMBER_OCT:/^0[0-7]+$/,NUMBER_FLT:/^([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?|inf|nan)$/,BOOL:/^(?:true|false)$/i,ID:/^(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,NEGID:/^\-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,WHITESPACE:/\s/,STRING:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")|(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,STRING_DQ:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,STRING_SQ:/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g},o.DotProto=function(t,e){var n={},r=function(t){this.source=t+"",this.index=0,this.line=1,this.stack=[],this._stringOpen=null},i=r.prototype;i._readString=function(){var t='"'===this._stringOpen?e.STRING_DQ:e.STRING_SQ;t.lastIndex=this.index-1;var n=t.exec(this.source);if(!n)throw Error("unterminated string");return this.index=t.lastIndex,this.stack.push(this._stringOpen),this._stringOpen=null,n[1]},i.next=function(){if(this.stack.length>0)return this.stack.shift();if(this.index>=this.source.length)return null;if(null!==this._stringOpen)return this._readString();var t,n,r;do{for(t=!1;e.WHITESPACE.test(r=this.source.charAt(this.index));)if("\n"===r&&++this.line,++this.index===this.source.length)return null;if("/"===this.source.charAt(this.index))if(++this.index,"/"===this.source.charAt(this.index)){for(;"\n"!==this.source.charAt(++this.index);)if(this.index==this.source.length)return null;++this.index,++this.line,t=!0}else{if("*"!==(r=this.source.charAt(this.index)))return"/";do{if("\n"===r&&++this.line,++this.index===this.source.length)return null;n=r,r=this.source.charAt(this.index)}while("*"!==n||"/"!==r);++this.index,t=!0}}while(t);if(this.index===this.source.length)return null;var i=this.index;if(e.DELIM.lastIndex=0,!e.DELIM.test(this.source.charAt(i++)))for(;i<this.source.length&&!e.DELIM.test(this.source.charAt(i));)++i;var o=this.source.substring(this.index,this.index=i);return'"'!==o&&"'"!==o||(this._stringOpen=o),o},i.peek=function(){if(0===this.stack.length){var t=this.next();if(null===t)return null;this.stack.push(t)}return this.stack[0]},i.skip=function(t){var e=this.next();if(e!==t)throw Error("illegal '"+e+"', '"+t+"' expected")},i.omit=function(t){return this.peek()===t&&(this.next(),!0)},i.toString=function(){return"Tokenizer ("+this.index+"/"+this.source.length+" at line "+this.line+")"},n.Tokenizer=r;var o=function(t){this.tn=new r(t),this.proto3=!1},s=o.prototype;function a(t,n){var r=-1,i=1;if("-"==t.charAt(0)&&(i=-1,t=t.substring(1)),e.NUMBER_DEC.test(t))r=parseInt(t);else if(e.NUMBER_HEX.test(t))r=parseInt(t.substring(2),16);else{if(!e.NUMBER_OCT.test(t))throw Error("illegal id value: "+(i<0?"-":"")+t);r=parseInt(t.substring(1),8)}if(r=i*r|0,!n&&r<0)throw Error("illegal id value: "+(i<0?"-":"")+t);return r}function u(t){var n=1;if("-"==t.charAt(0)&&(n=-1,t=t.substring(1)),e.NUMBER_DEC.test(t))return n*parseInt(t,10);if(e.NUMBER_HEX.test(t))return n*parseInt(t.substring(2),16);if(e.NUMBER_OCT.test(t))return n*parseInt(t.substring(1),8);if("inf"===t)return n*(1/0);if("nan"===t)return NaN;if(e.NUMBER_FLT.test(t))return n*parseFloat(t);throw Error("illegal number value: "+(n<0?"-":"")+t)}function h(t,e,n){void 0===t[e]?t[e]=n:(Array.isArray(t[e])||(t[e]=[t[e]]),t[e].push(n))}return s.parse=function(){var t,n,r={name:"[ROOT]",package:null,messages:[],enums:[],imports:[],options:{},services:[]},i=!0;try{for(;t=this.tn.next();)switch(t){case"package":if(!i||null!==r.package)throw Error("unexpected 'package'");if(t=this.tn.next(),!e.TYPEREF.test(t))throw Error("illegal package name: "+t);this.tn.skip(";"),r.package=t;break;case"import":if(!i)throw Error("unexpected 'import'");("public"===(t=this.tn.peek())||(n="weak"===t))&&this.tn.next(),t=this._readString(),this.tn.skip(";"),n||r.imports.push(t);break;case"syntax":if(!i)throw Error("unexpected 'syntax'");this.tn.skip("="),"proto3"===(r.syntax=this._readString())&&(this.proto3=!0),this.tn.skip(";");break;case"message":this._parseMessage(r,null),i=!1;break;case"enum":this._parseEnum(r),i=!1;break;case"option":this._parseOption(r);break;case"service":this._parseService(r);break;case"extend":this._parseExtend(r);break;default:throw Error("unexpected '"+t+"'")}}catch(t){throw t.message="Parse error at line "+this.tn.line+": "+t.message,t}return delete r.name,r},o.parse=function(t){return new o(t).parse()},s._readString=function(){var t,e,n="";do{if("'"!==(e=this.tn.next())&&'"'!==e)throw Error("illegal string delimiter: "+e);n+=this.tn.next(),this.tn.skip(e),t=this.tn.peek()}while('"'===t||'"'===t);return n},s._readValue=function(t){var n=this.tn.peek();if('"'===n||"'"===n)return this._readString();if(this.tn.next(),e.NUMBER.test(n))return u(n);if(e.BOOL.test(n))return"true"===n.toLowerCase();if(t&&e.TYPEREF.test(n))return n;throw Error("illegal value: "+n)},s._parseOption=function(t,n){var r=this.tn.next(),i=!1;if("("===r&&(i=!0,r=this.tn.next()),!e.TYPEREF.test(r))throw Error("illegal option name: "+r);var o=r;i&&(this.tn.skip(")"),o="("+o+")",r=this.tn.peek(),e.FQTYPEREF.test(r)&&(o+=r,this.tn.next())),this.tn.skip("="),this._parseOptionValue(t,o),n||this.tn.skip(";")},s._parseOptionValue=function(t,n){var r=this.tn.peek();if("{"!==r)h(t.options,n,this._readValue(!0));else for(this.tn.skip("{");"}"!==(r=this.tn.next());){if(!e.NAME.test(r))throw Error("illegal option name: "+n+"."+r);this.tn.omit(":")?h(t.options,n+"."+r,this._readValue(!0)):this._parseOptionValue(t,n+"."+r)}},s._parseService=function(t){var n=this.tn.next();if(!e.NAME.test(n))throw Error("illegal service name at line "+this.tn.line+": "+n);var r={name:n,rpc:{},options:{}};for(this.tn.skip("{");"}"!==(n=this.tn.next());)if("option"===n)this._parseOption(r);else{if("rpc"!==n)throw Error("illegal service token: "+n);this._parseServiceRPC(r)}this.tn.omit(";"),t.services.push(r)},s._parseServiceRPC=function(t){var n=this.tn.next();if(!e.NAME.test(n))throw Error("illegal rpc service method name: "+n);var r=n,i={request:null,response:null,request_stream:!1,response_stream:!1,options:{}};if(this.tn.skip("("),"stream"===(n=this.tn.next()).toLowerCase()&&(i.request_stream=!0,n=this.tn.next()),!e.TYPEREF.test(n))throw Error("illegal rpc service request type: "+n);if(i.request=n,this.tn.skip(")"),"returns"!==(n=this.tn.next()).toLowerCase())throw Error("illegal rpc service request type delimiter: "+n);if(this.tn.skip("("),"stream"===(n=this.tn.next()).toLowerCase()&&(i.response_stream=!0,n=this.tn.next()),i.response=n,this.tn.skip(")"),"{"===(n=this.tn.peek())){for(this.tn.next();"}"!==(n=this.tn.next());){if("option"!==n)throw Error("illegal rpc service token: "+n);this._parseOption(i)}this.tn.omit(";")}else this.tn.skip(";");void 0===t.rpc&&(t.rpc={}),t.rpc[r]=i},s._parseMessage=function(t,n){var r=!!n,i=this.tn.next(),o={name:"",fields:[],enums:[],messages:[],options:{},services:[],oneofs:{}};if(!e.NAME.test(i))throw Error("illegal "+(r?"group":"message")+" name: "+i);for(o.name=i,r&&(this.tn.skip("="),n.id=a(this.tn.next()),o.isGroup=!0),"["===(i=this.tn.peek())&&n&&this._parseFieldOptions(n),this.tn.skip("{");"}"!==(i=this.tn.next());)if(e.RULE.test(i))this._parseMessageField(o,i);else if("oneof"===i)this._parseMessageOneOf(o);else if("enum"===i)this._parseEnum(o);else if("message"===i)this._parseMessage(o);else if("option"===i)this._parseOption(o);else if("service"===i)this._parseService(o);else if("extensions"===i)o.extensions=this._parseExtensionRanges();else if("reserved"===i)this._parseIgnored();else if("extend"===i)this._parseExtend(o);else{if(!e.TYPEREF.test(i))throw Error("illegal message token: "+i);if(!this.proto3)throw Error("illegal field rule: "+i);this._parseMessageField(o,"optional",i)}return this.tn.omit(";"),t.messages.push(o),o},s._parseIgnored=function(){for(;";"!==this.tn.peek();)this.tn.next();this.tn.skip(";")},s._parseMessageField=function(t,n,r){if(!e.RULE.test(n))throw Error("illegal message field rule: "+n);var i,o={rule:n,type:"",name:"",options:{},id:0};if("map"===n){if(r)throw Error("illegal type: "+r);if(this.tn.skip("<"),i=this.tn.next(),!e.TYPE.test(i)&&!e.TYPEREF.test(i))throw Error("illegal message field type: "+i);if(o.keytype=i,this.tn.skip(","),i=this.tn.next(),!e.TYPE.test(i)&&!e.TYPEREF.test(i))throw Error("illegal message field: "+i);if(o.type=i,this.tn.skip(">"),i=this.tn.next(),!e.NAME.test(i))throw Error("illegal message field name: "+i);o.name=i,this.tn.skip("="),o.id=a(this.tn.next()),"["===(i=this.tn.peek())&&this._parseFieldOptions(o),this.tn.skip(";")}else if("group"===(r=void 0!==r?r:this.tn.next())){var s=this._parseMessage(t,o);if(!/^[A-Z]/.test(s.name))throw Error("illegal group name: "+s.name);o.type=s.name,o.name=s.name.toLowerCase(),this.tn.omit(";")}else{if(!e.TYPE.test(r)&&!e.TYPEREF.test(r))throw Error("illegal message field type: "+r);if(o.type=r,i=this.tn.next(),!e.NAME.test(i))throw Error("illegal message field name: "+i);o.name=i,this.tn.skip("="),o.id=a(this.tn.next()),"["===(i=this.tn.peek())&&this._parseFieldOptions(o),this.tn.skip(";")}return t.fields.push(o),o},s._parseMessageOneOf=function(t){var n=this.tn.next();if(!e.NAME.test(n))throw Error("illegal oneof name: "+n);var r,i=n,o=[];for(this.tn.skip("{");"}"!==(n=this.tn.next());)(r=this._parseMessageField(t,"optional",n)).oneof=i,o.push(r.id);this.tn.omit(";"),t.oneofs[i]=o},s._parseFieldOptions=function(t){this.tn.skip("[");for(var e=!0;"]"!==this.tn.peek();)e||this.tn.skip(","),this._parseOption(t,!0),e=!1;this.tn.next()},s._parseEnum=function(t){var n={name:"",values:[],options:{}},r=this.tn.next();if(!e.NAME.test(r))throw Error("illegal name: "+r);for(n.name=r,this.tn.skip("{");"}"!==(r=this.tn.next());)if("option"===r)this._parseOption(n);else{if(!e.NAME.test(r))throw Error("illegal name: "+r);this.tn.skip("=");var i={name:r,id:a(this.tn.next(),!0)};"["===(r=this.tn.peek())&&this._parseFieldOptions({options:{}}),this.tn.skip(";"),n.values.push(i)}this.tn.omit(";"),t.enums.push(n)},s._parseExtensionRanges=function(){var e,n,r,i=[];do{for(n=[];;){switch(e=this.tn.next()){case"min":r=t.ID_MIN;break;case"max":r=t.ID_MAX;break;default:r=u(e)}if(n.push(r),2===n.length)break;if("to"!==this.tn.peek()){n.push(r);break}this.tn.next()}i.push(n)}while(this.tn.omit(","));return this.tn.skip(";"),i},s._parseExtend=function(t){var n=this.tn.next();if(!e.TYPEREF.test(n))throw Error("illegal extend reference: "+n);var r={ref:n,fields:[]};for(this.tn.skip("{");"}"!==(n=this.tn.next());)if(e.RULE.test(n))this._parseMessageField(r,n);else{if(!e.TYPEREF.test(n))throw Error("illegal extend token: "+n);if(!this.proto3)throw Error("illegal field rule: "+n);this._parseMessageField(r,"optional",n)}return this.tn.omit(";"),t.messages.push(r),r},s.toString=function(){return"Parser at line "+this.tn.line},n.Parser=o,n}(o,o.Lang),o.Reflect=function(e){var n={},r=function(t,e,n){this.builder=t,this.parent=e,this.name=n,this.className},i=r.prototype;i.fqn=function(){for(var t=this.name,e=this;null!=(e=e.parent);)t=e.name+"."+t;return t},i.toString=function(t){return(t?this.className+" ":"")+this.fqn()},i.build=function(){throw Error(this.toString(!0)+" cannot be built directly")},n.T=r;var o=function(t,e,n,i,o){r.call(this,t,e,n),this.className="Namespace",this.children=[],this.options=i||{},this.syntax=o||"proto2"},s=o.prototype=Object.create(r.prototype);s.getChildren=function(t){if(null==(t=t||null))return this.children.slice();for(var e=[],n=0,r=this.children.length;n<r;++n)this.children[n]instanceof t&&e.push(this.children[n]);return e},s.addChild=function(t){var e;if(e=this.getChild(t.name))if(e instanceof l.Field&&e.name!==e.originalName&&null===this.getChild(e.originalName))e.name=e.originalName;else{if(!(t instanceof l.Field&&t.name!==t.originalName&&null===this.getChild(t.originalName)))throw Error("Duplicate name in namespace "+this.toString(!0)+": "+t.name);t.name=t.originalName}this.children.push(t)},s.getChild=function(t){for(var e="number"==typeof t?"id":"name",n=0,r=this.children.length;n<r;++n)if(this.children[n][e]===t)return this.children[n];return null},s.resolve=function(t,e){var r,i="string"==typeof t?t.split("."):t,o=this,s=0;if(""===i[s]){for(;null!==o.parent;)o=o.parent;s++}do{do{if(!(o instanceof n.Namespace)){o=null;break}if(!(r=o.getChild(i[s]))||!(r instanceof n.T)||e&&!(r instanceof n.Namespace)){o=null;break}o=r,s++}while(s<i.length);if(null!=o)break;if(null!==this.parent)return this.parent.resolve(t,e)}while(null!=o);return o},s.qn=function(t){var e=[],r=t;do{e.unshift(r.name),r=r.parent}while(null!==r);for(var i=1;i<=e.length;i++){var o=e.slice(e.length-i);if(t===this.resolve(o,t instanceof n.Namespace))return o.join(".")}return t.fqn()},s.build=function(){for(var t,e={},n=this.children,r=0,i=n.length;r<i;++r)(t=n[r])instanceof o&&(e[t.name]=t.build());return Object.defineProperty&&Object.defineProperty(e,"$options",{value:this.buildOpt()}),e},s.buildOpt=function(){for(var t={},e=Object.keys(this.options),n=0,r=e.length;n<r;++n){var i=e[n],o=this.options[e[n]];t[i]=o}return t},s.getOption=function(t){return void 0===t?this.options:void 0!==this.options[t]?this.options[t]:null},n.Namespace=o;var a=function(t,n,r,i){if(this.type=t,this.resolvedType=n,this.isMapKey=r,this.syntax=i,r&&e.MAP_KEY_TYPES.indexOf(t)<0)throw Error("Invalid map key type: "+t.name)},u=a.prototype;function h(t,n){if(t&&"number"==typeof t.low&&"number"==typeof t.high&&"boolean"==typeof t.unsigned&&t.low==t.low&&t.high==t.high)return new e.Long(t.low,t.high,void 0===n?t.unsigned:n);if("string"==typeof t)return e.Long.fromString(t,n||!1,10);if("number"==typeof t)return e.Long.fromNumber(t,n||!1);throw Error("not convertible to Long")}a.defaultFieldValue=function(n){if("string"==typeof n&&(n=e.TYPES[n]),void 0===n.defaultValue)throw Error("default value for type "+n.name+" is not supported");return n==e.TYPES.bytes?new t(0):n.defaultValue},u.verifyValue=function(n){var r=this;function i(t,e){throw Error("Illegal value for "+r.toString(!0)+" of type "+r.type.name+": "+t+" ("+e+")")}switch(this.type){case e.TYPES.int32:case e.TYPES.sint32:case e.TYPES.sfixed32:return("number"!=typeof n||n==n&&n%1!=0)&&i(typeof n,"not an integer"),n>4294967295?0|n:n;case e.TYPES.uint32:case e.TYPES.fixed32:return("number"!=typeof n||n==n&&n%1!=0)&&i(typeof n,"not an integer"),n<0?n>>>0:n;case e.TYPES.int64:case e.TYPES.sint64:case e.TYPES.sfixed64:if(e.Long)try{return h(n,!1)}catch(t){i(typeof n,t.message)}else i(typeof n,"requires Long.js");case e.TYPES.uint64:case e.TYPES.fixed64:if(e.Long)try{return h(n,!0)}catch(t){i(typeof n,t.message)}else i(typeof n,"requires Long.js");case e.TYPES.bool:return"boolean"!=typeof n&&i(typeof n,"not a boolean"),n;case e.TYPES.float:case e.TYPES.double:return"number"!=typeof n&&i(typeof n,"not a number"),n;case e.TYPES.string:return"string"==typeof n||n&&n instanceof String||i(typeof n,"not a string"),""+n;case e.TYPES.bytes:return t.isByteBuffer(n)?n:t.wrap(n,"base64");case e.TYPES.enum:var o=this.resolvedType.getChildren(e.Reflect.Enum.Value);for(a=0;a<o.length;a++){if(o[a].name==n)return o[a].id;if(o[a].id==n)return o[a].id}if("proto3"===this.syntax)return("number"!=typeof n||n==n&&n%1!=0)&&i(typeof n,"not an integer"),(n>4294967295||n<0)&&i(typeof n,"not in range for uint32"),n;i(n,"not a valid enum value");case e.TYPES.group:case e.TYPES.message:if(n&&"object"==typeof n||i(typeof n,"object expected"),n instanceof this.resolvedType.clazz)return n;if(n instanceof e.Builder.Message){var s={};for(var a in n)n.hasOwnProperty(a)&&(s[a]=n[a]);n=s}return new this.resolvedType.clazz(n)}throw Error("[INTERNAL] Illegal value for "+this.toString(!0)+": "+n+" (undefined type "+this.type+")")},u.calculateLength=function(n,r){if(null===r)return 0;var i;switch(this.type){case e.TYPES.int32:return r<0?t.calculateVarint64(r):t.calculateVarint32(r);case e.TYPES.uint32:return t.calculateVarint32(r);case e.TYPES.sint32:return t.calculateVarint32(t.zigZagEncode32(r));case e.TYPES.fixed32:case e.TYPES.sfixed32:case e.TYPES.float:return 4;case e.TYPES.int64:case e.TYPES.uint64:return t.calculateVarint64(r);case e.TYPES.sint64:return t.calculateVarint64(t.zigZagEncode64(r));case e.TYPES.fixed64:case e.TYPES.sfixed64:return 8;case e.TYPES.bool:return 1;case e.TYPES.enum:return t.calculateVarint32(r);case e.TYPES.double:return 8;case e.TYPES.string:return i=t.calculateUTF8Bytes(r),t.calculateVarint32(i)+i;case e.TYPES.bytes:if(r.remaining()<0)throw Error("Illegal value for "+this.toString(!0)+": "+r.remaining()+" bytes remaining");return t.calculateVarint32(r.remaining())+r.remaining();case e.TYPES.message:return i=this.resolvedType.calculate(r),t.calculateVarint32(i)+i;case e.TYPES.group:return(i=this.resolvedType.calculate(r))+t.calculateVarint32(n<<3|e.WIRE_TYPES.ENDGROUP)}throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+r+" (unknown type)")},u.encodeValue=function(n,r,i){if(null===r)return i;switch(this.type){case e.TYPES.int32:r<0?i.writeVarint64(r):i.writeVarint32(r);break;case e.TYPES.uint32:i.writeVarint32(r);break;case e.TYPES.sint32:i.writeVarint32ZigZag(r);break;case e.TYPES.fixed32:i.writeUint32(r);break;case e.TYPES.sfixed32:i.writeInt32(r);break;case e.TYPES.int64:case e.TYPES.uint64:i.writeVarint64(r);break;case e.TYPES.sint64:i.writeVarint64ZigZag(r);break;case e.TYPES.fixed64:i.writeUint64(r);break;case e.TYPES.sfixed64:i.writeInt64(r);break;case e.TYPES.bool:"string"==typeof r?i.writeVarint32("false"===r.toLowerCase()?0:!!r):i.writeVarint32(r?1:0);break;case e.TYPES.enum:i.writeVarint32(r);break;case e.TYPES.float:i.writeFloat32(r);break;case e.TYPES.double:i.writeFloat64(r);break;case e.TYPES.string:i.writeVString(r);break;case e.TYPES.bytes:if(r.remaining()<0)throw Error("Illegal value for "+this.toString(!0)+": "+r.remaining()+" bytes remaining");var o=r.offset;i.writeVarint32(r.remaining()),i.append(r),r.offset=o;break;case e.TYPES.message:var s=(new t).LE();this.resolvedType.encode(r,s),i.writeVarint32(s.offset),i.append(s.flip());break;case e.TYPES.group:this.resolvedType.encode(r,i),i.writeVarint32(n<<3|e.WIRE_TYPES.ENDGROUP);break;default:throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+r+" (unknown type)")}return i},u.decode=function(t,n,r){if(n!=this.type.wireType)throw Error("Unexpected wire type for element");var i,o;switch(this.type){case e.TYPES.int32:return 0|t.readVarint32();case e.TYPES.uint32:return t.readVarint32()>>>0;case e.TYPES.sint32:return 0|t.readVarint32ZigZag();case e.TYPES.fixed32:return t.readUint32()>>>0;case e.TYPES.sfixed32:return 0|t.readInt32();case e.TYPES.int64:return t.readVarint64();case e.TYPES.uint64:return t.readVarint64().toUnsigned();case e.TYPES.sint64:return t.readVarint64ZigZag();case e.TYPES.fixed64:return t.readUint64();case e.TYPES.sfixed64:return t.readInt64();case e.TYPES.bool:return!!t.readVarint32();case e.TYPES.enum:return t.readVarint32();case e.TYPES.float:return t.readFloat();case e.TYPES.double:return t.readDouble();case e.TYPES.string:return t.readVString();case e.TYPES.bytes:if(o=t.readVarint32(),t.remaining()<o)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+o+" required but got only "+t.remaining());return(i=t.clone()).limit=i.offset+o,t.offset+=o,i;case e.TYPES.message:return o=t.readVarint32(),this.resolvedType.decode(t,o);case e.TYPES.group:return this.resolvedType.decode(t,-1,r)}throw Error("[INTERNAL] Illegal decode type")},u.valueFromString=function(n){if(!this.isMapKey)throw Error("valueFromString() called on non-map-key element");switch(this.type){case e.TYPES.int32:case e.TYPES.sint32:case e.TYPES.sfixed32:case e.TYPES.uint32:case e.TYPES.fixed32:return this.verifyValue(parseInt(n));case e.TYPES.int64:case e.TYPES.sint64:case e.TYPES.sfixed64:case e.TYPES.uint64:case e.TYPES.fixed64:return this.verifyValue(n);case e.TYPES.bool:return"true"===n;case e.TYPES.string:return this.verifyValue(n);case e.TYPES.bytes:return t.fromBinary(n)}},u.valueToString=function(t){if(!this.isMapKey)throw Error("valueToString() called on non-map-key element");return this.type===e.TYPES.bytes?t.toString("binary"):t.toString()},n.Element=a;var l=function(t,e,n,r,i,s){o.call(this,t,e,n,r,s),this.className="Message",this.extensions=void 0,this.clazz=null,this.isGroup=!!i,this._fields=null,this._fieldsById=null,this._fieldsByName=null},c=l.prototype=Object.create(o.prototype);function f(t,n){var r=n.readVarint32(),i=7&r,o=r>>>3;switch(i){case e.WIRE_TYPES.VARINT:do{r=n.readUint8()}while(128==(128&r));break;case e.WIRE_TYPES.BITS64:n.offset+=8;break;case e.WIRE_TYPES.LDELIM:r=n.readVarint32(),n.offset+=r;break;case e.WIRE_TYPES.STARTGROUP:f(o,n);break;case e.WIRE_TYPES.ENDGROUP:if(o===t)return!1;throw Error("Illegal GROUPEND after unknown group: "+o+" ("+t+" expected)");case e.WIRE_TYPES.BITS32:n.offset+=4;break;default:throw Error("Illegal wire type in unknown group "+t+": "+i)}return!0}c.build=function(n){if(this.clazz&&!n)return this.clazz;var r=function(e,n){var r=n.getChildren(e.Reflect.Message.Field),i=n.getChildren(e.Reflect.Message.OneOf),o=function(s,a){e.Builder.Message.call(this);for(var u=0,h=i.length;u<h;++u)this[i[u].name]=null;for(u=0,h=r.length;u<h;++u){var l=r[u];this[l.name]=l.repeated?[]:l.map?new e.Map(l):null,!l.required&&"proto3"!==n.syntax||null===l.defaultValue||(this[l.name]=l.defaultValue)}var c;if(arguments.length>0)if(1!==arguments.length||null===s||"object"!=typeof s||!("function"!=typeof s.encode||s instanceof o)||Array.isArray(s)||s instanceof e.Map||t.isByteBuffer(s)||s instanceof ArrayBuffer||e.Long&&s instanceof e.Long)for(u=0,h=arguments.length;u<h;++u)void 0!==(c=arguments[u])&&this.$set(r[u].name,c);else this.$set(s)},s=o.prototype=Object.create(e.Builder.Message.prototype);s.add=function(t,r,i){var o=n._fieldsByName[t];if(!i){if(!o)throw Error(this+"#"+t+" is undefined");if(!(o instanceof e.Reflect.Message.Field))throw Error(this+"#"+t+" is not a field: "+o.toString(!0));if(!o.repeated)throw Error(this+"#"+t+" is not a repeated field");r=o.verifyValue(r,!0)}return null===this[t]&&(this[t]=[]),this[t].push(r),this},s.$add=s.add,s.set=function(t,r,i){if(t&&"object"==typeof t){for(var o in i=r,t)t.hasOwnProperty(o)&&void 0!==(r=t[o])&&this.$set(o,r,i);return this}var s=n._fieldsByName[t];if(i)this[t]=r;else{if(!s)throw Error(this+"#"+t+" is not a field: undefined");if(!(s instanceof e.Reflect.Message.Field))throw Error(this+"#"+t+" is not a field: "+s.toString(!0));this[s.name]=r=s.verifyValue(r)}if(s&&s.oneof){var a=this[s.oneof.name];null!==r?(null!==a&&a!==s.name&&(this[a]=null),this[s.oneof.name]=s.name):a===t&&(this[s.oneof.name]=null)}return this},s.$set=s.set,s.get=function(t,r){if(r)return this[t];var i=n._fieldsByName[t];if(!(i&&i instanceof e.Reflect.Message.Field))throw Error(this+"#"+t+" is not a field: undefined");if(!(i instanceof e.Reflect.Message.Field))throw Error(this+"#"+t+" is not a field: "+i.toString(!0));return this[i.name]},s.$get=s.get;for(var a=0;a<r.length;a++){var u=r[a];u instanceof e.Reflect.Message.ExtensionField||n.builder.options.populateAccessors&&function(t){var e=t.originalName.replace(/(_[a-zA-Z])/g,function(t){return t.toUpperCase().replace("_","")});e=e.substring(0,1).toUpperCase()+e.substring(1);var r=t.originalName.replace(/([A-Z])/g,function(t){return"_"+t}),i=function(e,n){return this[t.name]=n?e:t.verifyValue(e),this},o=function(){return this[t.name]};null===n.getChild("set"+e)&&(s["set"+e]=i),null===n.getChild("set_"+r)&&(s["set_"+r]=i),null===n.getChild("get"+e)&&(s["get"+e]=o),null===n.getChild("get_"+r)&&(s["get_"+r]=o)}(u)}function h(n,r,i,o){if(null===n||"object"!=typeof n){if(o&&o instanceof e.Reflect.Enum){var s=e.Reflect.Enum.getName(o.object,n);if(null!==s)return s}return n}if(t.isByteBuffer(n))return r?n.toBase64():n.toBuffer();if(e.Long.isLong(n))return i?n.toString():e.Long.fromValue(n);var a;if(Array.isArray(n))return a=[],n.forEach(function(t,e){a[e]=h(t,r,i,o)}),a;if(a={},n instanceof e.Map){for(var u=n.entries(),l=u.next();!l.done;l=u.next())a[n.keyElem.valueToString(l.value[0])]=h(l.value[1],r,i,n.valueElem.resolvedType);return a}var c=n.$type,f=void 0;for(var p in n)n.hasOwnProperty(p)&&(c&&(f=c.getChild(p))?a[p]=h(n[p],r,i,f.resolvedType):a[p]=h(n[p],r,i));return a}return s.encode=function(e,r){"boolean"==typeof e&&(r=e,e=void 0);var i=!1;e||(e=new t,i=!0);var o=e.littleEndian;try{return n.encode(this,e.LE(),r),(i?e.flip():e).LE(o)}catch(t){throw e.LE(o),t}},o.encode=function(t,e,n){return new o(t).encode(e,n)},s.calculate=function(){return n.calculate(this)},s.encodeDelimited=function(e,r){var i=!1;e||(e=new t,i=!0);var o=(new t).LE();return n.encode(this,o,r).flip(),e.writeVarint32(o.remaining()),e.append(o),i?e.flip():e},s.encodeAB=function(){try{return this.encode().toArrayBuffer()}catch(t){throw t.encoded&&(t.encoded=t.encoded.toArrayBuffer()),t}},s.toArrayBuffer=s.encodeAB,s.encodeNB=function(){try{return this.encode().toBuffer()}catch(t){throw t.encoded&&(t.encoded=t.encoded.toBuffer()),t}},s.toBuffer=s.encodeNB,s.encode64=function(){try{return this.encode().toBase64()}catch(t){throw t.encoded&&(t.encoded=t.encoded.toBase64()),t}},s.toBase64=s.encode64,s.encodeHex=function(){try{return this.encode().toHex()}catch(t){throw t.encoded&&(t.encoded=t.encoded.toHex()),t}},s.toHex=s.encodeHex,s.toRaw=function(t,e){return h(this,!!t,!!e,this.$type)},s.encodeJSON=function(){return JSON.stringify(h(this,!0,!0,this.$type))},o.decode=function(e,r,i){"string"==typeof r&&(i=r,r=-1),"string"==typeof e&&(e=t.wrap(e,i||"base64"));var o=(e=t.isByteBuffer(e)?e:t.wrap(e)).littleEndian;try{var s=n.decode(e.LE());return e.LE(o),s}catch(t){throw e.LE(o),t}},o.decodeDelimited=function(e,r){if("string"==typeof e&&(e=t.wrap(e,r||"base64")),(e=t.isByteBuffer(e)?e:t.wrap(e)).remaining()<1)return null;var i=e.offset,o=e.readVarint32();if(e.remaining()<o)return e.offset=i,null;try{var s=n.decode(e.slice(e.offset,e.offset+o).LE());return e.offset+=o,s}catch(t){throw e.offset+=o,t}},o.decode64=function(t){return o.decode(t,"base64")},o.decodeHex=function(t){return o.decode(t,"hex")},o.decodeJSON=function(t){return new o(JSON.parse(t))},s.toString=function(){return n.toString()},Object.defineProperty&&(Object.defineProperty(o,"$options",{value:n.buildOpt()}),Object.defineProperty(s,"$options",{value:o.$options}),Object.defineProperty(o,"$type",{value:n}),Object.defineProperty(s,"$type",{value:n})),o}(e,this);this._fields=[],this._fieldsById={},this._fieldsByName={};for(var i,o=0,s=this.children.length;o<s;o++)if((i=this.children[o])instanceof m||i instanceof l||i instanceof b){if(r.hasOwnProperty(i.name))throw Error("Illegal reflect child of "+this.toString(!0)+": "+i.toString(!0)+" cannot override static property '"+i.name+"'");r[i.name]=i.build()}else if(i instanceof l.Field)i.build(),this._fields.push(i),this._fieldsById[i.id]=i,this._fieldsByName[i.name]=i;else if(!(i instanceof l.OneOf||i instanceof v))throw Error("Illegal reflect child of "+this.toString(!0)+": "+this.children[o].toString(!0));return this.clazz=r},c.encode=function(t,e,n){for(var r,i,o=null,s=0,a=this._fields.length;s<a;++s)i=t[(r=this._fields[s]).name],r.required&&null===i?null===o&&(o=r):r.encode(n?i:r.verifyValue(i),e,t);if(null!==o){var u=Error("Missing at least one required field for "+this.toString(!0)+": "+o);throw u.encoded=e,u}return e},c.calculate=function(t){for(var e,n,r=0,i=0,o=this._fields.length;i<o;++i){if(n=t[(e=this._fields[i]).name],e.required&&null===n)throw Error("Missing at least one required field for "+this.toString(!0)+": "+e);r+=e.calculate(n,t)}return r},c.decode=function(t,n,r){n="number"==typeof n?n:-1;for(var i,o,s,a,u=t.offset,h=new this.clazz;t.offset<u+n||-1===n&&t.remaining()>0;){if(s=(i=t.readVarint32())>>>3,(o=7&i)===e.WIRE_TYPES.ENDGROUP){if(s!==r)throw Error("Illegal group end indicator for "+this.toString(!0)+": "+s+" ("+(r?r+" expected":"not a group")+")");break}if(a=this._fieldsById[s]){if(a.repeated&&!a.options.packed)h[a.name].push(a.decode(o,t));else if(a.map){var l=a.decode(o,t);h[a.name].set(l[0],l[1])}else if(h[a.name]=a.decode(o,t),a.oneof){var c=h[a.oneof.name];null!==c&&c!==a.name&&(h[c]=null),h[a.oneof.name]=a.name}}else switch(o){case e.WIRE_TYPES.VARINT:t.readVarint32();break;case e.WIRE_TYPES.BITS32:t.offset+=4;break;case e.WIRE_TYPES.BITS64:t.offset+=8;break;case e.WIRE_TYPES.LDELIM:var p=t.readVarint32();t.offset+=p;break;case e.WIRE_TYPES.STARTGROUP:for(;f(s,t););break;default:throw Error("Illegal wire type for unknown field "+s+" in "+this.toString(!0)+"#decode: "+o)}}for(var d=0,y=this._fields.length;d<y;++d)if(null===h[(a=this._fields[d]).name])if("proto3"===this.syntax)h[a.name]=a.defaultValue;else{if(a.required){var m=Error("Missing at least one required field for "+this.toString(!0)+": "+a.name);throw m.decoded=h,m}e.populateDefaults&&null!==a.defaultValue&&(h[a.name]=a.defaultValue)}return h},n.Message=l;var p=function(t,n,i,o,s,a,u,h,c,f){r.call(this,t,n,a),this.className="Message.Field",this.required="required"===i,this.repeated="repeated"===i,this.map="map"===i,this.keyType=o||null,this.type=s,this.resolvedType=null,this.id=u,this.options=h||{},this.defaultValue=null,this.oneof=c||null,this.syntax=f||"proto2",this.originalName=this.name,this.element=null,this.keyElement=null,!this.builder.options.convertFieldsToCamelCase||this instanceof l.ExtensionField||(this.name=e.Util.toCamelCase(this.name))},d=p.prototype=Object.create(r.prototype);d.build=function(){this.element=new a(this.type,this.resolvedType,!1,this.syntax),this.map&&(this.keyElement=new a(this.keyType,void 0,!0,this.syntax)),"proto3"!==this.syntax||this.repeated||this.map?void 0!==this.options.default&&(this.defaultValue=this.verifyValue(this.options.default)):this.defaultValue=a.defaultFieldValue(this.type)},d.verifyValue=function(t,n){n=n||!1;var r,i=this;function o(t,e){throw Error("Illegal value for "+i.toString(!0)+" of type "+i.type.name+": "+t+" ("+e+")")}if(null===t)return this.required&&o(typeof t,"required"),"proto3"===this.syntax&&this.type!==e.TYPES.message&&o(typeof t,"proto3 field without field presence cannot be null"),null;if(this.repeated&&!n){Array.isArray(t)||(t=[t]);var s=[];for(r=0;r<t.length;r++)s.push(this.element.verifyValue(t[r]));return s}return this.map&&!n?t instanceof e.Map?t:(t instanceof Object||o(typeof t,"expected ProtoBuf.Map or raw object for map field"),new e.Map(this,t)):(!this.repeated&&Array.isArray(t)&&o(typeof t,"no array expected"),this.element.verifyValue(t))},d.hasWirePresence=function(t,n){if("proto3"!==this.syntax)return null!==t;if(this.oneof&&n[this.oneof.name]===this.name)return!0;switch(this.type){case e.TYPES.int32:case e.TYPES.sint32:case e.TYPES.sfixed32:case e.TYPES.uint32:case e.TYPES.fixed32:return 0!==t;case e.TYPES.int64:case e.TYPES.sint64:case e.TYPES.sfixed64:case e.TYPES.uint64:case e.TYPES.fixed64:return 0!==t.low||0!==t.high;case e.TYPES.bool:return t;case e.TYPES.float:case e.TYPES.double:return 0!==t;case e.TYPES.string:return t.length>0;case e.TYPES.bytes:return t.remaining()>0;case e.TYPES.enum:return 0!==t;case e.TYPES.message:return null!==t;default:return!0}},d.encode=function(n,r,i){if(null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===n||this.repeated&&0==n.length)return r;try{var o;if(this.repeated)if(this.options.packed&&e.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){r.writeVarint32(this.id<<3|e.WIRE_TYPES.LDELIM),r.ensureCapacity(r.offset+=1);var s=r.offset;for(o=0;o<n.length;o++)this.element.encodeValue(this.id,n[o],r);var a=r.offset-s,u=t.calculateVarint32(a);if(u>1){var h=r.slice(s,r.offset);s+=u-1,r.offset=s,r.append(h)}r.writeVarint32(a,s-u)}else for(o=0;o<n.length;o++)r.writeVarint32(this.id<<3|this.type.wireType),this.element.encodeValue(this.id,n[o],r);else this.map?n.forEach(function(n,i,o){var s=t.calculateVarint32(8|this.keyType.wireType)+this.keyElement.calculateLength(1,i)+t.calculateVarint32(16|this.type.wireType)+this.element.calculateLength(2,n);r.writeVarint32(this.id<<3|e.WIRE_TYPES.LDELIM),r.writeVarint32(s),r.writeVarint32(8|this.keyType.wireType),this.keyElement.encodeValue(1,i,r),r.writeVarint32(16|this.type.wireType),this.element.encodeValue(2,n,r)},this):this.hasWirePresence(n,i)&&(r.writeVarint32(this.id<<3|this.type.wireType),this.element.encodeValue(this.id,n,r))}catch(t){throw Error("Illegal value for "+this.toString(!0)+": "+n+" ("+t+")")}return r},d.calculate=function(n,r){if(n=this.verifyValue(n),null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===n||this.repeated&&0==n.length)return 0;var i=0;try{var o,s;if(this.repeated)if(this.options.packed&&e.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){for(i+=t.calculateVarint32(this.id<<3|e.WIRE_TYPES.LDELIM),s=0,o=0;o<n.length;o++)s+=this.element.calculateLength(this.id,n[o]);i+=t.calculateVarint32(s),i+=s}else for(o=0;o<n.length;o++)i+=t.calculateVarint32(this.id<<3|this.type.wireType),i+=this.element.calculateLength(this.id,n[o]);else this.map?n.forEach(function(n,r,o){var s=t.calculateVarint32(8|this.keyType.wireType)+this.keyElement.calculateLength(1,r)+t.calculateVarint32(16|this.type.wireType)+this.element.calculateLength(2,n);i+=t.calculateVarint32(this.id<<3|e.WIRE_TYPES.LDELIM),i+=t.calculateVarint32(s),i+=s},this):this.hasWirePresence(n,r)&&(i+=t.calculateVarint32(this.id<<3|this.type.wireType),i+=this.element.calculateLength(this.id,n))}catch(t){throw Error("Illegal value for "+this.toString(!0)+": "+n+" ("+t+")")}return i},d.decode=function(t,n,r){var i,o;if(!(!this.map&&t==this.type.wireType||!r&&this.repeated&&this.options.packed&&t==e.WIRE_TYPES.LDELIM||this.map&&t==e.WIRE_TYPES.LDELIM))throw Error("Illegal wire type for field "+this.toString(!0)+": "+t+" ("+this.type.wireType+" expected)");if(t==e.WIRE_TYPES.LDELIM&&this.repeated&&this.options.packed&&e.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0&&!r){o=n.readVarint32(),o=n.offset+o;for(var s=[];n.offset<o;)s.push(this.decode(this.type.wireType,n,!0));return s}if(this.map){var u=a.defaultFieldValue(this.keyType);if(i=a.defaultFieldValue(this.type),o=n.readVarint32(),n.remaining()<o)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+o+" required but got only "+n.remaining());var h=n.clone();for(h.limit=h.offset+o,n.offset+=o;h.remaining()>0;){var l=h.readVarint32();t=7&l;var c=l>>>3;if(1===c)u=this.keyElement.decode(h,t,c);else{if(2!==c)throw Error("Unexpected tag in map field key/value submessage");i=this.element.decode(h,t,c)}}return[u,i]}return this.element.decode(n,t,this.id)},n.Message.Field=p;var y=function(t,e,n,r,i,o,s){p.call(this,t,e,n,null,r,i,o,s),this.extension};y.prototype=Object.create(p.prototype),n.Message.ExtensionField=y,n.Message.OneOf=function(t,e,n){r.call(this,t,e,n),this.fields=[]};var m=function(t,e,n,r,i){o.call(this,t,e,n,r,i),this.className="Enum",this.object=null};m.getName=function(t,e){for(var n,r=Object.keys(t),i=0;i<r.length;++i)if(t[n=r[i]]===e)return n;return null},(m.prototype=Object.create(o.prototype)).build=function(t){if(this.object&&!t)return this.object;for(var n=new e.Builder.Enum,r=this.getChildren(m.Value),i=0,o=r.length;i<o;++i)n[r[i].name]=r[i].id;return Object.defineProperty&&Object.defineProperty(n,"$options",{value:this.buildOpt(),enumerable:!1}),this.object=n},n.Enum=m;var g=function(t,e,n,i){r.call(this,t,e,n),this.className="Enum.Value",this.id=i};g.prototype=Object.create(r.prototype),n.Enum.Value=g;var v=function(t,e,n,i){r.call(this,t,e,n),this.field=i};v.prototype=Object.create(r.prototype),n.Extension=v;var b=function(t,e,n,r){o.call(this,t,e,n,r),this.className="Service",this.clazz=null};(b.prototype=Object.create(o.prototype)).build=function(n){return this.clazz&&!n?this.clazz:this.clazz=function(e,n){for(var r=function(t){e.Builder.Service.call(this),this.rpcImpl=t||function(t,e,n){setTimeout(n.bind(this,Error("Not implemented, see: https://github.com/dcodeIO/ProtoBuf.js/wiki/Services")),0)}},i=r.prototype=Object.create(e.Builder.Service.prototype),o=n.getChildren(e.Reflect.Service.RPCMethod),s=0;s<o.length;s++)!function(e){i[e.name]=function(r,i){try{try{r=e.resolvedRequestType.clazz.decode(t.wrap(r))}catch(t){if(!(t instanceof TypeError))throw t}if(null===r||"object"!=typeof r)throw Error("Illegal arguments");r instanceof e.resolvedRequestType.clazz||(r=new e.resolvedRequestType.clazz(r)),this.rpcImpl(e.fqn(),r,function(t,r){if(t)i(t);else{null===r&&(r="");try{r=e.resolvedResponseType.clazz.decode(r)}catch(t){}r&&r instanceof e.resolvedResponseType.clazz?i(null,r):i(Error("Illegal response type received in service method "+n.name+"#"+e.name))}})}catch(t){setTimeout(i.bind(this,t),0)}},r[e.name]=function(t,n,i){new r(t)[e.name](n,i)},Object.defineProperty&&(Object.defineProperty(r[e.name],"$options",{value:e.buildOpt()}),Object.defineProperty(i[e.name],"$options",{value:r[e.name].$options}))}(o[s]);return Object.defineProperty&&(Object.defineProperty(r,"$options",{value:n.buildOpt()}),Object.defineProperty(i,"$options",{value:r.$options}),Object.defineProperty(r,"$type",{value:n}),Object.defineProperty(i,"$type",{value:n})),r}(e,this)},n.Service=b;var w=function(t,e,n,i){r.call(this,t,e,n),this.className="Service.Method",this.options=i||{}};(w.prototype=Object.create(r.prototype)).buildOpt=s.buildOpt,n.Service.Method=w;var E=function(t,e,n,r,i,o,s,a){w.call(this,t,e,n,a),this.className="Service.RPCMethod",this.requestName=r,this.responseName=i,this.requestStream=o,this.responseStream=s,this.resolvedRequestType=null,this.resolvedResponseType=null};return E.prototype=Object.create(w.prototype),n.Service.RPCMethod=E,n}(o),o.Builder=function(t,e,r){var i=function(t){this.ns=new r.Namespace(this,null,""),this.ptr=this.ns,this.resolved=!1,this.result=null,this.files={},this.importRoot=null,this.options=t||{}},o=i.prototype;return i.isMessage=function(t){return"string"==typeof t.name&&void 0===t.values&&void 0===t.rpc},i.isMessageField=function(t){return"string"==typeof t.rule&&"string"==typeof t.name&&"string"==typeof t.type&&void 0!==t.id},i.isEnum=function(t){return"string"==typeof t.name&&!(void 0===t.values||!Array.isArray(t.values)||0===t.values.length)},i.isService=function(t){return!("string"!=typeof t.name||"object"!=typeof t.rpc||!t.rpc)},i.isExtend=function(t){return"string"==typeof t.ref},o.reset=function(){return this.ptr=this.ns,this},o.define=function(t){if("string"!=typeof t||!e.TYPEREF.test(t))throw Error("illegal namespace: "+t);return t.split(".").forEach(function(t){var e=this.ptr.getChild(t);null===e&&this.ptr.addChild(e=new r.Namespace(this,this.ptr,t)),this.ptr=e},this),this},o.create=function(e){if(!e)return this;if(Array.isArray(e)){if(0===e.length)return this;e=e.slice()}else e=[e];for(var n=[e];n.length>0;){if(e=n.pop(),!Array.isArray(e))throw Error("not a valid namespace: "+JSON.stringify(e));for(;e.length>0;){var o=e.shift();if(i.isMessage(o)){var s=new r.Message(this,this.ptr,o.name,o.options,o.isGroup,o.syntax),a={};o.oneofs&&Object.keys(o.oneofs).forEach(function(t){s.addChild(a[t]=new r.Message.OneOf(this,s,t))},this),o.fields&&o.fields.forEach(function(t){if(null!==s.getChild(0|t.id))throw Error("duplicate or invalid field id in "+s.name+": "+t.id);if(t.options&&"object"!=typeof t.options)throw Error("illegal field options in "+s.name+"#"+t.name);var e=null;if("string"==typeof t.oneof&&!(e=a[t.oneof]))throw Error("illegal oneof in "+s.name+"#"+t.name+": "+t.oneof);t=new r.Message.Field(this,s,t.rule,t.keytype,t.type,t.name,t.id,t.options,e,o.syntax),e&&e.fields.push(t),s.addChild(t)},this);var u=[];if(o.enums&&o.enums.forEach(function(t){u.push(t)}),o.messages&&o.messages.forEach(function(t){u.push(t)}),o.services&&o.services.forEach(function(t){u.push(t)}),o.extensions&&("number"==typeof o.extensions[0]?s.extensions=[o.extensions]:s.extensions=o.extensions),this.ptr.addChild(s),u.length>0){n.push(e),e=u,u=null,this.ptr=s,s=null;continue}u=null}else if(i.isEnum(o))s=new r.Enum(this,this.ptr,o.name,o.options,o.syntax),o.values.forEach(function(t){s.addChild(new r.Enum.Value(this,s,t.name,t.id))},this),this.ptr.addChild(s);else if(i.isService(o))s=new r.Service(this,this.ptr,o.name,o.options),Object.keys(o.rpc).forEach(function(t){var e=o.rpc[t];s.addChild(new r.Service.RPCMethod(this,s,t,e.request,e.response,!!e.request_stream,!!e.response_stream,e.options))},this),this.ptr.addChild(s);else{if(!i.isExtend(o))throw Error("not a valid definition: "+JSON.stringify(o));if(s=this.ptr.resolve(o.ref,!0))o.fields.forEach(function(e){if(null!==s.getChild(0|e.id))throw Error("duplicate extended field id in "+s.name+": "+e.id);if(s.extensions){var n=!1;if(s.extensions.forEach(function(t){e.id>=t[0]&&e.id<=t[1]&&(n=!0)}),!n)throw Error("illegal extended field id in "+s.name+": "+e.id+" (not within valid ranges)")}var i=e.name;this.options.convertFieldsToCamelCase&&(i=t.Util.toCamelCase(i));var o=new r.Message.ExtensionField(this,s,e.rule,e.type,this.ptr.fqn()+"."+i,e.id,e.options),a=new r.Extension(this,this.ptr,e.name,o);o.extension=a,this.ptr.addChild(a),s.addChild(o)},this);else if(!/\.?google\.protobuf\./.test(o.ref))throw Error("extended message "+o.ref+" is not defined")}o=null,s=null}e=null,this.ptr=this.ptr.parent}return this.resolved=!1,this.result=null,this},o.import=function(e,r){var i="/";if("string"==typeof r){if(t.Util.IS_NODE&&(r=n(328).resolve(r)),!0===this.files[r])return this.reset();this.files[r]=!0}else if("object"==typeof r){var o=r.root;t.Util.IS_NODE&&(o=n(328).resolve(o)),(o.indexOf("\\")>=0||r.file.indexOf("\\")>=0)&&(i="\\");var s=o+i+r.file;if(!0===this.files[s])return this.reset();this.files[s]=!0}if(e.imports&&e.imports.length>0){var a,u=!1;"object"==typeof r?(this.importRoot=r.root,u=!0,a=this.importRoot,r=r.file,(a.indexOf("\\")>=0||r.indexOf("\\")>=0)&&(i="\\")):"string"==typeof r?this.importRoot?a=this.importRoot:r.indexOf("/")>=0?""===(a=r.replace(/\/[^\/]*$/,""))&&(a="/"):r.indexOf("\\")>=0?(a=r.replace(/\\[^\\]*$/,""),i="\\"):a=".":a=null;for(var h=0;h<e.imports.length;h++)if("string"==typeof e.imports[h]){if(!a)throw Error("cannot determine import root");var l=e.imports[h];if("google/protobuf/descriptor.proto"===l)continue;if(l=a+i+l,!0===this.files[l])continue;/\.proto$/i.test(l)&&!t.DotProto&&(l=l.replace(/\.proto$/,".json"));var c=t.Util.fetch(l);if(null===c)throw Error("failed to import '"+l+"' in '"+r+"': file not found");/\.json$/i.test(l)?this.import(JSON.parse(c+""),l):this.import(t.DotProto.Parser.parse(c),l)}else r?/\.(\w+)$/.test(r)?this.import(e.imports[h],r.replace(/^(.+)\.(\w+)$/,function(t,e,n){return e+"_import"+h+"."+n})):this.import(e.imports[h],r+"_import"+h):this.import(e.imports[h]);u&&(this.importRoot=null)}e.package&&this.define(e.package),e.syntax&&function t(e){e.messages&&e.messages.forEach(function(n){n.syntax=e.syntax,t(n)}),e.enums&&e.enums.forEach(function(t){t.syntax=e.syntax})}(e);var f=this.ptr;return e.options&&Object.keys(e.options).forEach(function(t){f.options[t]=e.options[t]}),e.messages&&(this.create(e.messages),this.ptr=f),e.enums&&(this.create(e.enums),this.ptr=f),e.services&&(this.create(e.services),this.ptr=f),e.extends&&this.create(e.extends),this.reset()},o.resolveAll=function(){var n;if(null==this.ptr||"object"==typeof this.ptr.type)return this;if(this.ptr instanceof r.Namespace)this.ptr.children.forEach(function(t){this.ptr=t,this.resolveAll()},this);else if(this.ptr instanceof r.Message.Field){if(e.TYPE.test(this.ptr.type))this.ptr.type=t.TYPES[this.ptr.type];else{if(!e.TYPEREF.test(this.ptr.type))throw Error("illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(!(n=(this.ptr instanceof r.Message.ExtensionField?this.ptr.extension.parent:this.ptr.parent).resolve(this.ptr.type,!0)))throw Error("unresolvable type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(this.ptr.resolvedType=n,n instanceof r.Enum){if(this.ptr.type=t.TYPES.enum,"proto3"===this.ptr.syntax&&"proto3"!==n.syntax)throw Error("proto3 message cannot reference proto2 enum")}else{if(!(n instanceof r.Message))throw Error("illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);this.ptr.type=n.isGroup?t.TYPES.group:t.TYPES.message}}if(this.ptr.map){if(!e.TYPE.test(this.ptr.keyType))throw Error("illegal key type for map field in "+this.ptr.toString(!0)+": "+this.ptr.keyType);this.ptr.keyType=t.TYPES[this.ptr.keyType]}}else if(this.ptr instanceof t.Reflect.Service.Method){if(!(this.ptr instanceof t.Reflect.Service.RPCMethod))throw Error("illegal service type in "+this.ptr.toString(!0));if(!((n=this.ptr.parent.resolve(this.ptr.requestName,!0))&&n instanceof t.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.requestName);if(this.ptr.resolvedRequestType=n,!((n=this.ptr.parent.resolve(this.ptr.responseName,!0))&&n instanceof t.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.responseName);this.ptr.resolvedResponseType=n}else if(!(this.ptr instanceof t.Reflect.Message.OneOf||this.ptr instanceof t.Reflect.Extension||this.ptr instanceof t.Reflect.Enum.Value))throw Error("illegal object in namespace: "+typeof this.ptr+": "+this.ptr);return this.reset()},o.build=function(t){if(this.reset(),this.resolved||(this.resolveAll(),this.resolved=!0,this.result=null),null===this.result&&(this.result=this.ns.build()),!t)return this.result;for(var e="string"==typeof t?t.split("."):t,n=this.result,r=0;r<e.length;r++){if(!n[e[r]]){n=null;break}n=n[e[r]]}return n},o.lookup=function(t,e){return t?this.ns.resolve(t,e):this.ns},o.toString=function(){return"Builder"},i.Message=function(){},i.Enum=function(){},i.Service=function(){},i}(o,o.Lang,o.Reflect),o.Map=function(t,e){var n=function(t,n){if(!t.map)throw Error("field is not a map");if(this.field=t,this.keyElem=new e.Element(t.keyType,null,!0,t.syntax),this.valueElem=new e.Element(t.type,t.resolvedType,!1,t.syntax),this.map={},Object.defineProperty(this,"size",{get:function(){return Object.keys(this.map).length}}),n)for(var r=Object.keys(n),i=0;i<r.length;i++){var o=this.keyElem.valueFromString(r[i]),s=this.valueElem.verifyValue(n[r[i]]);this.map[this.keyElem.valueToString(o)]={key:o,value:s}}},r=n.prototype;function i(t){var e=0;return{next:function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}}return r.clear=function(){this.map={}},r.delete=function(t){var e=this.keyElem.valueToString(this.keyElem.verifyValue(t)),n=e in this.map;return delete this.map[e],n},r.entries=function(){for(var t,e=[],n=Object.keys(this.map),r=0;r<n.length;r++)e.push([(t=this.map[n[r]]).key,t.value]);return i(e)},r.keys=function(){for(var t=[],e=Object.keys(this.map),n=0;n<e.length;n++)t.push(this.map[e[n]].key);return i(t)},r.values=function(){for(var t=[],e=Object.keys(this.map),n=0;n<e.length;n++)t.push(this.map[e[n]].value);return i(t)},r.forEach=function(t,e){for(var n,r=Object.keys(this.map),i=0;i<r.length;i++)t.call(e,(n=this.map[r[i]]).value,n.key,this)},r.set=function(t,e){var n=this.keyElem.verifyValue(t),r=this.valueElem.verifyValue(e);return this.map[this.keyElem.valueToString(n)]={key:n,value:r},this},r.get=function(t){var e=this.keyElem.valueToString(this.keyElem.verifyValue(t));if(e in this.map)return this.map[e].value},r.has=function(t){return this.keyElem.valueToString(this.keyElem.verifyValue(t))in this.map},n}(0,o.Reflect),o.loadProto=function(t,e,n){return("string"==typeof e||e&&"string"==typeof e.file&&"string"==typeof e.root)&&(n=e,e=void 0),o.loadJson(o.DotProto.Parser.parse(t),e,n)},o.protoFromString=o.loadProto,o.loadProtoFile=function(t,e,n){if(e&&"object"==typeof e?(n=e,e=null):e&&"function"==typeof e||(e=null),e)return o.Util.fetch("string"==typeof t?t:t.root+"/"+t.file,function(r){if(null!==r)try{e(null,o.loadProto(r,n,t))}catch(t){e(t)}else e(Error("Failed to fetch file"))});var r=o.Util.fetch("object"==typeof t?t.root+"/"+t.file:t);return null===r?null:o.loadProto(r,n,t)},o.protoFromFile=o.loadProtoFile,o.newBuilder=function(t){return void 0===(t=t||{}).convertFieldsToCamelCase&&(t.convertFieldsToCamelCase=o.convertFieldsToCamelCase),void 0===t.populateAccessors&&(t.populateAccessors=o.populateAccessors),new o.Builder(t)},o.loadJson=function(t,e,n){return("string"==typeof e||e&&"string"==typeof e.file&&"string"==typeof e.root)&&(n=e,e=null),e&&"object"==typeof e||(e=o.newBuilder()),"string"==typeof t&&(t=JSON.parse(t)),e.import(t,n),e.resolveAll(),e},o.loadJsonFile=function(t,e,n){if(e&&"object"==typeof e?(n=e,e=null):e&&"function"==typeof e||(e=null),e)return o.Util.fetch("string"==typeof t?t:t.root+"/"+t.file,function(r){if(null!==r)try{e(null,o.loadJson(JSON.parse(r),n,t))}catch(t){e(t)}else e(Error("Failed to fetch file"))});var r=o.Util.fetch("object"==typeof t?t.root+"/"+t.file:t);return null===r?null:o.loadJson(JSON.parse(r),n,t)},o})?i.apply(e,o):i)||(t.exports=s)}).call(this,n(76))};functions[492]=func492;functions[493]=func493;functions[494]=fun494;(function(t){function e(e){for(var n,r,o=e[0],s=e[1],a=0,u=[];a<o.length;a++)r=o[a],i[r]&&u.push(i[r][0]),i[r]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n]);for(h&&h(e);u.length;)u.shift()()}var n={},r={33:0},i={33:0};function o(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.e=function(t){var e=[];r[t]?e.push(r[t]):0!==r[t]&&{5:1,11:1,24:1}[t]&&e.push(r[t]=new Promise(function(e,n){for(var r="css/"+({0:"vendors~360s~core~phase1~phase2~phase3~phase5~phase6~webvr",1:"phase2~phase5~webvr",2:"vendors~gui~sc-gui~ws-gui",3:"core~phase1",4:"vendors~core~webvr",5:"sc-gui~ws-gui",6:"vendors~sc-gui",7:"vendors~phase1",8:"vendors~control-kit",9:"vendors~core",10:"sdkBindings",11:"sc-gui",12:"phase6",13:"webvr",14:"360s",15:"vr",16:"phase4",17:"phase3",18:"phase5",20:"phase2",21:"quickstart",22:"gui",23:"phase1",24:"core"}[t]||t)+".css",i=o.p+r,s=document.getElementsByTagName("link"),a=0;a<s.length;a++){var u=(l=s[a]).getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===r||u===i))return e()}var h=document.getElementsByTagName("style");for(a=0;a<h.length;a++){var l;if((u=(l=h[a]).getAttribute("data-href"))===r||u===i)return e()}var c=document.createElement("link");c.rel="stylesheet",c.type="text/css",c.onload=e,c.onerror=function(e){var r=e&&e.target&&e.target.src||i,o=new Error("Loading CSS chunk "+t+" failed.\n("+r+")");o.request=r,n(o)},c.href=i,document.getElementsByTagName("head")[0].appendChild(c)}).then(function(){r[t]=0}));var n=i[t];if(0!==n)if(n)e.push(n[2]);else{var s=new Promise(function(e,r){n=i[t]=[e,r]});e.push(n[2]=s);var a=document.getElementsByTagName("head")[0],u=document.createElement("script");u.charset="utf-8",u.timeout=120,o.nc&&u.setAttribute("nonce",o.nc),u.src=function(t){return o.p+"js/"+t+".js"}(t);var h=setTimeout(function(){l({type:"timeout",target:u})},12e4);function l(e){u.onerror=u.onload=null,clearTimeout(h);var n=i[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src,s=new Error("Loading chunk "+t+" failed.\n("+r+": "+o+")");s.type=r,s.request=o,n[1](s)}i[t]=void 0}}u.onerror=u.onload=l,a.appendChild(u)}return Promise.all(e)},o.m=t,o.c=n,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},o.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p=undefined==RES_URL?"":RES_URL,o.oe=function(t){throw console.error(t),t};var s=window.webpackJsonp=window.webpackJsonp||[],a=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var h=a;o(o.s=171)})(functions);